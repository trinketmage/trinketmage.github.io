var bp=Object.defineProperty;var gp=(n,e,t)=>e in n?bp(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var D=(n,e,t)=>gp(n,typeof e!="symbol"?e+"":e,t);import{V as rt,F as ke,s as wp,v as Ae,m as gn,r as zc,a as Mt,b as Rs,c as Hc,l as Lo,d as tl,e as tt,f as xp,g as yp,h as Cp,i as nl,j as Yr,S as Kc,R as Pp,C as Ep,k as nt,n as kp,P as Gc,W as Tp,o as Ap,T as Sp,p as Qr,q as qc,L as Mp,t as $i,u as Xc,w as Rt,x as Vp,y as Lp,D as Wc,M as Di,z as zi,A as bt,B as Os,E as X,I as Rp,G as Yc,O as si,H as Qc,J as Op,K as wn,N as Dp,Q as Zr,U as Zc,X as ye,Y as Jc,Z as Np,_ as _r,$ as Ip,a0 as eu,a1 as $p,a2 as Fp,a3 as tu,a4 as Bp,a5 as pi,a6 as jp,a7 as Up,a8 as zp,a9 as Hp,aa as Fi,ab as Kp,ac as nu,ad as Gp,ae as qp,af as Xp,ag as iu,ah as il,ai as Ro,aj as Wp,ak as Yp,al as Qp,am as Zp,an as Jp,ao as em,ap as su,aq as tm,ar as sl,as as rl,at as ol,au as al,av as ru,aw as ou,ax as nm,ay as im,az as sm,aA as rm,aB as om,aC as am,aD as ot,aE as ll,aF as lm,aG as cm,aH as cl,aI as qt,aJ as Xt,aK as au,aL as lu,aM as cu,aN as um,aO as Ys,aP as ul,aQ as hl,aR as hm,aS as uu,aT as dm,aU as Qs,aV as pm,aW as mm,aX as Zs,aY as dl,aZ as fm,a_ as vm,a$ as pl,b0 as _m,b1 as br,b2 as ml,b3 as bm,b4 as gm,b5 as Tt,b6 as wm,b7 as Oo,b8 as hu,b9 as xm,ba as ym,bb as Cm,bc as Pm,bd as Em,be as xs,bf as km}from"./three-eSw8yKeG.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();const ce={viewport:{width:window.innerWidth,height:window.innerHeight},fov:{width:1,height:1},pixelRatio:Math.min(window.devicePixelRatio,2)};class Tm{constructor(){D(this,"_keys",{forward:!1,backward:!1,left:!1,right:!1,space:!1,shift:!1});this.menuCallback=()=>{},this.mouseMoved=!1,this.coords=new rt,this.coords_old=new rt,this.diff=new rt,this.timer=null,this.count=0,this.velocity=0,this.offset=new rt(0,0)}init(){document.body.addEventListener("mousemove",this.onDocumentMouseMove.bind(this),!1),document.body.addEventListener("touchstart",this.onDocumentTouchStart.bind(this),!1),document.body.addEventListener("touchmove",this.onDocumentTouchMove.bind(this),!1),document.addEventListener("keydown",e=>this.onKeyDown(e),!1),document.addEventListener("keyup",e=>this.onKeyUp(e),!1),window.addEventListener("blur",e=>this.onBlur(e),!1)}setCoords(e,t){this.timer&&clearTimeout(this.timer),this.coords.set(e/ce.viewport.width*2-1,-(t/ce.viewport.height)*2+1),this.mouseMoved=!0,this.timer=setTimeout(()=>{this.mouseMoved=!1},100)}onDocumentMouseMove(e){this.setCoords(e.clientX,e.clientY)}onDocumentTouchStart(e){e.touches.length===1&&this.setCoords(e.touches[0].pageX,e.touches[0].pageY)}onDocumentTouchMove(e){e.touches.length===1&&this.setCoords(e.touches[0].pageX,e.touches[0].pageY)}onKeyDown(e){switch(e.keyCode){case 87:this._keys.forward=!0;break;case 65:this._keys.left=!0;break;case 83:this._keys.backward=!0;break;case 68:this._keys.right=!0;break;case 32:this._keys.space=!0;break;case 16:this._keys.shift=!0;break}}onKeyUp(e){switch(e.keyCode){case 87:this._keys.forward=!1;break;case 65:this._keys.left=!1;break;case 83:this._keys.backward=!1;break;case 68:this._keys.right=!1;break;case 32:this._keys.space=!1;break;case 16:this._keys.shift=!1;break;case 77:this.menuCallback();break}}onBlur(){for(const[e]of Object.entries(this._keys))this._keys[e]=!1}render(){this.diff.subVectors(this.coords,this.coords_old),this.coords_old.copy(this.coords),this.coords_old.x===0&&this.coords_old.y===0&&this.diff.set(0,0)}dispose(){}resize(){}}const xn=new Tm;function Am(n,e){const t=n.fov*Math.PI/180;return 2*Math.tan(t/2)*e}var Sm=ke(([n,e])=>{var t=n.x.div(n.y).div(e),i=wp(1,t);return Ae(gn(t,1,i),gn(1,zc(t),i))}),Mm=ke(([n,e,t])=>Mt(Rs(n,e),Rs(Mt(n,e),t))),fl=ke(([n,e])=>{const t=Hc(n).sub(e);return Lo(Mt(t,0)).add(Rs(Mt(t.x,t.y),0))});const Vm=ke(([n,e,t=tt(0)])=>{t=t.toVar(),t.xy=tl(n.x.greaterThan(0),t.xy,t.zw),t.y=tl(n.y.greaterThan(0),t.x,t.y);const i=Hc(n).sub(e).add(t.x);return Rs(Mt(i.x,i.y),0).add(Lo(Mt(i,0))).sub(t.x)});ke(([n,e])=>Lo(n).sub(e));var Lm=ke(([n])=>{var e=Mm(n.r,n.g,n.b).sub(.5);return xp(e.div(yp(e)).add(.5),0,1)}),vl=ke(([n])=>Cp(nl(n),Yr(n).mul(-1),Yr(n),nl(n)));/*! Tweakpane 4.0.4 (c) 2016 cocopon, licensed under the MIT license. */function G(n){return n==null}function Do(n){return n!==null&&typeof n=="object"}function Jr(n){return n!==null&&typeof n=="object"}function Rm(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function An(n,e){return Array.from(new Set([...Object.keys(n),...Object.keys(e)])).reduce((i,s)=>{const r=n[s],o=e[s];return Jr(r)&&Jr(o)?Object.assign(Object.assign({},i),{[s]:An(r,o)}):Object.assign(Object.assign({},i),{[s]:s in e?o:r})},{})}function No(n){return Do(n)?"target"in n:!1}const Om={alreadydisposed:()=>"View has been already disposed",invalidparams:n=>`Invalid parameters for '${n.name}'`,nomatchingcontroller:n=>`No matching controller for '${n.key}'`,nomatchingview:n=>`No matching view for '${JSON.stringify(n.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:n=>`Not compatible with  plugin '${n.id}'`,propertynotfound:n=>`Property '${n.name}' not found`,shouldneverhappen:()=>"This error should never happen"};let ve=class qn{static alreadyDisposed(){return new qn({type:"alreadydisposed"})}static notBindable(){return new qn({type:"notbindable"})}static notCompatible(e,t){return new qn({type:"notcompatible",context:{id:`${e}.${t}`}})}static propertyNotFound(e){return new qn({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new qn({type:"shouldneverhappen"})}constructor(e){var t;this.message=(t=Om[e.type](e.context))!==null&&t!==void 0?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}},_l=class du{constructor(e,t){this.obj_=e,this.key=t}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,t){const i=this.read();if(!du.isBindable(i))throw ve.notBindable();if(!(e in i))throw ve.propertyNotFound(e);i[e]=t}},le=class{constructor(){this.observers_={}}on(e,t,i){var s;let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:t,key:(s=i==null?void 0:i.key)!==null&&s!==void 0?s:t}),this}off(e,t){const i=this.observers_[e];return i&&(this.observers_[e]=i.filter(s=>s.key!==t)),this}emit(e,t){const i=this.observers_[e];i&&i.forEach(s=>{s.handler(t)})}},Dm=class{constructor(e,t){var i;this.constraint_=t==null?void 0:t.constraint,this.equals_=(i=t==null?void 0:t.equals)!==null&&i!==void 0?i:(s,r)=>s===r,this.emitter=new le,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},s=this.constraint_?this.constraint_.constrain(e):e,r=this.rawValue_;this.equals_(r,s)&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=s,this.emitter.emit("change",{options:i,previousRawValue:r,rawValue:s,sender:this}))}},Nm=class{constructor(e){this.emitter=new le,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},s=this.value_;s===e&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:i,previousRawValue:s,rawValue:this.value_,sender:this}))}},Im=class{constructor(e){this.emitter=new le,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}};function Y(n,e){const t=e==null?void 0:e.constraint,i=e==null?void 0:e.equals;return!t&&!i?new Nm(n):new Dm(n,e)}function $m(n){return[new Im(n),(e,t)=>{n.setRawValue(e,t)}]}let A=class pu{constructor(e){this.emitter=new le,this.valMap_=e;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",()=>{this.emitter.emit("change",{key:t,sender:this})})}static createCore(e){return Object.keys(e).reduce((i,s)=>Object.assign(i,{[s]:Y(e[s])}),{})}static fromObject(e){const t=this.createCore(e);return new pu(t)}get(e){return this.valMap_[e].rawValue}set(e,t){this.valMap_[e].rawValue=t}value(e){return this.valMap_[e]}},ls=class{constructor(e){this.values=A.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");return Math.min(Math.max(e,i),t)}},Fm=class{constructor(e){this.values=A.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");let s=e;return G(i)||(s=Math.max(s,i)),G(t)||(s=Math.min(s,t)),s}},Bm=class{constructor(e,t=0){this.step=e,this.origin=t}constrain(e){const t=this.origin%this.step,i=Math.round((e-t)/this.step);return t+i*this.step}},jm=class{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}};const Um={"**":(n,e)=>Math.pow(n,e),"*":(n,e)=>n*e,"/":(n,e)=>n/e,"%":(n,e)=>n%e,"+":(n,e)=>n+e,"-":(n,e)=>n-e,"<<":(n,e)=>n<<e,">>":(n,e)=>n>>e,">>>":(n,e)=>n>>>e,"&":(n,e)=>n&e,"^":(n,e)=>n^e,"|":(n,e)=>n|e};let zm=class{constructor(e,t,i){this.left=t,this.operator=e,this.right=i}evaluate(){const e=Um[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}};const Hm={"+":n=>n,"-":n=>-n,"~":n=>~n};let Km=class{constructor(e,t){this.operator=e,this.expression=t}evaluate(){const e=Hm[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}};function Io(n){return(e,t)=>{for(let i=0;i<n.length;i++){const s=n[i](e,t);if(s!=="")return s}return""}}function Hi(n,e){var t;const i=n.substr(e).match(/^\s+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function Gm(n,e){const t=n.substr(e,1);return t.match(/^[1-9]$/)?t:""}function Ki(n,e){var t;const i=n.substr(e).match(/^[0-9]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function qm(n,e){const t=Ki(n,e);if(t!=="")return t;const i=n.substr(e,1);if(e+=1,i!=="-"&&i!=="+")return"";const s=Ki(n,e);return s===""?"":i+s}function $o(n,e){const t=n.substr(e,1);if(e+=1,t.toLowerCase()!=="e")return"";const i=qm(n,e);return i===""?"":t+i}function mu(n,e){const t=n.substr(e,1);if(t==="0")return t;const i=Gm(n,e);return e+=i.length,i===""?"":i+Ki(n,e)}function Xm(n,e){const t=mu(n,e);if(e+=t.length,t==="")return"";const i=n.substr(e,1);if(e+=i.length,i!==".")return"";const s=Ki(n,e);return e+=s.length,t+i+s+$o(n,e)}function Wm(n,e){const t=n.substr(e,1);if(e+=t.length,t!==".")return"";const i=Ki(n,e);return e+=i.length,i===""?"":t+i+$o(n,e)}function Ym(n,e){const t=mu(n,e);return e+=t.length,t===""?"":t+$o(n,e)}const Qm=Io([Xm,Wm,Ym]);function Zm(n,e){var t;const i=n.substr(e).match(/^[01]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function Jm(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0b")return"";const i=Zm(n,e);return i===""?"":t+i}function ef(n,e){var t;const i=n.substr(e).match(/^[0-7]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function tf(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0o")return"";const i=ef(n,e);return i===""?"":t+i}function nf(n,e){var t;const i=n.substr(e).match(/^[0-9a-f]+/i);return(t=i&&i[0])!==null&&t!==void 0?t:""}function sf(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0x")return"";const i=nf(n,e);return i===""?"":t+i}const rf=Io([Jm,tf,sf]),of=Io([rf,Qm]);function af(n,e){const t=of(n,e);return e+=t.length,t===""?null:{evaluable:new jm(t),cursor:e}}function lf(n,e){const t=n.substr(e,1);if(e+=t.length,t!=="(")return null;const i=vu(n,e);if(!i)return null;e=i.cursor,e+=Hi(n,e).length;const s=n.substr(e,1);return e+=s.length,s!==")"?null:{evaluable:i.evaluable,cursor:e}}function cf(n,e){var t;return(t=af(n,e))!==null&&t!==void 0?t:lf(n,e)}function fu(n,e){const t=cf(n,e);if(t)return t;const i=n.substr(e,1);if(e+=i.length,i!=="+"&&i!=="-"&&i!=="~")return null;const s=fu(n,e);return s?(e=s.cursor,{cursor:e,evaluable:new Km(i,s.evaluable)}):null}function uf(n,e,t){t+=Hi(e,t).length;const i=n.filter(s=>e.startsWith(s,t))[0];return i?(t+=i.length,t+=Hi(e,t).length,{cursor:t,operator:i}):null}function hf(n,e){return(t,i)=>{const s=n(t,i);if(!s)return null;i=s.cursor;let r=s.evaluable;for(;;){const o=uf(e,t,i);if(!o)break;i=o.cursor;const a=n(t,i);if(!a)return null;i=a.cursor,r=new zm(o.operator,r,a.evaluable)}return r?{cursor:i,evaluable:r}:null}}const df=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((n,e)=>hf(n,e),fu);function vu(n,e){return e+=Hi(n,e).length,df(n,e)}function pf(n){const e=vu(n,0);return!e||e.cursor+Hi(n,e.cursor).length!==n.length?null:e.evaluable}function Ot(n){var e;const t=pf(n);return(e=t==null?void 0:t.evaluate())!==null&&e!==void 0?e:null}function _u(n){if(typeof n=="number")return n;if(typeof n=="string"){const e=Ot(n);if(!G(e))return e}return 0}function mf(n){return String(n)}function De(n){return e=>e.toFixed(Math.max(Math.min(n,20),0))}function N(n,e,t,i,s){const r=(n-e)/(t-e);return i+r*(s-i)}function bl(n){return String(n.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function ue(n,e,t){return Math.min(Math.max(n,e),t)}function bu(n,e){return(n%e+e)%e}function ff(n,e){return G(n.step)?Math.max(bl(e),2):bl(n.step)}function gu(n){var e;return(e=n.step)!==null&&e!==void 0?e:1}function wu(n,e){var t;const i=Math.abs((t=n.step)!==null&&t!==void 0?t:e);return i===0?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function xu(n,e){return G(n.step)?null:new Bm(n.step,e)}function yu(n){return!G(n.max)&&!G(n.min)?new ls({max:n.max,min:n.min}):!G(n.max)||!G(n.min)?new Fm({max:n.max,min:n.min}):null}function Cu(n,e){var t,i,s;return{formatter:(t=n.format)!==null&&t!==void 0?t:De(ff(n,e)),keyScale:(i=n.keyScale)!==null&&i!==void 0?i:gu(n),pointerScale:(s=n.pointerScale)!==null&&s!==void 0?s:wu(n,e)}}function Pu(n){return{format:n.optional.function,keyScale:n.optional.number,max:n.optional.number,min:n.optional.number,pointerScale:n.optional.number,step:n.optional.number}}function Fo(n){return{constraint:n.constraint,textProps:A.fromObject(Cu(n.params,n.initialValue))}}let Dn=class{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}},Js=class{constructor(e){this.target=e}},cs=class extends Js{constructor(e,t,i){super(e),this.value=t,this.last=i??!0}},vf=class extends Js{constructor(e,t){super(e),this.expanded=t}},_f=class extends Js{constructor(e,t){super(e),this.index=t}};class bf extends Js{constructor(e,t){super(e),this.native=t}}let Gi=class extends Dn{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new le,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const t=this.controller.value;this.emitter_.emit("change",new cs(this,t.binding.target.read(),e.options.last))}};class gf{constructor(e,t){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=t,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new le}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,t){this.value_.setRawValue(e,t)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function wf(n){if(!("binding"in n))return!1;const e=n.binding;return No(e)&&"read"in e&&"write"in e}function xf(n,e){const i=Object.keys(e).reduce((s,r)=>{if(s===void 0)return;const o=e[r],a=o(n[r]);return a.succeeded?Object.assign(Object.assign({},s),{[r]:a.value}):void 0},{});return i}function yf(n,e){return n.reduce((t,i)=>{if(t===void 0)return;const s=e(i);if(!(!s.succeeded||s.value===void 0))return[...t,s.value]},[])}function Cf(n){return n===null?!1:typeof n=="object"}function yt(n){return e=>t=>{if(!e&&t===void 0)return{succeeded:!1,value:void 0};if(e&&t===void 0)return{succeeded:!0,value:void 0};const i=n(t);return i!==void 0?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function gl(n){return{custom:e=>yt(e)(n),boolean:yt(e=>typeof e=="boolean"?e:void 0)(n),number:yt(e=>typeof e=="number"?e:void 0)(n),string:yt(e=>typeof e=="string"?e:void 0)(n),function:yt(e=>typeof e=="function"?e:void 0)(n),constant:e=>yt(t=>t===e?e:void 0)(n),raw:yt(e=>e)(n),object:e=>yt(t=>{if(Cf(t))return xf(t,e)})(n),array:e=>yt(t=>{if(Array.isArray(t))return yf(t,e)})(n)}}const eo={optional:gl(!0),required:gl(!1)};function ee(n,e){const t=e(eo),i=eo.required.object(t)(n);return i.succeeded?i.value:void 0}function He(n,e,t,i){if(e&&!e(n))return!1;const s=ee(n,t);return s?i(s):!1}function Ke(n,e){var t;return An((t=n==null?void 0:n())!==null&&t!==void 0?t:{},e)}function Cn(n){return"value"in n}function Eu(n){if(!Do(n)||!("binding"in n))return!1;const e=n.binding;return No(e)}const ct="http://www.w3.org/2000/svg";function Ds(n){n.offsetHeight}function Pf(n,e){const t=n.style.transition;n.style.transition="none",e(),n.style.transition=t}function Bo(n){return n.ontouchstart!==void 0}function Ef(){return globalThis}function kf(){return Ef().document}function Tf(n){const e=n.ownerDocument.defaultView;return e&&"document"in e?n.getContext("2d",{willReadFrequently:!0}):null}const Af={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function er(n,e){const t=n.createElementNS(ct,"svg");return t.innerHTML=Af[e],t}function ku(n,e,t){n.insertBefore(e,n.children[t])}function jo(n){n.parentElement&&n.parentElement.removeChild(n)}function Tu(n){for(;n.children.length>0;)n.removeChild(n.children[0])}function Sf(n){for(;n.childNodes.length>0;)n.removeChild(n.childNodes[0])}function Au(n){return n.relatedTarget?n.relatedTarget:"explicitOriginalTarget"in n?n.explicitOriginalTarget:null}function Vt(n,e){n.emitter.on("change",t=>{e(t.rawValue)}),e(n.rawValue)}function dt(n,e,t){Vt(n.value(e),t)}const Mf="tp";function R(n){return(t,i)=>[Mf,"-",n,"v",t?`_${t}`:"",i?`-${i}`:""].join("")}const Pi=R("lbl");function Vf(n,e){const t=n.createDocumentFragment();return e.split(`
`).map(s=>n.createTextNode(s)).forEach((s,r)=>{r>0&&t.appendChild(n.createElement("br")),t.appendChild(s)}),t}let Su=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Pi()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Pi("l")),dt(t.props,"label",r=>{G(r)?this.element.classList.add(Pi(void 0,"nol")):(this.element.classList.remove(Pi(void 0,"nol")),Sf(i),i.appendChild(Vf(e,r)))}),this.element.appendChild(i),this.labelElement=i;const s=e.createElement("div");s.classList.add(Pi("v")),this.element.appendChild(s),this.valueElement=s}},Mu=class{constructor(e,t){this.props=t.props,this.valueController=t.valueController,this.viewProps=t.valueController.viewProps,this.view=new Su(e,{props:t.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return He(e,null,t=>({label:t.optional.string}),t=>(this.props.set("label",t.label),!0))}exportProps(){return Ke(null,{label:this.props.get("label")})}};function Lf(){return["veryfirst","first","last","verylast"]}const wl=R(""),xl={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};let tr=class{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const t=this.view.element;this.blade.value("positions").emitter.on("change",()=>{Lf().forEach(i=>{t.classList.remove(wl(void 0,xl[i]))}),this.blade.get("positions").forEach(i=>{t.classList.add(wl(void 0,xl[i]))})}),this.viewProps.handleDispose(()=>{jo(t)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return He(e,null,t=>({disabled:t.required.boolean,hidden:t.required.boolean}),t=>(this.viewProps.importState(t),!0))}exportState(){return Ke(null,Object.assign({},this.viewProps.exportState()))}};class Sn extends tr{constructor(e,t){if(t.value!==t.valueController.value)throw ve.shouldNeverHappen();const i=t.valueController.viewProps,s=new Mu(e,{blade:t.blade,props:t.props,valueController:t.valueController});super(Object.assign(Object.assign({},t),{view:new Su(e,{props:t.props,viewProps:i}),viewProps:i})),this.labelController=s,this.value=t.value,this.valueController=t.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return He(e,t=>{var i,s,r;return super.importState(t)&&this.labelController.importProps(t)&&((r=(s=(i=this.valueController).importProps)===null||s===void 0?void 0:s.call(i,e))!==null&&r!==void 0?r:!0)},t=>({value:t.optional.raw}),t=>(t.value&&(this.value.rawValue=t.value),!0))}exportState(){var e,t,i;return Ke(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(i=(t=(e=this.valueController).exportProps)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}))}}function yl(n){const e=Object.assign({},n);return delete e.value,e}class Vu extends Sn{constructor(e,t){super(e,t),this.tag=t.tag}importState(e){return He(e,t=>super.importState(yl(e)),t=>({tag:t.optional.string}),t=>(this.tag=t.tag,!0))}exportState(){return Ke(()=>yl(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function Rf(n){return Cn(n)&&Eu(n.value)}class Of extends Vu{importState(e){return He(e,t=>super.importState(t),t=>({binding:t.required.object({value:t.required.raw})}),t=>(this.value.binding.inject(t.binding.value),this.value.fetch(),!0))}}function Df(n){return Cn(n)&&wf(n.value)}function Lu(n,e){for(;n.length<e;)n.push(void 0)}function Nf(n){const e=[];return Lu(e,n),e}function If(n){const e=n.indexOf(void 0);return e<0?n:n.slice(0,e)}function $f(n,e){const t=[...If(n),e];return t.length>n.length?t.splice(0,t.length-n.length):Lu(t,n.length),t}class Ff{constructor(e){this.emitter=new le,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=Y(Nf(e.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,t){this.value_.setRawValue(e,t)}fetch(){this.value_.rawValue=$f(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Bf(n){if(!("binding"in n))return!1;const e=n.binding;return No(e)&&"read"in e&&!("write"in e)}class jf extends Vu{exportState(){return Ke(()=>super.exportState(),{binding:{readonly:!0}})}}function Uf(n){return Cn(n)&&Bf(n.value)}let zf=class extends Dn{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,t){const i=t.bind(this);return this.controller.buttonController.emitter.on(e,r=>{i(new bf(this,r.nativeEvent))}),this}off(e,t){return this.controller.buttonController.emitter.off(e,t),this}};function Hf(n,e,t){t?n.classList.add(e):n.classList.remove(e)}function mi(n,e){return t=>{Hf(n,e,t)}}function Uo(n,e){Vt(n,t=>{e.textContent=t??""})}const gr=R("btn");let Kf=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(gr()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("button");i.classList.add(gr("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=e.createElement("div");s.classList.add(gr("t")),Uo(t.props.value("title"),s),this.buttonElement.appendChild(s)}},Gf=class{constructor(e,t){this.emitter=new le,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Kf(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return He(e,null,t=>({title:t.optional.string}),t=>(this.props.set("title",t.title),!0))}exportProps(){return Ke(null,{title:this.props.get("title")})}onClick_(e){this.emitter.emit("click",{nativeEvent:e,sender:this})}},Cl=class extends tr{constructor(e,t){const i=new Gf(e,{props:t.buttonProps,viewProps:t.viewProps}),s=new Mu(e,{blade:t.blade,props:t.labelProps,valueController:i});super({blade:t.blade,view:s.view,viewProps:t.viewProps}),this.buttonController=i,this.labelController=s}importState(e){return He(e,t=>super.importState(t)&&this.buttonController.importProps(t)&&this.labelController.importProps(t),()=>({}),()=>!0)}exportState(){return Ke(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}},Ru=class{constructor(e){const[t,i]=e.split("-"),s=t.split(".");this.major=parseInt(s[0],10),this.minor=parseInt(s[1],10),this.patch=parseInt(s[2],10),this.prerelease=i??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}};const fi=new Ru("2.0.4");function Te(n){return Object.assign({core:fi},n)}const qf=Te({id:"button",type:"blade",accept(n){const e=ee(n,t=>({title:t.required.string,view:t.required.constant("button"),label:t.optional.string}));return e?{params:e}:null},controller(n){return new Cl(n.document,{blade:n.blade,buttonProps:A.fromObject({title:n.params.title}),labelProps:A.fromObject({label:n.params.label}),viewProps:n.viewProps})},api(n){return n.controller instanceof Cl?new zf(n.controller):null}});function Xf(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function Wf(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function Yf(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function Qf(n){return Do(n)?"refresh"in n&&typeof n.refresh=="function":!1}function Zf(n,e){if(!_l.isBindable(n))throw ve.notBindable();return new _l(n,e)}let Jf=class{constructor(e,t){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new le,this.pool_=t,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,t,i){const s=i??{},r=this.controller_.element.ownerDocument,o=this.pool_.createBinding(r,Zf(e,t),s),a=this.pool_.createBindingApi(o);return this.add(a,s.index)}addFolder(e){return Wf(this,e)}addButton(e){return Xf(this,e)}addTab(e){return Yf(this,e)}add(e,t){const i=e.controller;return this.controller_.rack.add(i,t),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const t=this.controller_.element.ownerDocument,i=this.pool_.createBlade(t,e),s=this.pool_.createApi(i);return this.add(s,e.index)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.children.forEach(e=>{Qf(e)&&e.refresh()})}onRackValueChange_(e){const t=e.bladeController,i=this.pool_.createApi(t),s=Eu(t.value)?t.value.binding:null;this.emitter_.emit("change",new cs(i,s?s.target.read():t.value.rawValue,e.options.last))}},zo=class extends Dn{constructor(e,t){super(e),this.rackApi_=new Jf(e.rackController,t)}refresh(){this.rackApi_.refresh()}},Ho=class extends tr{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return He(e,t=>super.importState(t),t=>({children:t.required.array(t.required.raw)}),t=>this.rackController.rack.children.every((i,s)=>i.importState(t.children[s])))}exportState(){return Ke(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}};function to(n){return"rackController"in n}let ev=class{constructor(e){this.emitter=new le,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const t of this.allItems())if(e(t))return t;return null}includes(e){return this.cache_.has(e)}add(e,t){if(this.includes(e))throw ve.shouldNeverHappen();const i=t!==void 0?t:this.items_.length;this.items_.splice(i,0,e),this.cache_.add(e);const s=this.extract_(e);s&&(s.emitter.on("add",this.onSubListAdd_),s.emitter.on("remove",this.onSubListRemove_),s.allItems().forEach(r=>{this.cache_.add(r)})),this.emitter.emit("add",{index:i,item:e,root:this,target:this})}remove(e){const t=this.items_.indexOf(e);if(t<0)return;this.items_.splice(t,1),this.cache_.delete(e);const i=this.extract_(e);i&&(i.allItems().forEach(s=>{this.cache_.delete(s)}),i.emitter.off("add",this.onSubListAdd_),i.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}};function tv(n,e){for(let t=0;t<n.length;t++){const i=n[t];if(Cn(i)&&i.value===e)return i}return null}function nv(n){return to(n)?n.rackController.rack.bcSet_:null}let iv=class{constructor(e){var t,i;this.emitter=new le,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(t=e.blade)!==null&&t!==void 0?t:null,(i=this.blade_)===null||i===void 0||i.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new ev(nv),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,t){var i;(i=e.parent)===null||i===void 0||i.remove(e),e.parent=this,this.bcSet_.add(e,t)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:t,sender:this}),!t)return;const i=e.item;if(i.viewProps.emitter.on("change",this.onChildViewPropsChange_),i.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),i.viewProps.handleDispose(this.onChildDispose_),Cn(i))i.value.emitter.on("change",this.onChildValueChange_);else if(to(i)){const s=i.rackController.rack;if(s){const r=s.emitter;r.on("layout",this.onRackLayout_),r.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:t,sender:this}),!t)return;const i=e.item;if(Cn(i))i.value.emitter.off("change",this.onChildValueChange_);else if(to(i)){const s=i.rackController.rack;if(s){const r=s.emitter;r.off("layout",this.onRackLayout_),r.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(s=>!s.viewProps.get("hidden")),t=e[0],i=e[e.length-1];this.bcSet_.items.forEach(s=>{const r=[];s===t&&(r.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&r.push("veryfirst")),s===i&&(r.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&r.push("verylast")),s.blade.set("positions",r)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(t=>t.viewProps.get("disposed")).forEach(t=>{this.bcSet_.remove(t)})}onChildValueChange_(e){const t=tv(this.find(Cn),e.sender);if(!t)throw ve.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:t,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}},Ko=class{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const t=new iv({blade:e.root?void 0:e.blade,viewProps:e.viewProps});t.emitter.on("add",this.onRackAdd_),t.emitter.on("remove",this.onRackRemove_),this.rack=t,this.viewProps.handleDispose(()=>{for(let i=this.rack.children.length-1;i>=0;i--)this.rack.children[i].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&ku(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&jo(e.bladeController.view.element)}};function vi(){return new A({positions:Y([],{equals:Rm})})}let Go=class Ou extends A{constructor(e){super(e)}static create(e){const t={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},i=A.createCore(t);return new Ou(i)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!G(e)?`${e}px`:"auto"}bindExpandedClass(e,t){const i=()=>{this.styleExpanded?e.classList.add(t):e.classList.remove(t)};dt(this,"expanded",i),dt(this,"temporaryExpanded",i)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}};function sv(n,e){let t=0;return Pf(e,()=>{n.set("expandedHeight",null),n.set("temporaryExpanded",!0),Ds(e),t=e.clientHeight,n.set("temporaryExpanded",null),Ds(e)}),t}function Pl(n,e){e.style.height=n.styleHeight}function qo(n,e){n.value("expanded").emitter.on("beforechange",()=>{if(n.set("completed",!1),G(n.get("expandedHeight"))){const t=sv(n,e);t>0&&n.set("expandedHeight",t)}n.set("shouldFixHeight",!0),Ds(e)}),n.emitter.on("change",()=>{Pl(n,e)}),Pl(n,e),e.addEventListener("transitionend",t=>{t.propertyName==="height"&&n.cleanUpTransition()})}let Du=class extends zo{constructor(e,t){super(e,t),this.emitter_=new le,this.controller.foldable.value("expanded").emitter.on("change",i=>{this.emitter_.emit("fold",new vf(this,i.sender.rawValue))}),this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){return this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}};const Nu=R("cnt");let rv=class{constructor(e,t){var i;this.className_=R((i=t.viewName)!==null&&i!==void 0?i:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),Nu()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),dt(this.foldable_,"completed",mi(this.element,this.className_(void 0,"cpl")));const s=e.createElement("button");s.classList.add(this.className_("b")),dt(t.props,"title",c=>{G(c)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),t.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;const r=e.createElement("div");r.classList.add(this.className_("i")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(this.className_("t")),Uo(t.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const a=e.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);const l=e.createElement("div");l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}},no=class extends Ho{constructor(e,t){var i;const s=Go.create((i=t.expanded)!==null&&i!==void 0?i:!0),r=new rv(e,{foldable:s,props:t.props,viewName:t.root?"rot":void 0,viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new Ko({blade:t.blade,element:r.containerElement,root:t.root,viewProps:t.viewProps}),view:r})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=t.props,this.foldable=s,qo(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return He(e,t=>super.importState(t),t=>({expanded:t.required.boolean,title:t.optional.string}),t=>(this.foldable.set("expanded",t.expanded),this.props.set("title",t.title),!0))}exportState(){return Ke(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}};const ov=Te({id:"folder",type:"blade",accept(n){const e=ee(n,t=>({title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean}));return e?{params:e}:null},controller(n){return new no(n.document,{blade:n.blade,expanded:n.params.expanded,props:A.fromObject({title:n.params.title}),viewProps:n.viewProps})},api(n){return n.controller instanceof no?new Du(n.controller,n.pool):null}}),av=R("");function El(n,e){return mi(n,av(void 0,e))}let Nn=class Iu extends A{constructor(e){var t;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=$m(Y(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var t,i,s;const r=e??{};return new Iu(A.createCore({disabled:(t=r.disabled)!==null&&t!==void 0?t:!1,disposed:!1,hidden:(i=r.hidden)!==null&&i!==void 0?i:!1,parent:(s=r.parent)!==null&&s!==void 0?s:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){Vt(this.globalDisabled_,El(e,"disabled")),dt(this,"hidden",El(e,"hidden"))}bindDisabled(e){Vt(this.globalDisabled_,t=>{e.disabled=t})}bindTabIndex(e){Vt(this.globalDisabled_,t=>{e.tabIndex=t?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",t=>{t&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var t;const i=e.previousRawValue;i==null||i.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}};const kl=R("tbp");let lv=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(kl()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(kl("c")),this.element.appendChild(i),this.containerElement=i}};const Ei=R("tbi");let cv=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ei()),t.viewProps.bindClassModifiers(this.element),dt(t.props,"selected",r=>{r?this.element.classList.add(Ei(void 0,"sel")):this.element.classList.remove(Ei(void 0,"sel"))});const i=e.createElement("button");i.classList.add(Ei("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=e.createElement("div");s.classList.add(Ei("t")),Uo(t.props.value("title"),s),this.buttonElement.appendChild(s),this.titleElement=s}},uv=class{constructor(e,t){this.emitter=new le,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new cv(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}},io=class extends Ho{constructor(e,t){const i=new lv(e,{viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new Ko({blade:t.blade,element:i.containerElement,viewProps:t.viewProps}),view:i})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new uv(e,{props:t.itemProps,viewProps:Nn.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=t.props,dt(this.props,"selected",s=>{this.itemController.props.set("selected",s),this.viewProps.set("hidden",!s)})}get itemController(){return this.ic_}importState(e){return He(e,t=>super.importState(t),t=>({selected:t.required.boolean,title:t.required.string}),t=>(this.ic_.props.set("selected",t.selected),this.ic_.props.set("title",t.title),!0))}exportState(){return Ke(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}},hv=class extends zo{constructor(e,t){super(e,t),this.emitter_=new le,this.onSelect_=this.onSelect_.bind(this),this.pool_=t,this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const t=this.controller.view.element.ownerDocument,i=new io(t,{blade:vi(),itemProps:A.fromObject({selected:!1,title:e.title}),props:A.fromObject({selected:!1}),viewProps:Nn.create()}),s=this.pool_.createApi(i);return this.rackApi_.add(s,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}onSelect_(e){this.emitter_.emit("select",new _f(this,e.rawValue))}},dv=class extends zo{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addBlade(e){return this.rackApi_.addBlade(e)}};const Tl=-1;let pv=class{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Y(!0),this.selectedIndex=Y(Tl),this.items_=[]}add(e,t){const i=t??this.items_.length;this.items_.splice(i,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Tl,this.empty.rawValue=!0;return}const e=this.items_.findIndex(t=>t.rawValue);e<0?(this.items_.forEach((t,i)=>{t.rawValue=i===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((t,i)=>{t.rawValue=i===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const t=this.items_.findIndex(i=>i===e.sender);this.items_.forEach((i,s)=>{i.rawValue=s===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()}};const ki=R("tab");let mv=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(ki(),Nu()),t.viewProps.bindClassModifiers(this.element),Vt(t.empty,mi(this.element,ki(void 0,"nop")));const i=e.createElement("div");i.classList.add(ki("t")),this.element.appendChild(i),this.itemsElement=i;const s=e.createElement("div");s.classList.add(ki("i")),this.element.appendChild(s);const r=e.createElement("div");r.classList.add(ki("c")),this.element.appendChild(r),this.contentsElement=r}},Al=class extends Ho{constructor(e,t){const i=new pv,s=new mv(e,{empty:i.empty,viewProps:t.viewProps});super({blade:t.blade,rackController:new Ko({blade:t.blade,element:s.contentsElement,viewProps:t.viewProps}),view:s}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const r=this.rackController.rack;r.emitter.on("add",this.onRackAdd_),r.emitter.on("remove",this.onRackRemove_),this.tab=i}add(e,t){this.rackController.rack.add(e,t)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const t=e.bladeController;ku(this.view.itemsElement,t.itemController.view.element,e.index),t.itemController.viewProps.set("parent",this.viewProps),this.tab.add(t.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const t=e.bladeController;jo(t.itemController.view.element),t.itemController.viewProps.set("parent",null),this.tab.remove(t.props.value("selected"))}};const $u=Te({id:"tab",type:"blade",accept(n){const e=ee(n,t=>({pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(n){const e=new Al(n.document,{blade:n.blade,viewProps:n.viewProps});return n.params.pages.forEach(t=>{const i=new io(n.document,{blade:vi(),itemProps:A.fromObject({selected:!1,title:t.title}),props:A.fromObject({selected:!1}),viewProps:Nn.create()});e.add(i)}),e},api(n){return n.controller instanceof Al?new hv(n.controller,n.pool):n.controller instanceof io?new dv(n.controller,n.pool):null}});function fv(n,e){const t=n.accept(e.params);if(!t)return null;const i=ee(e.params,s=>({disabled:s.optional.boolean,hidden:s.optional.boolean}));return n.controller({blade:vi(),document:e.document,params:Object.assign(Object.assign({},t.params),{disabled:i==null?void 0:i.disabled,hidden:i==null?void 0:i.hidden}),viewProps:Nn.create({disabled:i==null?void 0:i.disabled,hidden:i==null?void 0:i.hidden})})}let Xo=class extends Gi{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}};class vv{constructor(){this.disabled=!1,this.emitter=new le}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class _v{constructor(e,t){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new le,this.interval_=t,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}let us=class{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((t,i)=>i.constrain(t),e)}};function Ns(n,e){if(n instanceof e)return n;if(n instanceof us){const t=n.constraints.reduce((i,s)=>i||(s instanceof e?s:null),null);if(t)return t}return null}let hs=class{constructor(e){this.values=A.fromObject({options:e})}constrain(e){const t=this.values.get("options");return t.length===0||t.filter(s=>s.value===e).length>0?e:t[0].value}};function ds(n){var e;const t=eo;if(Array.isArray(n))return(e=ee({items:n},i=>({items:i.required.array(i.required.object({text:i.required.string,value:i.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof n=="object")return t.required.raw(n).value}function Wo(n){if(Array.isArray(n))return n;const e=[];return Object.keys(n).forEach(t=>{e.push({text:t,value:n[t]})}),e}function Yo(n){return G(n)?null:new hs(Wo(n))}const wr=R("lst");let bv=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(wr()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("select");i.classList.add(wr("s")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.selectElement=i;const s=e.createElement("div");s.classList.add(wr("m")),s.appendChild(er(e,"dropdown")),this.element.appendChild(s),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,dt(this.props_,"options",r=>{Tu(this.selectElement),r.forEach(o=>{const a=e.createElement("option");a.textContent=o.text,this.selectElement.appendChild(a)}),this.update_()})}update_(){const e=this.props_.get("options").map(t=>t.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}},rn=class{constructor(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new bv(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const t=e.currentTarget;this.value.rawValue=this.props.get("options")[t.selectedIndex].value}importProps(e){return He(e,null,t=>({options:t.required.custom(ds)}),t=>(this.props.set("options",Wo(t.options)),!0))}exportProps(){return Ke(null,{options:this.props.get("options")})}};const Sl=R("pop");let gv=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Sl()),t.viewProps.bindClassModifiers(this.element),Vt(t.shows,mi(this.element,Sl(void 0,"v")))}},Fu=class{constructor(e,t){this.shows=Y(!1),this.viewProps=t.viewProps,this.view=new gv(e,{shows:this.shows,viewProps:this.viewProps})}};const Ml=R("txt");let wv=class{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Ml()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);const i=e.createElement("input");i.classList.add(Ml("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}},qi=class{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new wv(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const i=e.currentTarget.value,s=this.parser_(i);G(s)||(this.value.rawValue=s),this.view.refresh()}};function xv(n){return String(n)}function Bu(n){return n==="false"?!1:!!n}function Vl(n){return xv(n)}function yv(n){return e=>n.reduce((t,i)=>t!==null?t:i(e),null)}const Cv=De(0);function Is(n){return Cv(n)+"%"}function ju(n){return String(n)}function so(n){return n}function _i({primary:n,secondary:e,forward:t,backward:i}){let s=!1;function r(o){s||(s=!0,o(),s=!1)}n.emitter.on("change",o=>{r(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),e.emitter.on("change",o=>{r(()=>{n.setRawValue(i(n.rawValue,e.rawValue),o.options)}),r(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),r(()=>{e.setRawValue(t(n.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Se(n,e){const t=n*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+t:e.downKey?-t:0}function Xi(n){return{altKey:n.altKey,downKey:n.key==="ArrowDown",shiftKey:n.shiftKey,upKey:n.key==="ArrowUp"}}function Dt(n){return{altKey:n.altKey,downKey:n.key==="ArrowLeft",shiftKey:n.shiftKey,upKey:n.key==="ArrowRight"}}function Pv(n){return n==="ArrowUp"||n==="ArrowDown"}function Uu(n){return Pv(n)||n==="ArrowLeft"||n==="ArrowRight"}function xr(n,e){var t,i;const s=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:n.pageX-(((t=s&&s.scrollX)!==null&&t!==void 0?t:0)+r.left),y:n.pageY-(((i=s&&s.scrollY)!==null&&i!==void 0?i:0)+r.top)}}let In=class{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new le,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var t;e.preventDefault(),(t=e.currentTarget)===null||t===void 0||t.focus();const i=this.elem_.ownerDocument;i.addEventListener("mousemove",this.onDocumentMouseMove_),i.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(xr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(xr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(xr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchMove_(e){const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchEnd_(e){var t;const i=(t=e.targetTouches.item(0))!==null&&t!==void 0?t:this.lastTouch_,s=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(i?{x:i.clientX-s.left,y:i.clientY-s.top}:void 0),sender:this,shiftKey:e.shiftKey})}};const qe=R("txt");let Ev=class{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(qe(),qe(void 0,"num")),t.arrayPosition&&this.element.classList.add(qe(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(qe("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(qe()),this.inputElement.classList.add(qe("i"));const s=e.createElement("div");s.classList.add(qe("k")),this.element.appendChild(s),this.knobElement=s;const r=e.createElementNS(ct,"svg");r.classList.add(qe("g")),this.knobElement.appendChild(r);const o=e.createElementNS(ct,"path");o.classList.add(qe("gb")),r.appendChild(o),this.guideBodyElem_=o;const a=e.createElementNS(ct,"path");a.classList.add(qe("gh")),r.appendChild(a),this.guideHeadElem_=a;const l=e.createElement("div");l.classList.add(R("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(qe(void 0,"drg"));return}this.element.classList.add(qe(void 0,"drg"));const t=e.rawValue/this.props_.get("pointerScale"),i=t+(t>0?-1:t<0?1:0),s=ue(-i,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${i+s},0 L${i},4 L${i+s},8`,`M ${t},-1 L${t},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${t},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${t}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}},ps=class{constructor(e,t){var i;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=t.parser,this.props=t.props,this.sliderProps_=(i=t.sliderProps)!==null&&i!==void 0?i:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=Y(null),this.view=new Ev(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const s=new In(this.view.knobElement);s.emitter.on("down",this.onPointerDown_),s.emitter.on("move",this.onPointerMove_),s.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var t,i;const s=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("min"),r=(i=this.sliderProps_)===null||i===void 0?void 0:i.get("max");let o=e;return s!==void 0&&(o=Math.max(o,s)),r!==void 0&&(o=Math.min(o,r)),o}onInputChange_(e){const i=e.currentTarget.value,s=this.parser_(i);G(s)||(this.value.rawValue=this.constrainValue_(s)),this.view.refresh()}onInputKeyDown_(e){const t=Se(this.props.get("keyScale"),Xi(e));t!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Se(this.props.get("keyScale"),Xi(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("pointerScale"))}onPointerMove_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}};const yr=R("sld");let kv=class{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(yr()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(yr("t")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.trackElement=i;const s=e.createElement("div");s.classList.add(yr("k")),this.trackElement.appendChild(s),this.knobElement=s,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}update_(){const e=ue(N(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}},Tv=class{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new kv(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new In(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){e.point&&this.value.setRawValue(N(ue(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),t)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Se(this.props.get("keyScale"),Dt(e));t!==0&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})}onKeyUp_(e){Se(this.props.get("keyScale"),Dt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const Cr=R("sldtxt");let Av=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Cr());const i=e.createElement("div");i.classList.add(Cr("s")),this.sliderView_=t.sliderView,i.appendChild(this.sliderView_.element),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(Cr("t")),this.textView_=t.textView,s.appendChild(this.textView_.element),this.element.appendChild(s)}},$s=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new Tv(e,{props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new ps(e,{parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new Av(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return He(e,null,t=>({max:t.required.number,min:t.required.number}),t=>{const i=this.sliderC_.props;return i.set("max",t.max),i.set("min",t.min),!0})}exportProps(){const e=this.sliderC_.props;return Ke(null,{max:e.get("max"),min:e.get("min")})}};function zu(n){return{sliderProps:new A({keyScale:n.keyScale,max:n.max,min:n.min}),textProps:new A({formatter:Y(n.formatter),keyScale:n.keyScale,pointerScale:Y(n.pointerScale)})}}const Sv={containerUnitSize:"cnt-usz"};function Hu(n){return`--${Sv[n]}`}function Wi(n){return Pu(n)}function Wt(n){if(Jr(n))return ee(n,Wi)}function At(n,e){if(!n)return;const t=[],i=xu(n,e);i&&t.push(i);const s=yu(n);return s&&t.push(s),new us(t)}function Mv(n){return n?n.major===fi.major:!1}function Ku(n){if(n==="inline"||n==="popup")return n}function ms(n,e){n.write(e)}const ys=R("ckb");let Vv=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(ys()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("label");i.classList.add(ys("l")),this.element.appendChild(i),this.labelElement=i;const s=e.createElement("input");s.classList.add(ys("i")),s.type="checkbox",this.labelElement.appendChild(s),this.inputElement=s,t.viewProps.bindDisabled(this.inputElement);const r=e.createElement("div");r.classList.add(ys("w")),this.labelElement.appendChild(r);const o=er(e,"check");r.appendChild(o),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}},Lv=class{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Vv(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(e){const t=e.currentTarget;this.value.rawValue=t.checked,e.preventDefault(),e.stopPropagation()}onLabelMouseDown_(e){e.preventDefault()}};function Rv(n){const e=[],t=Yo(n.options);return t&&e.push(t),new us(e)}const Ov=Te({id:"input-bool",type:"input",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=ee(e,i=>({options:i.optional.custom(ds),readonly:i.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Bu,constraint:n=>Rv(n.params),writer:n=>ms},controller:n=>{const e=n.document,t=n.value,i=n.constraint,s=i&&Ns(i,hs);return s?new rn(e,{props:new A({options:s.values.value("options")}),value:t,viewProps:n.viewProps}):new Lv(e,{value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="boolean"?null:n.controller.valueController instanceof rn?new Xo(n.controller):null}}),pn=R("col");let Dv=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(pn()),t.foldable.bindExpandedClass(this.element,pn(void 0,"expanded")),dt(t.foldable,"completed",mi(this.element,pn(void 0,"cpl")));const i=e.createElement("div");i.classList.add(pn("h")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(pn("s")),i.appendChild(s),this.swatchElement=s;const r=e.createElement("div");if(r.classList.add(pn("t")),i.appendChild(r),this.textElement=r,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(pn("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}};function Nv(n,e,t){const i=ue(n/255,0,1),s=ue(e/255,0,1),r=ue(t/255,0,1),o=Math.max(i,s,r),a=Math.min(i,s,r),l=o-a;let c=0,u=0;const h=(a+o)/2;return l!==0&&(u=l/(1-Math.abs(o+a-1)),i===o?c=(s-r)/l:s===o?c=2+(r-i)/l:c=4+(i-s)/l,c=c/6+(c<0?1:0)),[c*360,u*100,h*100]}function Iv(n,e,t){const i=(n%360+360)%360,s=ue(e/100,0,1),r=ue(t/100,0,1),o=(1-Math.abs(2*r-1))*s,a=o*(1-Math.abs(i/60%2-1)),l=r-o/2;let c,u,h;return i>=0&&i<60?[c,u,h]=[o,a,0]:i>=60&&i<120?[c,u,h]=[a,o,0]:i>=120&&i<180?[c,u,h]=[0,o,a]:i>=180&&i<240?[c,u,h]=[0,a,o]:i>=240&&i<300?[c,u,h]=[a,0,o]:[c,u,h]=[o,0,a],[(c+l)*255,(u+l)*255,(h+l)*255]}function $v(n,e,t){const i=ue(n/255,0,1),s=ue(e/255,0,1),r=ue(t/255,0,1),o=Math.max(i,s,r),a=Math.min(i,s,r),l=o-a;let c;l===0?c=0:o===i?c=60*(((s-r)/l%6+6)%6):o===s?c=60*((r-i)/l+2):c=60*((i-s)/l+4);const u=o===0?0:l/o,h=o;return[c,u*100,h*100]}function Gu(n,e,t){const i=bu(n,360),s=ue(e/100,0,1),r=ue(t/100,0,1),o=r*s,a=o*(1-Math.abs(i/60%2-1)),l=r-o;let c,u,h;return i>=0&&i<60?[c,u,h]=[o,a,0]:i>=60&&i<120?[c,u,h]=[a,o,0]:i>=120&&i<180?[c,u,h]=[0,o,a]:i>=180&&i<240?[c,u,h]=[0,a,o]:i>=240&&i<300?[c,u,h]=[a,0,o]:[c,u,h]=[o,0,a],[(c+l)*255,(u+l)*255,(h+l)*255]}function Fv(n,e,t){const i=t+e*(100-Math.abs(2*t-100))/200;return[n,i!==0?e*(100-Math.abs(2*t-100))/i:0,t+e*(100-Math.abs(2*t-100))/(2*100)]}function Bv(n,e,t){const i=100-Math.abs(t*(200-e)/100-100);return[n,i!==0?e*t/i:0,t*(200-e)/(2*100)]}function pt(n){return[n[0],n[1],n[2]]}function nr(n,e){return[n[0],n[1],n[2],e]}const jv={hsl:{hsl:(n,e,t)=>[n,e,t],hsv:Fv,rgb:Iv},hsv:{hsl:Bv,hsv:(n,e,t)=>[n,e,t],rgb:Gu},rgb:{hsl:Nv,hsv:$v,rgb:(n,e,t)=>[n,e,t]}};function ri(n,e){return[e==="float"?1:n==="rgb"?255:360,e==="float"?1:n==="rgb"?255:100,e==="float"?1:n==="rgb"?255:100]}function Uv(n,e){return n===e?e:bu(n,e)}function qu(n,e,t){var i;const s=ri(e,t);return[e==="rgb"?ue(n[0],0,s[0]):Uv(n[0],s[0]),ue(n[1],0,s[1]),ue(n[2],0,s[2]),ue((i=n[3])!==null&&i!==void 0?i:1,0,1)]}function Ll(n,e,t,i){const s=ri(e,t),r=ri(e,i);return n.map((o,a)=>o/s[a]*r[a])}function Xu(n,e,t){const i=Ll(n,e.mode,e.type,"int"),s=jv[e.mode][t.mode](...i);return Ll(s,t.mode,"int",t.type)}let $=class Wu{static black(){return new Wu([0,0,0],"rgb")}constructor(e,t){this.type="int",this.mode=t,this.comps_=qu(e,t,this.type)}getComponents(e){return nr(Xu(pt(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const Ft=R("colp");let zv=class{constructor(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(Ft()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Ft("hsv"));const s=e.createElement("div");s.classList.add(Ft("sv")),this.svPaletteView_=t.svPaletteView,s.appendChild(this.svPaletteView_.element),i.appendChild(s);const r=e.createElement("div");r.classList.add(Ft("h")),this.hPaletteView_=t.hPaletteView,r.appendChild(this.hPaletteView_.element),i.appendChild(r),this.element.appendChild(i);const o=e.createElement("div");if(o.classList.add(Ft("rgb")),this.textsView_=t.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};const a=e.createElement("div");a.classList.add(Ft("a"));const l=e.createElement("div");l.classList.add(Ft("ap")),l.appendChild(this.alphaViews_.palette.element),a.appendChild(l);const c=e.createElement("div");c.classList.add(Ft("at")),c.appendChild(this.alphaViews_.text.element),a.appendChild(c),this.element.appendChild(a)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(t=>t.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}};function Hv(n){return n==="int"?"int":n==="float"?"float":void 0}function Qo(n){return ee(n,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(Hv)}),expanded:e.optional.boolean,picker:e.optional.custom(Ku),readonly:e.optional.constant(!1)}))}function Mn(n){return n?.1:1}function Yu(n){var e;return(e=n.color)===null||e===void 0?void 0:e.type}let Zo=class{constructor(e,t){this.type="float",this.mode=t,this.comps_=qu(e,t,this.type)}getComponents(e){return nr(Xu(pt(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const Kv={int:(n,e)=>new $(n,e),float:(n,e)=>new Zo(n,e)};function Jo(n,e,t){return Kv[t](n,e)}function Gv(n){return n.type==="float"}function qv(n){return n.type==="int"}function Xv(n){const e=n.getComponents(),t=ri(n.mode,"int");return new $([Math.round(N(e[0],0,1,0,t[0])),Math.round(N(e[1],0,1,0,t[1])),Math.round(N(e[2],0,1,0,t[2])),e[3]],n.mode)}function Wv(n){const e=n.getComponents(),t=ri(n.mode,"int");return new Zo([N(e[0],0,t[0],0,1),N(e[1],0,t[1],0,1),N(e[2],0,t[2],0,1),e[3]],n.mode)}function Pe(n,e){if(n.type===e)return n;if(qv(n)&&e==="float")return Wv(n);if(Gv(n)&&e==="int")return Xv(n);throw ve.shouldNeverHappen()}function Yv(n,e){return n.alpha===e.alpha&&n.mode===e.mode&&n.notation===e.notation&&n.type===e.type}function Qe(n,e){const t=n.match(/^(.+)%$/);return Math.min(t?parseFloat(t[1])*.01*e:parseFloat(n),e)}const Qv={deg:n=>n,grad:n=>n*360/400,rad:n=>n*360/(2*Math.PI),turn:n=>n*360};function Qu(n){const e=n.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(n);const t=parseFloat(e[1]),i=e[2];return Qv[i](t)}function Zu(n){const e=n.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Qe(e[1],255),Qe(e[2],255),Qe(e[3],255)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function Zv(n){const e=Zu(n);return e?new $(e,"rgb"):null}function Ju(n){const e=n.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Qe(e[1],255),Qe(e[2],255),Qe(e[3],255),Qe(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function Jv(n){const e=Ju(n);return e?new $(e,"rgb"):null}function eh(n){const e=n.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Qu(e[1]),Qe(e[2],100),Qe(e[3],100)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function e_(n){const e=eh(n);return e?new $(e,"hsl"):null}function th(n){const e=n.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Qu(e[1]),Qe(e[2],100),Qe(e[3],100),Qe(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function t_(n){const e=th(n);return e?new $(e,"hsl"):null}function nh(n){const e=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const t=n.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}function n_(n){const e=nh(n);return e?new $(e,"rgb"):null}function ih(n){const e=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),N(parseInt(e[4]+e[4],16),0,255,0,1)];const t=n.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),N(parseInt(t[4],16),0,255,0,1)]:null}function i_(n){const e=ih(n);return e?new $(e,"rgb"):null}function sh(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function s_(n){return e=>{const t=sh(e);return t?Jo(t,"rgb",n):null}}function rh(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function r_(n){return e=>{const t=rh(e);return t?Jo(t,"rgb",n):null}}const o_=[{parser:nh,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:ih,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Zu,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Ju,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:eh,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:th,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:sh,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:rh,result:{alpha:!0,mode:"rgb",notation:"object"}}];function a_(n){return o_.reduce((e,{parser:t,result:i})=>e||(t(n)?i:null),null)}function l_(n,e="int"){const t=a_(n);return t?t.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},t),{type:"int"}):t.notation==="func"?Object.assign(Object.assign({},t),{type:e}):null:null}function fs(n){const e=[n_,i_,Zv,Jv,e_,t_];e.push(s_("int"),r_("int"));const t=yv(e);return i=>{const s=t(i);return s?Pe(s,n):null}}function c_(n){const e=fs("int");if(typeof n!="string")return $.black();const t=e(n);return t??$.black()}function oh(n){const e=ue(Math.floor(n),0,255).toString(16);return e.length===1?`0${e}`:e}function ea(n,e="#"){const t=pt(n.getComponents("rgb")).map(oh).join("");return`${e}${t}`}function ta(n,e="#"){const t=n.getComponents("rgb"),i=[t[0],t[1],t[2],t[3]*255].map(oh).join("");return`${e}${i}`}function ah(n){const e=De(0),t=Pe(n,"int");return`rgb(${pt(t.getComponents("rgb")).map(s=>e(s)).join(", ")})`}function Es(n){const e=De(2),t=De(0);return`rgba(${Pe(n,"int").getComponents("rgb").map((r,o)=>(o===3?e:t)(r)).join(", ")})`}function u_(n){const e=[De(0),Is,Is],t=Pe(n,"int");return`hsl(${pt(t.getComponents("hsl")).map((s,r)=>e[r](s)).join(", ")})`}function h_(n){const e=[De(0),Is,Is,De(2)];return`hsla(${Pe(n,"int").getComponents("hsl").map((s,r)=>e[r](s)).join(", ")})`}function lh(n,e){const t=De(e==="float"?2:0),i=["r","g","b"],s=Pe(n,e);return`{${pt(s.getComponents("rgb")).map((o,a)=>`${i[a]}: ${t(o)}`).join(", ")}}`}function d_(n){return e=>lh(e,n)}function ch(n,e){const t=De(2),i=De(e==="float"?2:0),s=["r","g","b","a"];return`{${Pe(n,e).getComponents("rgb").map((a,l)=>{const c=l===3?t:i;return`${s[l]}: ${c(a)}`}).join(", ")}}`}function p_(n){return e=>ch(e,n)}const m_=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:ea},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:ta},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:ah},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Es},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:u_},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:h_},...["int","float"].reduce((n,e)=>[...n,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:d_(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:p_(e)}],[])];function uh(n){return m_.reduce((e,t)=>e||(Yv(t.format,n)?t.stringifier:null),null)}const Ti=R("apl");let f_=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Ti()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(Ti("b")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(Ti("c")),i.appendChild(s),this.colorElem_=s;const r=e.createElement("div");r.classList.add(Ti("m")),this.element.appendChild(r),this.markerElem_=r;const o=e.createElement("div");o.classList.add(Ti("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const e=this.value.rawValue,t=e.getComponents("rgb"),i=new $([t[0],t[1],t[2],0],"rgb"),s=new $([t[0],t[1],t[2],255],"rgb"),r=["to right",Es(i),Es(s)];this.colorElem_.style.background=`linear-gradient(${r.join(",")})`,this.previewElem_.style.backgroundColor=Es(e);const o=N(t[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}},v_=class{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new f_(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new In(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=e.point.x/e.bounds.width,s=this.value.rawValue,[r,o,a]=s.getComponents("hsv");this.value.setRawValue(new $([r,o,a,i],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Se(Mn(!0),Dt(e));if(t===0)return;const i=this.value.rawValue,[s,r,o,a]=i.getComponents("hsv");this.value.setRawValue(new $([s,r,o,a+t],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Se(Mn(!0),Dt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const Un=R("coltxt");function __(n){const e=n.createElement("select"),t=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(t.reduce((i,s)=>{const r=n.createElement("option");return r.textContent=s.text,r.value=s.value,i.appendChild(r),i},n.createDocumentFragment())),e}let b_=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Un()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Un("m")),this.modeElem_=__(e),this.modeElem_.classList.add(Un("ms")),i.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);const s=e.createElement("div");s.classList.add(Un("mm")),s.appendChild(er(e,"dropdown")),i.appendChild(s),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(Un("w")),this.element.appendChild(r),this.inputsElem_=r,this.inputViews_=t.inputViews,this.applyInputViews_(),Vt(t.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){Tu(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(t=>{const i=e.createElement("div");i.classList.add(Un("c")),i.appendChild(t.element),this.inputsElem_.appendChild(i)})}};function g_(n){return De(n==="float"?2:0)}function w_(n,e,t){const i=ri(n,e)[t];return new ls({min:0,max:i})}function x_(n,e,t){return new ps(n,{arrayPosition:t===0?"fst":t===2?"lst":"mid",parser:e.parser,props:A.fromObject({formatter:g_(e.colorType),keyScale:Mn(!1),pointerScale:e.colorType==="float"?.01:1}),value:Y(0,{constraint:w_(e.colorMode,e.colorType,t)}),viewProps:e.viewProps})}function y_(n,e){const t={colorMode:e.colorMode,colorType:e.colorType,parser:Ot,viewProps:e.viewProps};return[0,1,2].map(i=>{const s=x_(n,t,i);return _i({primary:e.value,secondary:s.value,forward(r){return Pe(r,e.colorType).getComponents(e.colorMode)[i]},backward(r,o){const a=e.colorMode,c=Pe(r,e.colorType).getComponents(a);c[i]=o;const u=Jo(nr(pt(c),c[3]),a,e.colorType);return Pe(u,"int")}}),s})}function C_(n,e){const t=new qi(n,{parser:fs("int"),props:A.fromObject({formatter:ea}),value:Y($.black()),viewProps:e.viewProps});return _i({primary:e.value,secondary:t.value,forward:i=>new $(pt(i.getComponents()),i.mode),backward:(i,s)=>new $(nr(pt(s.getComponents(i.mode)),i.getComponents()[3]),i.mode)}),[t]}function P_(n){return n!=="hex"}let E_=class{constructor(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=Y(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new b_(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const t=this.colorMode.rawValue;return P_(t)?y_(e,{colorMode:t,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):C_(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(i=>i.view)}};const Pr=R("hpl");let k_=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Pr()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(Pr("c")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(Pr("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const e=this.value.rawValue,[t]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=ah(new $([t,100,100],"hsv"));const i=N(t,0,360,0,100);this.markerElem_.style.left=`${i}%`}onValueChange_(){this.update_()}},T_=class{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new k_(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new In(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=N(ue(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),s=this.value.rawValue,[,r,o,a]=s.getComponents("hsv");this.value.setRawValue(new $([i,r,o,a],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Se(Mn(!1),Dt(e));if(t===0)return;const i=this.value.rawValue,[s,r,o,a]=i.getComponents("hsv");this.value.setRawValue(new $([s+t,r,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Se(Mn(!1),Dt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const Er=R("svp"),Rl=64;let A_=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Er()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("canvas");i.height=Rl,i.width=Rl,i.classList.add(Er("c")),this.element.appendChild(i),this.canvasElement=i;const s=e.createElement("div");s.classList.add(Er("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const e=Tf(this.canvasElement);if(!e)return;const i=this.value.rawValue.getComponents("hsv"),s=this.canvasElement.width,r=this.canvasElement.height,o=e.getImageData(0,0,s,r),a=o.data;for(let u=0;u<r;u++)for(let h=0;h<s;h++){const d=N(h,0,s,0,100),p=N(u,0,r,100,0),f=Gu(i[0],d,p),m=(u*s+h)*4;a[m]=f[0],a[m+1]=f[1],a[m+2]=f[2],a[m+3]=255}e.putImageData(o,0,0);const l=N(i[1],0,100,0,100);this.markerElem_.style.left=`${l}%`;const c=N(i[2],0,100,100,0);this.markerElem_.style.top=`${c}%`}onValueChange_(){this.update_()}},S_=class{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new A_(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new In(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=N(e.point.x,0,e.bounds.width,0,100),s=N(e.point.y,0,e.bounds.height,100,0),[r,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new $([r,i,s,o],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){Uu(e.key)&&e.preventDefault();const[t,i,s,r]=this.value.rawValue.getComponents("hsv"),o=Mn(!1),a=Se(o,Dt(e)),l=Se(o,Xi(e));a===0&&l===0||this.value.setRawValue(new $([t,i+a,s+l,r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const t=Mn(!1),i=Se(t,Dt(e)),s=Se(t,Xi(e));i===0&&s===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},M_=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new T_(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new S_(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new v_(e,{value:this.value,viewProps:this.viewProps}),text:new ps(e,{parser:Ot,props:A.fromObject({pointerScale:.01,keyScale:.1,formatter:De(2)}),value:Y(0,{constraint:new ls({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&_i({primary:this.value,secondary:this.alphaIcs_.text.value,forward:i=>i.getComponents()[3],backward:(i,s)=>{const r=i.getComponents();return r[3]=s,new $(r,i.mode)}}),this.textsC_=new E_(e,{colorType:t.colorType,value:this.value,viewProps:this.viewProps}),this.view=new zv(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}};const kr=R("colsw");let V_=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(kr()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(kr("sw")),this.element.appendChild(i),this.swatchElem_=i;const s=e.createElement("button");s.classList.add(kr("b")),t.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=ta(e)}onValueChange_(){this.update_()}},L_=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new V_(e,{value:this.value,viewProps:this.viewProps})}},na=class{constructor(e,t){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Go.create(t.expanded),this.swatchC_=new L_(e,{value:this.value,viewProps:this.viewProps});const i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new qi(e,{parser:t.parser,props:A.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Dv(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=t.pickerLayout==="popup"?new Fu(e,{viewProps:this.viewProps}):null;const s=new M_(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(r=>{r.addEventListener("blur",this.onPopupChildBlur_),r.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(s.view.element),_i({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:r=>r,backward:(r,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),qo(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=Au(e);i&&t.contains(i)||i&&i===this.swatchC_.view.buttonElement&&!Bo(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}};function R_(n){return pt(n.getComponents("rgb")).reduce((e,t)=>e<<8|Math.floor(t)&255,0)}function O_(n){return n.getComponents("rgb").reduce((e,t,i)=>{const s=Math.floor(i===3?t*255:t)&255;return e<<8|s},0)>>>0}function D_(n){return new $([n>>16&255,n>>8&255,n&255],"rgb")}function N_(n){return new $([n>>24&255,n>>16&255,n>>8&255,N(n&255,0,255,0,1)],"rgb")}function I_(n){return typeof n!="number"?$.black():D_(n)}function $_(n){return typeof n!="number"?$.black():N_(n)}function ks(n,e){return typeof n!="object"||G(n)?!1:e in n&&typeof n[e]=="number"}function hh(n){return ks(n,"r")&&ks(n,"g")&&ks(n,"b")}function dh(n){return hh(n)&&ks(n,"a")}function ph(n){return hh(n)}function ia(n,e){if(n.mode!==e.mode||n.type!==e.type)return!1;const t=n.getComponents(),i=e.getComponents();for(let s=0;s<t.length;s++)if(t[s]!==i[s])return!1;return!0}function Ol(n){return"a"in n?[n.r,n.g,n.b,n.a]:[n.r,n.g,n.b]}function F_(n){const e=uh(n);return e?(t,i)=>{ms(t,e(i))}:null}function B_(n){const e=n?O_:R_;return(t,i)=>{ms(t,e(i))}}function j_(n,e,t){const s=Pe(e,t).toRgbaObject();n.writeProperty("r",s.r),n.writeProperty("g",s.g),n.writeProperty("b",s.b),n.writeProperty("a",s.a)}function U_(n,e,t){const s=Pe(e,t).toRgbaObject();n.writeProperty("r",s.r),n.writeProperty("g",s.g),n.writeProperty("b",s.b)}function z_(n,e){return(t,i)=>{n?j_(t,i,e):U_(t,i,e)}}function H_(n){var e;return!!(!((e=n==null?void 0:n.color)===null||e===void 0)&&e.alpha)}function K_(n){return n?e=>ta(e,"0x"):e=>ea(e,"0x")}function G_(n){return"color"in n||n.view==="color"}const q_=Te({id:"input-color-number",type:"input",accept:(n,e)=>{if(typeof n!="number"||!G_(e))return null;const t=Qo(e);return t?{initialValue:n,params:Object.assign(Object.assign({},t),{supportsAlpha:H_(e)})}:null},binding:{reader:n=>n.params.supportsAlpha?$_:I_,equals:ia,writer:n=>B_(n.params.supportsAlpha)},controller:n=>{var e,t;return new na(n.document,{colorType:"int",expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:K_(n.params.supportsAlpha),parser:fs("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.supportsAlpha,value:n.value,viewProps:n.viewProps})}});function X_(n,e){if(!ph(n))return Pe($.black(),e);if(e==="int"){const t=Ol(n);return new $(t,"rgb")}if(e==="float"){const t=Ol(n);return new Zo(t,"rgb")}return Pe($.black(),"int")}function W_(n){return dh(n)}function Y_(n){return e=>{const t=X_(e,n);return Pe(t,"int")}}function Q_(n,e){return t=>n?ch(t,e):lh(t,e)}const Z_=Te({id:"input-color-object",type:"input",accept:(n,e)=>{var t;if(!ph(n))return null;const i=Qo(e);return i?{initialValue:n,params:Object.assign(Object.assign({},i),{colorType:(t=Yu(e))!==null&&t!==void 0?t:"int"})}:null},binding:{reader:n=>Y_(n.params.colorType),equals:ia,writer:n=>z_(W_(n.initialValue),n.params.colorType)},controller:n=>{var e,t;const i=dh(n.initialValue);return new na(n.document,{colorType:n.params.colorType,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:Q_(i,n.params.colorType),parser:fs("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:i,value:n.value,viewProps:n.viewProps})}}),J_=Te({id:"input-color-string",type:"input",accept:(n,e)=>{if(typeof n!="string"||e.view==="text")return null;const t=l_(n,Yu(e));if(!t)return null;const i=uh(t);if(!i)return null;const s=Qo(e);return s?{initialValue:n,params:Object.assign(Object.assign({},s),{format:t,stringifier:i})}:null},binding:{reader:()=>c_,equals:ia,writer:n=>{const e=F_(n.params.format);if(!e)throw ve.notBindable();return e}},controller:n=>{var e,t;return new na(n.document,{colorType:n.params.format.type,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:n.params.stringifier,parser:fs("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.format.alpha,value:n.value,viewProps:n.viewProps})}});let sa=class{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const t=this.asm_.toComponents(e).map((i,s)=>{var r,o;return(o=(r=this.components[s])===null||r===void 0?void 0:r.constrain(i))!==null&&o!==void 0?o:i});return this.asm_.fromComponents(t)}};const Dl=R("pndtxt");let eb=class{constructor(e,t){this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(Dl()),this.textViews.forEach(i=>{const s=e.createElement("div");s.classList.add(Dl("a")),s.appendChild(i.element),this.element.appendChild(s)})}};function tb(n,e,t){return new ps(n,{arrayPosition:t===0?"fst":t===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[t].textProps,value:Y(0,{constraint:e.axes[t].constraint}),viewProps:e.viewProps})}let ra=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map((i,s)=>tb(e,t,s)),this.acs_.forEach((i,s)=>{_i({primary:this.value,secondary:i.value,forward:r=>t.assembly.toComponents(r)[s],backward:(r,o)=>{const a=t.assembly.toComponents(r);return a[s]=o,t.assembly.fromComponents(a)}})}),this.view=new eb(e,{textViews:this.acs_.map(i=>i.view)})}get textControllers(){return this.acs_}},nb=class extends Gi{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}};function ib(n,e){const t=[],i=xu(n,e);i&&t.push(i);const s=yu(n);s&&t.push(s);const r=Yo(n.options);return r&&t.push(r),new us(t)}const sb=Te({id:"input-number",type:"input",accept:(n,e)=>{if(typeof n!="number")return null;const t=ee(e,i=>Object.assign(Object.assign({},Pu(i)),{options:i.optional.custom(ds),readonly:i.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>_u,constraint:n=>ib(n.params,n.initialValue),writer:n=>ms},controller:n=>{const e=n.value,t=n.constraint,i=t&&Ns(t,hs);if(i)return new rn(n.document,{props:new A({options:i.values.value("options")}),value:e,viewProps:n.viewProps});const s=Cu(n.params,e.rawValue),r=t&&Ns(t,ls);return r?new $s(n.document,Object.assign(Object.assign({},zu(Object.assign(Object.assign({},s),{keyScale:Y(s.keyScale),max:r.values.value("max"),min:r.values.value("min")}))),{parser:Ot,value:e,viewProps:n.viewProps})):new ps(n.document,{parser:Ot,props:A.fromObject(s),value:e,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="number"?null:n.controller.valueController instanceof $s?new nb(n.controller):n.controller.valueController instanceof rn?new Xo(n.controller):null}});let en=class{constructor(e=0,t=0){this.x=e,this.y=t}getComponents(){return[this.x,this.y]}static isObject(e){if(G(e))return!1;const t=e.x,i=e.y;return!(typeof t!="number"||typeof i!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y}toObject(){return{x:this.x,y:this.y}}};const mh={toComponents:n=>n.getComponents(),fromComponents:n=>new en(...n)},zn=R("p2d");let rb=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(zn()),t.viewProps.bindClassModifiers(this.element),Vt(t.expanded,mi(this.element,zn(void 0,"expanded")));const i=e.createElement("div");i.classList.add(zn("h")),this.element.appendChild(i);const s=e.createElement("button");s.classList.add(zn("b")),s.appendChild(er(e,"p2dpad")),t.viewProps.bindDisabled(s),i.appendChild(s),this.buttonElement=s;const r=e.createElement("div");if(r.classList.add(zn("t")),i.appendChild(r),this.textElement=r,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(zn("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}};const Bt=R("p2dp");let ob=class{constructor(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(Bt()),t.layout==="popup"&&this.element.classList.add(Bt(void 0,"p")),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Bt("p")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.padElement=i;const s=e.createElementNS(ct,"svg");s.classList.add(Bt("g")),this.padElement.appendChild(s),this.svgElem_=s;const r=e.createElementNS(ct,"line");r.classList.add(Bt("ax")),r.setAttributeNS(null,"x1","0"),r.setAttributeNS(null,"y1","50%"),r.setAttributeNS(null,"x2","100%"),r.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(r);const o=e.createElementNS(ct,"line");o.classList.add(Bt("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const a=e.createElementNS(ct,"line");a.classList.add(Bt("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const l=e.createElement("div");l.classList.add(Bt("m")),this.padElement.appendChild(l),this.markerElem_=l,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,t]=this.value.rawValue.getComponents(),i=this.props_.get("max"),s=N(e,-i,+i,0,100),r=N(t,-i,+i,0,100),o=this.props_.get("invertsY")?100-r:r;this.lineElem_.setAttributeNS(null,"x2",`${s}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${s}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}};function Nl(n,e,t){return[Se(e[0],Dt(n)),Se(e[1],Xi(n))*(t?1:-1)]}let ab=class{constructor(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new ob(e,{layout:t.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new In(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=this.props.get("max"),s=N(e.point.x,0,e.bounds.width,-i,+i),r=N(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-i,+i);this.value.setRawValue(new en(s,r),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){Uu(e.key)&&e.preventDefault();const[t,i]=Nl(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(new en(this.value.rawValue.x+t,this.value.rawValue.y+i),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[t,i]=Nl(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},lb=class{constructor(e,t){var i,s;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Go.create(t.expanded),this.popC_=t.pickerLayout==="popup"?new Fu(e,{viewProps:this.viewProps}):null;const r=new ab(e,{layout:t.pickerLayout,props:new A({invertsY:Y(t.invertsY),max:Y(t.max),xKeyScale:t.axes[0].textProps.value("keyScale"),yKeyScale:t.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.textC_=new ra(e,{assembly:mh,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new rb(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("blur",this.onPadButtonBlur_),(s=this.view.buttonElement)===null||s===void 0||s.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),_i({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,a)=>a})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),qo(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=Au(e);i&&t.contains(i)||i&&i===this.view.buttonElement&&!Bo(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}};function cb(n){return en.isObject(n)?new en(n.x,n.y):new en}function ub(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y)}function hb(n,e){return new sa({assembly:mh,components:[At(Object.assign(Object.assign({},n),n.x),e.x),At(Object.assign(Object.assign({},n),n.y),e.y)]})}function Il(n,e){var t,i;if(!G(n.min)||!G(n.max))return Math.max(Math.abs((t=n.min)!==null&&t!==void 0?t:0),Math.abs((i=n.max)!==null&&i!==void 0?i:0));const s=gu(n);return Math.max(Math.abs(s)*10,Math.abs(e)*10)}function db(n,e){var t,i;const s=Il(An(n,(t=n.x)!==null&&t!==void 0?t:{}),e.x),r=Il(An(n,(i=n.y)!==null&&i!==void 0?i:{}),e.y);return Math.max(s,r)}function pb(n){if(!("y"in n))return!1;const e=n.y;return e&&"inverted"in e?!!e.inverted:!1}const mb=Te({id:"input-point2d",type:"input",accept:(n,e)=>{if(!en.isObject(n))return null;const t=ee(e,i=>Object.assign(Object.assign({},Wi(i)),{expanded:i.optional.boolean,picker:i.optional.custom(Ku),readonly:i.optional.constant(!1),x:i.optional.custom(Wt),y:i.optional.object(Object.assign(Object.assign({},Wi(i)),{inverted:i.optional.boolean}))}));return t?{initialValue:n,params:t}:null},binding:{reader:()=>cb,constraint:n=>hb(n.params,n.initialValue),equals:en.equals,writer:()=>ub},controller:n=>{var e,t;const i=n.document,s=n.value,r=n.constraint,o=[n.params.x,n.params.y];return new lb(i,{axes:s.rawValue.getComponents().map((a,l)=>{var c;return Fo({constraint:r.components[l],initialValue:a,params:An(n.params,(c=o[l])!==null&&c!==void 0?c:{})})}),expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,invertsY:pb(n.params),max:db(n.params,s.rawValue),parser:Ot,pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",value:s,viewProps:n.viewProps})}});let Yn=class{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(G(e))return!1;const t=e.x,i=e.y,s=e.z;return!(typeof t!="number"||typeof i!="number"||typeof s!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}toObject(){return{x:this.x,y:this.y,z:this.z}}};const fh={toComponents:n=>n.getComponents(),fromComponents:n=>new Yn(...n)};function fb(n){return Yn.isObject(n)?new Yn(n.x,n.y,n.z):new Yn}function vb(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z)}function _b(n,e){return new sa({assembly:fh,components:[At(Object.assign(Object.assign({},n),n.x),e.x),At(Object.assign(Object.assign({},n),n.y),e.y),At(Object.assign(Object.assign({},n),n.z),e.z)]})}const bb=Te({id:"input-point3d",type:"input",accept:(n,e)=>{if(!Yn.isObject(n))return null;const t=ee(e,i=>Object.assign(Object.assign({},Wi(i)),{readonly:i.optional.constant(!1),x:i.optional.custom(Wt),y:i.optional.custom(Wt),z:i.optional.custom(Wt)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>fb,constraint:n=>_b(n.params,n.initialValue),equals:Yn.equals,writer:n=>vb},controller:n=>{const e=n.value,t=n.constraint,i=[n.params.x,n.params.y,n.params.z];return new ra(n.document,{assembly:fh,axes:e.rawValue.getComponents().map((s,r)=>{var o;return Fo({constraint:t.components[r],initialValue:s,params:An(n.params,(o=i[r])!==null&&o!==void 0?o:{})})}),parser:Ot,value:e,viewProps:n.viewProps})}});let Qn=class{constructor(e=0,t=0,i=0,s=0){this.x=e,this.y=t,this.z=i,this.w=s}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(G(e))return!1;const t=e.x,i=e.y,s=e.z,r=e.w;return!(typeof t!="number"||typeof i!="number"||typeof s!="number"||typeof r!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}};const vh={toComponents:n=>n.getComponents(),fromComponents:n=>new Qn(...n)};function gb(n){return Qn.isObject(n)?new Qn(n.x,n.y,n.z,n.w):new Qn}function wb(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z),n.writeProperty("w",e.w)}function xb(n,e){return new sa({assembly:vh,components:[At(Object.assign(Object.assign({},n),n.x),e.x),At(Object.assign(Object.assign({},n),n.y),e.y),At(Object.assign(Object.assign({},n),n.z),e.z),At(Object.assign(Object.assign({},n),n.w),e.w)]})}const yb=Te({id:"input-point4d",type:"input",accept:(n,e)=>{if(!Qn.isObject(n))return null;const t=ee(e,i=>Object.assign(Object.assign({},Wi(i)),{readonly:i.optional.constant(!1),w:i.optional.custom(Wt),x:i.optional.custom(Wt),y:i.optional.custom(Wt),z:i.optional.custom(Wt)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>gb,constraint:n=>xb(n.params,n.initialValue),equals:Qn.equals,writer:n=>wb},controller:n=>{const e=n.value,t=n.constraint,i=[n.params.x,n.params.y,n.params.z,n.params.w];return new ra(n.document,{assembly:vh,axes:e.rawValue.getComponents().map((s,r)=>{var o;return Fo({constraint:t.components[r],initialValue:s,params:An(n.params,(o=i[r])!==null&&o!==void 0?o:{})})}),parser:Ot,value:e,viewProps:n.viewProps})}});function Cb(n){const e=[],t=Yo(n.options);return t&&e.push(t),new us(e)}const Pb=Te({id:"input-string",type:"input",accept:(n,e)=>{if(typeof n!="string")return null;const t=ee(e,i=>({readonly:i.optional.constant(!1),options:i.optional.custom(ds)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>ju,constraint:n=>Cb(n.params),writer:n=>ms},controller:n=>{const e=n.document,t=n.value,i=n.constraint,s=i&&Ns(i,hs);return s?new rn(e,{props:new A({options:s.values.value("options")}),value:t,viewProps:n.viewProps}):new qi(e,{parser:r=>r,props:A.fromObject({formatter:so}),value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="string"?null:n.controller.valueController instanceof rn?new Xo(n.controller):null}}),vs={monitor:{defaultInterval:200,defaultRows:3}},$l=R("mll");let Eb=class{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add($l()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("textarea");i.classList.add($l("i")),i.style.height=`calc(var(${Hu("containerUnitSize")}) * ${t.rows})`,i.readOnly=!0,t.viewProps.bindDisabled(i),this.element.appendChild(i),this.textareaElem_=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.textareaElem_,t=e.scrollTop===e.scrollHeight-e.clientHeight,i=[];this.value.rawValue.forEach(s=>{s!==void 0&&i.push(this.formatter_(s))}),e.textContent=i.join(`
`),t&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}},oa=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Eb(e,{formatter:t.formatter,rows:t.rows,value:this.value,viewProps:this.viewProps})}};const Fl=R("sgl");let kb=class{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(Fl()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(Fl("i")),i.readOnly=!0,i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=t!==void 0?this.formatter_(t):""}onValueUpdate_(){this.update_()}},aa=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new kb(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}};const Tb=Te({id:"monitor-bool",type:"monitor",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=ee(e,i=>({readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Bu},controller:n=>{var e;return n.value.rawValue.length===1?new aa(n.document,{formatter:Vl,value:n.value,viewProps:n.viewProps}):new oa(n.document,{formatter:Vl,rows:(e=n.params.rows)!==null&&e!==void 0?e:vs.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}});let Ab=class extends Gi{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}};const jt=R("grl");let Sb=class{constructor(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(jt()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const i=e.createElementNS(ct,"svg");i.classList.add(jt("g")),i.style.height=`calc(var(${Hu("containerUnitSize")}) * ${t.rows})`,this.element.appendChild(i),this.svgElem_=i;const s=e.createElementNS(ct,"polyline");this.svgElem_.appendChild(s),this.lineElem_=s;const r=e.createElement("div");r.classList.add(jt("t"),R("tt")()),this.element.appendChild(r),this.tooltipElem_=r,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:t}=this.element,i=this.value.rawValue.length-1,s=this.props_.get("min"),r=this.props_.get("max"),o=[];this.value.rawValue.forEach((h,d)=>{if(h===void 0)return;const p=N(d,0,i,0,e),f=N(h,s,r,t,0);o.push([p,f].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const a=this.tooltipElem_,l=this.value.rawValue[this.cursor_.rawValue];if(l===void 0){a.classList.remove(jt("t","a"));return}const c=N(this.cursor_.rawValue,0,i,0,e),u=N(l,s,r,t,0);a.style.left=`${c}px`,a.style.top=`${u}px`,a.textContent=`${this.formatter_(l)}`,a.classList.contains(jt("t","a"))||(a.classList.add(jt("t","a"),jt("t","in")),Ds(a),a.classList.remove(jt("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}},_h=class{constructor(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=Y(-1),this.view=new Sb(e,{cursor:this.cursor_,formatter:t.formatter,rows:t.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!Bo(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const i=new In(this.view.element);i.emitter.on("down",this.onGraphPointerDown_),i.emitter.on("move",this.onGraphPointerMove_),i.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return He(e,null,t=>({max:t.required.number,min:t.required.number}),t=>(this.props.set("max",t.max),this.props.set("min",t.min),!0))}exportProps(){return Ke(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:t}=this.view.element;this.cursor_.rawValue=Math.floor(N(e.offsetX,0,t,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(N(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}};function ro(n){return G(n.format)?De(2):n.format}function Mb(n){var e;return n.value.rawValue.length===1?new aa(n.document,{formatter:ro(n.params),value:n.value,viewProps:n.viewProps}):new oa(n.document,{formatter:ro(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:vs.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}function Vb(n){var e,t,i;return new _h(n.document,{formatter:ro(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:vs.monitor.defaultRows,props:A.fromObject({max:(t=n.params.max)!==null&&t!==void 0?t:100,min:(i=n.params.min)!==null&&i!==void 0?i:0}),value:n.value,viewProps:n.viewProps})}function Bl(n){return n.view==="graph"}const Lb=Te({id:"monitor-number",type:"monitor",accept:(n,e)=>{if(typeof n!="number")return null;const t=ee(e,i=>({format:i.optional.function,max:i.optional.number,min:i.optional.number,readonly:i.required.constant(!0),rows:i.optional.number,view:i.optional.string}));return t?{initialValue:n,params:t}:null},binding:{defaultBufferSize:n=>Bl(n)?64:1,reader:n=>_u},controller:n=>Bl(n.params)?Vb(n):Mb(n),api:n=>n.controller.valueController instanceof _h?new Ab(n.controller):null}),Rb=Te({id:"monitor-string",type:"monitor",accept:(n,e)=>{if(typeof n!="string")return null;const t=ee(e,i=>({multiline:i.optional.boolean,readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>ju},controller:n=>{var e;const t=n.value;return t.rawValue.length>1||n.params.multiline?new oa(n.document,{formatter:so,rows:(e=n.params.rows)!==null&&e!==void 0?e:vs.monitor.defaultRows,value:t,viewProps:n.viewProps}):new aa(n.document,{formatter:so,value:t,viewProps:n.viewProps})}});class Ob{constructor(){this.map_=new Map}get(e){var t;return(t=this.map_.get(e))!==null&&t!==void 0?t:null}has(e){return this.map_.has(e)}add(e,t){return this.map_.set(e,t),e.viewProps.handleDispose(()=>{this.map_.delete(e)}),t}}class Db{constructor(e){this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}read(){return this.reader_(this.target.read())}write(e){this.writer_(this.target,e)}inject(e){this.write(this.reader_(e))}}function Nb(n,e){var t;const i=n.accept(e.target.read(),e.params);if(G(i))return null;const s={target:e.target,initialValue:i.initialValue,params:i.params},r=ee(e.params,h=>({disabled:h.optional.boolean,hidden:h.optional.boolean,label:h.optional.string,tag:h.optional.string})),o=n.binding.reader(s),a=n.binding.constraint?n.binding.constraint(s):void 0,l=new Db({reader:o,target:e.target,writer:n.binding.writer(s)}),c=new gf(Y(o(i.initialValue),{constraint:a,equals:n.binding.equals}),l),u=n.controller({constraint:a,document:e.document,initialValue:i.initialValue,params:i.params,value:c,viewProps:Nn.create({disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden})});return new Of(e.document,{blade:vi(),props:A.fromObject({label:"label"in e.params?(t=r==null?void 0:r.label)!==null&&t!==void 0?t:null:e.target.key}),tag:r==null?void 0:r.tag,value:c,valueController:u})}class Ib{constructor(e){this.target=e.target,this.reader_=e.reader}read(){return this.reader_(this.target.read())}}function $b(n,e){return e===0?new vv:new _v(n,e??vs.monitor.defaultInterval)}function Fb(n,e){var t,i,s;const r=n.accept(e.target.read(),e.params);if(G(r))return null;const o={target:e.target,initialValue:r.initialValue,params:r.params},a=ee(e.params,d=>({bufferSize:d.optional.number,disabled:d.optional.boolean,hidden:d.optional.boolean,interval:d.optional.number,label:d.optional.string})),l=n.binding.reader(o),c=(i=(t=a==null?void 0:a.bufferSize)!==null&&t!==void 0?t:n.binding.defaultBufferSize&&n.binding.defaultBufferSize(r.params))!==null&&i!==void 0?i:1,u=new Ff({binding:new Ib({reader:l,target:e.target}),bufferSize:c,ticker:$b(e.document,a==null?void 0:a.interval)}),h=n.controller({document:e.document,params:r.params,value:u,viewProps:Nn.create({disabled:a==null?void 0:a.disabled,hidden:a==null?void 0:a.hidden})});return h.viewProps.bindDisabled(u.ticker),h.viewProps.handleDispose(()=>{u.ticker.dispose()}),new jf(e.document,{blade:vi(),props:A.fromObject({label:"label"in e.params?(s=a==null?void 0:a.label)!==null&&s!==void 0?s:null:e.target.key}),value:u,valueController:h})}class Bb{constructor(e){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e,t){if(!Mv(t.core))throw ve.notCompatible(e,t.id);t.type==="blade"?this.pluginsMap_.blades.unshift(t):t.type==="input"?this.pluginsMap_.inputs.unshift(t):t.type==="monitor"&&this.pluginsMap_.monitors.unshift(t)}createInput_(e,t,i){return this.pluginsMap_.inputs.reduce((s,r)=>s??Nb(r,{document:e,target:t,params:i}),null)}createMonitor_(e,t,i){return this.pluginsMap_.monitors.reduce((s,r)=>s??Fb(r,{document:e,params:i,target:t}),null)}createBinding(e,t,i){const s=t.read();if(G(s))throw new ve({context:{key:t.key},type:"nomatchingcontroller"});const r=this.createInput_(e,t,i);if(r)return r;const o=this.createMonitor_(e,t,i);if(o)return o;throw new ve({context:{key:t.key},type:"nomatchingcontroller"})}createBlade(e,t){const i=this.pluginsMap_.blades.reduce((s,r)=>s??fv(r,{document:e,params:t}),null);if(!i)throw new ve({type:"nomatchingview",context:{params:t}});return i}createInputBindingApi_(e){const t=this.pluginsMap_.inputs.reduce((i,s)=>{var r,o;return i||((o=(r=s.api)===null||r===void 0?void 0:r.call(s,{controller:e}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(e,t??new Gi(e))}createMonitorBindingApi_(e){const t=this.pluginsMap_.monitors.reduce((i,s)=>{var r,o;return i||((o=(r=s.api)===null||r===void 0?void 0:r.call(s,{controller:e}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(e,t??new Gi(e))}createBindingApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(Df(e))return this.createInputBindingApi_(e);if(Uf(e))return this.createMonitorBindingApi_(e);throw ve.shouldNeverHappen()}createApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(Rf(e))return this.createBindingApi(e);const t=this.pluginsMap_.blades.reduce((i,s)=>i??s.api({controller:e,pool:this}),null);if(!t)throw ve.shouldNeverHappen();return this.apiCache_.add(e,t)}}const jb=new Ob;function Ub(){const n=new Bb(jb);return[mb,bb,yb,Pb,sb,J_,Z_,q_,Ov,Tb,Rb,Lb,qf,ov,$u].forEach(e=>{n.register("core",e)}),n}class zb extends Dn{constructor(e){super(e),this.emitter_=new le,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new cs(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}class Hb extends Dn{}class Kb extends Dn{constructor(e){super(e),this.emitter_=new le,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new cs(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}class Gb extends Dn{constructor(e){super(e),this.emitter_=new le,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new cs(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(e){this.controller.valueController.props.set("formatter",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}const qb=function(){return{id:"list",type:"blade",core:fi,accept(n){const e=ee(n,t=>({options:t.required.custom(ds),value:t.required.raw,view:t.required.constant("list"),label:t.optional.string}));return e?{params:e}:null},controller(n){const e=new hs(Wo(n.params.options)),t=Y(n.params.value,{constraint:e}),i=new rn(n.document,{props:new A({options:e.values.value("options")}),value:t,viewProps:n.viewProps});return new Sn(n.document,{blade:n.blade,props:A.fromObject({label:n.params.label}),value:t,valueController:i})},api(n){return!(n.controller instanceof Sn)||!(n.controller.valueController instanceof rn)?null:new zb(n.controller)}}}();class Xb extends Du{constructor(e,t){super(e,t)}get element(){return this.controller.view.element}}class Wb extends no{constructor(e,t){super(e,{expanded:t.expanded,blade:t.blade,props:t.props,root:!0,viewProps:t.viewProps})}}const jl=R("spr");class Yb{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(jl()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("hr");i.classList.add(jl("r")),this.element.appendChild(i)}}class Ul extends tr{constructor(e,t){super(Object.assign(Object.assign({},t),{view:new Yb(e,{viewProps:t.viewProps})}))}}const Qb={id:"separator",type:"blade",core:fi,accept(n){const e=ee(n,t=>({view:t.required.constant("separator")}));return e?{params:e}:null},controller(n){return new Ul(n.document,{blade:n.blade,viewProps:n.viewProps})},api(n){return n.controller instanceof Ul?new Hb(n.controller):null}},Zb={id:"slider",type:"blade",core:fi,accept(n){const e=ee(n,t=>({max:t.required.number,min:t.required.number,view:t.required.constant("slider"),format:t.optional.function,label:t.optional.string,value:t.optional.number}));return e?{params:e}:null},controller(n){var e,t;const i=(e=n.params.value)!==null&&e!==void 0?e:0,s=new ls({max:n.params.max,min:n.params.min}),r=Y(i,{constraint:s}),o=new $s(n.document,Object.assign(Object.assign({},zu({formatter:(t=n.params.format)!==null&&t!==void 0?t:mf,keyScale:Y(1),max:s.values.value("max"),min:s.values.value("min"),pointerScale:wu(n.params,i)})),{parser:Ot,value:r,viewProps:n.viewProps}));return new Sn(n.document,{blade:n.blade,props:A.fromObject({label:n.params.label}),value:r,valueController:o})},api(n){return!(n.controller instanceof Sn)||!(n.controller.valueController instanceof $s)?null:new Kb(n.controller)}},Jb=function(){return{id:"text",type:"blade",core:fi,accept(n){const e=ee(n,t=>({parse:t.required.function,value:t.required.raw,view:t.required.constant("text"),format:t.optional.function,label:t.optional.string}));return e?{params:e}:null},controller(n){var e;const t=Y(n.params.value),i=new qi(n.document,{parser:n.params.parse,props:A.fromObject({formatter:(e=n.params.format)!==null&&e!==void 0?e:s=>String(s)}),value:t,viewProps:n.viewProps});return new Sn(n.document,{blade:n.blade,props:A.fromObject({label:n.params.label}),value:t,valueController:i})},api(n){return!(n.controller instanceof Sn)||!(n.controller.valueController instanceof qi)?null:new Gb(n.controller)}}}();function eg(n){const e=n.createElement("div");return e.classList.add(R("dfw")()),n.body&&n.body.appendChild(e),e}function tg(n,e,t){if(n.querySelector(`style[data-tp-style=${e}]`))return;const i=n.createElement("style");i.dataset.tpStyle=e,i.textContent=t,n.head.appendChild(i)}class ng extends Xb{constructor(e){var t,i;const s=e??{},r=(t=s.document)!==null&&t!==void 0?t:kf(),o=Ub(),a=new Wb(r,{expanded:s.expanded,blade:vi(),props:A.fromObject({title:s.title}),viewProps:Nn.create()});super(a,o),this.pool_=o,this.containerElem_=(i=s.container)!==null&&i!==void 0?i:eg(r),this.containerElem_.appendChild(this.element),this.doc_=r,this.usesDefaultWrapper_=!s.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw ve.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw ve.alreadyDisposed();if(this.usesDefaultWrapper_){const t=e.parentElement;t&&t.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){e.css&&tg(this.document,`plugin-${e.id}`,e.css),("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach(i=>{this.pool_.register(e.id,i)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:"";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:"";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[qb,Qb,Zb,$u,Jb]})}}new Ru("4.0.4");function J(n){return n==null}function la(n){return n!==null&&typeof n=="object"}function oo(n){return n!==null&&typeof n=="object"}function ig(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function Vn(n,e){return Array.from(new Set([...Object.keys(n),...Object.keys(e)])).reduce((i,s)=>{const r=n[s],o=e[s];return oo(r)&&oo(o)?Object.assign(Object.assign({},i),{[s]:Vn(r,o)}):Object.assign(Object.assign({},i),{[s]:s in e?o:r})},{})}function sg(n){return la(n)?"target"in n:!1}const rg={alreadydisposed:()=>"View has been already disposed",invalidparams:n=>`Invalid parameters for '${n.name}'`,nomatchingcontroller:n=>`No matching controller for '${n.key}'`,nomatchingview:n=>`No matching view for '${JSON.stringify(n.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:n=>`Not compatible with  plugin '${n.id}'`,propertynotfound:n=>`Property '${n.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class $e{static alreadyDisposed(){return new $e({type:"alreadydisposed"})}static notBindable(){return new $e({type:"notbindable"})}static notCompatible(e,t){return new $e({type:"notcompatible",context:{id:`${e}.${t}`}})}static propertyNotFound(e){return new $e({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new $e({type:"shouldneverhappen"})}constructor(e){var t;this.message=(t=rg[e.type](e.context))!==null&&t!==void 0?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class Fs{constructor(e,t){this.obj_=e,this.key=t}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,t){const i=this.read();if(!Fs.isBindable(i))throw $e.notBindable();if(!(e in i))throw $e.propertyNotFound(e);i[e]=t}}class Ge{constructor(){this.observers_={}}on(e,t){let i=this.observers_[e];return i||(i=this.observers_[e]=[]),i.push({handler:t}),this}off(e,t){const i=this.observers_[e];return i&&(this.observers_[e]=i.filter(s=>s.handler!==t)),this}emit(e,t){const i=this.observers_[e];i&&i.forEach(s=>{s.handler(t)})}}class og{constructor(e,t){var i;this.constraint_=t==null?void 0:t.constraint,this.equals_=(i=t==null?void 0:t.equals)!==null&&i!==void 0?i:(s,r)=>s===r,this.emitter=new Ge,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},s=this.constraint_?this.constraint_.constrain(e):e,r=this.rawValue_;this.equals_(r,s)&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=s,this.emitter.emit("change",{options:i,previousRawValue:r,rawValue:s,sender:this}))}}class ag{constructor(e){this.emitter=new Ge,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},s=this.value_;s===e&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:i,previousRawValue:s,rawValue:this.value_,sender:this}))}}class lg{constructor(e){this.emitter=new Ge,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function he(n,e){const t=e==null?void 0:e.constraint,i=e==null?void 0:e.equals;return!t&&!i?new ag(n):new og(n,e)}function cg(n){return[new lg(n),(e,t)=>{n.setRawValue(e,t)}]}class L{constructor(e){this.emitter=new Ge,this.valMap_=e;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",()=>{this.emitter.emit("change",{key:t,sender:this})})}static createCore(e){return Object.keys(e).reduce((i,s)=>Object.assign(i,{[s]:he(e[s])}),{})}static fromObject(e){const t=this.createCore(e);return new L(t)}get(e){return this.valMap_[e].rawValue}set(e,t){this.valMap_[e].rawValue=t}value(e){return this.valMap_[e]}}class ir{constructor(e){this.values=L.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");return Math.min(Math.max(e,i),t)}}class ug{constructor(e){this.values=L.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");let s=e;return J(i)||(s=Math.max(s,i)),J(t)||(s=Math.min(s,t)),s}}class hg{constructor(e,t=0){this.step=e,this.origin=t}constrain(e){const t=this.origin%this.step,i=Math.round((e-t)/this.step);return t+i*this.step}}class dg{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const pg={"**":(n,e)=>Math.pow(n,e),"*":(n,e)=>n*e,"/":(n,e)=>n/e,"%":(n,e)=>n%e,"+":(n,e)=>n+e,"-":(n,e)=>n-e,"<<":(n,e)=>n<<e,">>":(n,e)=>n>>e,">>>":(n,e)=>n>>>e,"&":(n,e)=>n&e,"^":(n,e)=>n^e,"|":(n,e)=>n|e};class mg{constructor(e,t,i){this.left=t,this.operator=e,this.right=i}evaluate(){const e=pg[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const fg={"+":n=>n,"-":n=>-n,"~":n=>~n};class vg{constructor(e,t){this.operator=e,this.expression=t}evaluate(){const e=fg[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function ca(n){return(e,t)=>{for(let i=0;i<n.length;i++){const s=n[i](e,t);if(s!=="")return s}return""}}function Yi(n,e){var t;const i=n.substr(e).match(/^\s+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function _g(n,e){const t=n.substr(e,1);return t.match(/^[1-9]$/)?t:""}function Qi(n,e){var t;const i=n.substr(e).match(/^[0-9]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function bg(n,e){const t=Qi(n,e);if(t!=="")return t;const i=n.substr(e,1);if(e+=1,i!=="-"&&i!=="+")return"";const s=Qi(n,e);return s===""?"":i+s}function ua(n,e){const t=n.substr(e,1);if(e+=1,t.toLowerCase()!=="e")return"";const i=bg(n,e);return i===""?"":t+i}function bh(n,e){const t=n.substr(e,1);if(t==="0")return t;const i=_g(n,e);return e+=i.length,i===""?"":i+Qi(n,e)}function gg(n,e){const t=bh(n,e);if(e+=t.length,t==="")return"";const i=n.substr(e,1);if(e+=i.length,i!==".")return"";const s=Qi(n,e);return e+=s.length,t+i+s+ua(n,e)}function wg(n,e){const t=n.substr(e,1);if(e+=t.length,t!==".")return"";const i=Qi(n,e);return e+=i.length,i===""?"":t+i+ua(n,e)}function xg(n,e){const t=bh(n,e);return e+=t.length,t===""?"":t+ua(n,e)}const yg=ca([gg,wg,xg]);function Cg(n,e){var t;const i=n.substr(e).match(/^[01]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function Pg(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0b")return"";const i=Cg(n,e);return i===""?"":t+i}function Eg(n,e){var t;const i=n.substr(e).match(/^[0-7]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function kg(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0o")return"";const i=Eg(n,e);return i===""?"":t+i}function Tg(n,e){var t;const i=n.substr(e).match(/^[0-9a-f]+/i);return(t=i&&i[0])!==null&&t!==void 0?t:""}function Ag(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0x")return"";const i=Tg(n,e);return i===""?"":t+i}const Sg=ca([Pg,kg,Ag]),Mg=ca([Sg,yg]);function Vg(n,e){const t=Mg(n,e);return e+=t.length,t===""?null:{evaluable:new dg(t),cursor:e}}function Lg(n,e){const t=n.substr(e,1);if(e+=t.length,t!=="(")return null;const i=wh(n,e);if(!i)return null;e=i.cursor,e+=Yi(n,e).length;const s=n.substr(e,1);return e+=s.length,s!==")"?null:{evaluable:i.evaluable,cursor:e}}function Rg(n,e){var t;return(t=Vg(n,e))!==null&&t!==void 0?t:Lg(n,e)}function gh(n,e){const t=Rg(n,e);if(t)return t;const i=n.substr(e,1);if(e+=i.length,i!=="+"&&i!=="-"&&i!=="~")return null;const s=gh(n,e);return s?(e=s.cursor,{cursor:e,evaluable:new vg(i,s.evaluable)}):null}function Og(n,e,t){t+=Yi(e,t).length;const i=n.filter(s=>e.startsWith(s,t))[0];return i?(t+=i.length,t+=Yi(e,t).length,{cursor:t,operator:i}):null}function Dg(n,e){return(t,i)=>{const s=n(t,i);if(!s)return null;i=s.cursor;let r=s.evaluable;for(;;){const o=Og(e,t,i);if(!o)break;i=o.cursor;const a=n(t,i);if(!a)return null;i=a.cursor,r=new mg(o.operator,r,a.evaluable)}return r?{cursor:i,evaluable:r}:null}}const Ng=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((n,e)=>Dg(n,e),gh);function wh(n,e){return e+=Yi(n,e).length,Ng(n,e)}function Ig(n){const e=wh(n,0);return!e||e.cursor+Yi(n,e.cursor).length!==n.length?null:e.evaluable}function mt(n){var e;const t=Ig(n);return(e=t==null?void 0:t.evaluate())!==null&&e!==void 0?e:null}function sr(n){if(typeof n=="number")return n;if(typeof n=="string"){const e=mt(n);if(!J(e))return e}return 0}function we(n){return e=>e.toFixed(Math.max(Math.min(n,20),0))}function I(n,e,t,i,s){const r=(n-e)/(t-e);return i+r*(s-i)}function ao(n){return String(n.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function ae(n,e,t){return Math.min(Math.max(n,e),t)}function xh(n,e){return(n%e+e)%e}function $g(n,e){return J(n.step)?Math.max(ao(e),2):ao(n.step)}function yh(n){var e;return(e=n.step)!==null&&e!==void 0?e:1}function Fg(n,e){var t;const i=Math.abs((t=n.step)!==null&&t!==void 0?t:e);return i===0?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function ha(n,e){return J(n.step)?null:new hg(n.step,e)}function da(n){return!J(n.max)&&!J(n.min)?new ir({max:n.max,min:n.min}):!J(n.max)||!J(n.min)?new ug({max:n.max,min:n.min}):null}function rr(n,e){var t,i,s;return{formatter:(t=n.format)!==null&&t!==void 0?t:we($g(n,e)),keyScale:(i=n.keyScale)!==null&&i!==void 0?i:yh(n),pointerScale:(s=n.pointerScale)!==null&&s!==void 0?s:Fg(n,e)}}function or(n){return{format:n.optional.function,keyScale:n.optional.number,max:n.optional.number,min:n.optional.number,pointerScale:n.optional.number,step:n.optional.number}}function pa(n){return{constraint:n.constraint,textProps:L.fromObject(rr(n.params,n.initialValue))}}class ma{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class ar{constructor(e){this.target=e}}class Ch extends ar{constructor(e,t,i){super(e),this.value=t,this.last=i??!0}}class Bg extends ar{constructor(e,t){super(e),this.expanded=t}}class jg extends ar{constructor(e,t){super(e),this.index=t}}class fa extends ma{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Ge,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const t=this.controller.value;this.emitter_.emit("change",new Ch(this,t.binding.target.read(),e.options.last))}}function Ug(n,e){const i=Object.keys(e).reduce((s,r)=>{if(s===void 0)return;const o=e[r],a=o(n[r]);return a.succeeded?Object.assign(Object.assign({},s),{[r]:a.value}):void 0},{});return i}function zg(n,e){return n.reduce((t,i)=>{if(t===void 0)return;const s=e(i);if(!(!s.succeeded||s.value===void 0))return[...t,s.value]},[])}function Hg(n){return n===null?!1:typeof n=="object"}function Ct(n){return e=>t=>{if(!e&&t===void 0)return{succeeded:!1,value:void 0};if(e&&t===void 0)return{succeeded:!0,value:void 0};const i=n(t);return i!==void 0?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function zl(n){return{custom:e=>Ct(e)(n),boolean:Ct(e=>typeof e=="boolean"?e:void 0)(n),number:Ct(e=>typeof e=="number"?e:void 0)(n),string:Ct(e=>typeof e=="string"?e:void 0)(n),function:Ct(e=>typeof e=="function"?e:void 0)(n),constant:e=>Ct(t=>t===e?e:void 0)(n),raw:Ct(e=>e)(n),object:e=>Ct(t=>{if(Hg(t))return Ug(t,e)})(n),array:e=>Ct(t=>{if(Array.isArray(t))return zg(t,e)})(n)}}const lo={optional:zl(!0),required:zl(!1)};function me(n,e){const t=e(lo),i=lo.required.object(t)(n);return i.succeeded?i.value:void 0}function gt(n,e,t,i){if(e&&!e(n))return!1;const s=me(n,t);return s?i(s):!1}function wt(n,e){var t;return Vn((t=n==null?void 0:n())!==null&&t!==void 0?t:{},e)}function Ts(n){return"value"in n}function Kg(n){if(!la(n)||!("binding"in n))return!1;const e=n.binding;return sg(e)}const Be="http://www.w3.org/2000/svg";function Bs(n){n.offsetHeight}function Gg(n,e){const t=n.style.transition;n.style.transition="none",e(),n.style.transition=t}function va(n){return n.ontouchstart!==void 0}function qg(n){const e=n.ownerDocument.defaultView;return e&&"document"in e?n.getContext("2d",{willReadFrequently:!0}):null}const Xg={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function lr(n,e){const t=n.createElementNS(Be,"svg");return t.innerHTML=Xg[e],t}function Ph(n,e,t){n.insertBefore(e,n.children[t])}function Zi(n){n.parentElement&&n.parentElement.removeChild(n)}function Eh(n){for(;n.children.length>0;)n.removeChild(n.children[0])}function Wg(n){for(;n.childNodes.length>0;)n.removeChild(n.childNodes[0])}function kh(n){return n.relatedTarget?n.relatedTarget:"explicitOriginalTarget"in n?n.explicitOriginalTarget:null}function Lt(n,e){n.emitter.on("change",t=>{e(t.rawValue)}),e(n.rawValue)}function ft(n,e,t){Lt(n.value(e),t)}const Yg="tp";function V(n){return(t,i)=>[Yg,"-",n,"v",t?`_${t}`:"",i?`-${i}`:""].join("")}const Ai=V("lbl");function Qg(n,e){const t=n.createDocumentFragment();return e.split(`
`).map(s=>n.createTextNode(s)).forEach((s,r)=>{r>0&&t.appendChild(n.createElement("br")),t.appendChild(s)}),t}class Zg{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ai()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Ai("l")),ft(t.props,"label",r=>{J(r)?this.element.classList.add(Ai(void 0,"nol")):(this.element.classList.remove(Ai(void 0,"nol")),Wg(i),i.appendChild(Qg(e,r)))}),this.element.appendChild(i),this.labelElement=i;const s=e.createElement("div");s.classList.add(Ai("v")),this.element.appendChild(s),this.valueElement=s}}class Jg{constructor(e,t){this.props=t.props,this.valueController=t.valueController,this.viewProps=t.valueController.viewProps,this.view=new Zg(e,{props:t.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return gt(e,null,t=>({label:t.optional.string}),t=>(this.props.set("label",t.label),!0))}exportProps(){return wt(null,{label:this.props.get("label")})}}function ew(){return["veryfirst","first","last","verylast"]}const Hl=V(""),Kl={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Th{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const t=this.view.element;this.blade.value("positions").emitter.on("change",()=>{ew().forEach(i=>{t.classList.remove(Hl(void 0,Kl[i]))}),this.blade.get("positions").forEach(i=>{t.classList.add(Hl(void 0,Kl[i]))})}),this.viewProps.handleDispose(()=>{Zi(t)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return gt(e,null,t=>({disabled:t.required.boolean,hidden:t.required.boolean}),t=>(this.viewProps.importState(t),!0))}exportState(){return wt(null,Object.assign({},this.viewProps.exportState()))}}class tw extends ma{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,t){const i=t.bind(this);return this.controller.buttonController.emitter.on(e,()=>{i(new ar(this))}),this}}function nw(n,e,t){t?n.classList.add(e):n.classList.remove(e)}function bi(n,e){return t=>{nw(n,e,t)}}function _a(n,e){Lt(n,t=>{e.textContent=t??""})}const Tr=V("btn");class iw{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Tr()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("button");i.classList.add(Tr("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=e.createElement("div");s.classList.add(Tr("t")),_a(t.props.value("title"),s),this.buttonElement.appendChild(s)}}class sw{constructor(e,t){this.emitter=new Ge,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new iw(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return gt(e,null,t=>({title:t.optional.string}),t=>(this.props.set("title",t.title),!0))}exportProps(){return wt(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}}class Gl extends Th{constructor(e,t){const i=new sw(e,{props:t.buttonProps,viewProps:t.viewProps}),s=new Jg(e,{blade:t.blade,props:t.labelProps,valueController:i});super({blade:t.blade,view:s.view,viewProps:t.viewProps}),this.buttonController=i,this.labelController=s}importState(e){return gt(e,t=>super.importState(t)&&this.buttonController.importProps(t)&&this.labelController.importProps(t),()=>({}),()=>!0)}exportState(){return wt(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class rw{constructor(e){const[t,i]=e.split("-"),s=t.split(".");this.major=parseInt(s[0],10),this.minor=parseInt(s[1],10),this.patch=parseInt(s[2],10),this.prerelease=i??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const ow=new rw("2.0.0-beta.2");function fe(n){return Object.assign({core:ow},n)}fe({id:"button",type:"blade",accept(n){const e=me(n,t=>({title:t.required.string,view:t.required.constant("button"),label:t.optional.string}));return e?{params:e}:null},controller(n){return new Gl(n.document,{blade:n.blade,buttonProps:L.fromObject({title:n.params.title}),labelProps:L.fromObject({label:n.params.label}),viewProps:n.viewProps})},api(n){return n.controller instanceof Gl?new tw(n.controller):null}});function aw(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function lw(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function cw(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function uw(n){return la(n)?"refresh"in n&&typeof n.refresh=="function":!1}function hw(n,e){if(!Fs.isBindable(n))throw $e.notBindable();return new Fs(n,e)}class dw{constructor(e,t){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new Ge,this.pool_=t,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,t,i){const s=i??{},r=this.controller_.element.ownerDocument,o=this.pool_.createBinding(r,hw(e,t),s),a=this.pool_.createBindingApi(o);return this.add(a,s.index)}addFolder(e){return lw(this,e)}addButton(e){return aw(this,e)}addTab(e){return cw(this,e)}add(e,t){const i=e.controller;return this.controller_.rack.add(i,t),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const t=this.controller_.element.ownerDocument,i=this.pool_.createBlade(t,e),s=this.pool_.createApi(i);return this.add(s,e.index)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)}),this}refresh(){this.children.forEach(e=>{uw(e)&&e.refresh()})}onRackValueChange_(e){const t=e.bladeController,i=this.pool_.createApi(t),s=Kg(t.value)?t.value.binding:null;this.emitter_.emit("change",new Ch(i,s?s.target.read():t.value.rawValue,e.options.last))}}class ba extends ma{constructor(e,t){super(e),this.rackApi_=new dw(e.rackController,t)}}class ga extends Th{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return gt(e,t=>super.importState(t),t=>({children:t.required.array(t.required.raw)}),t=>this.rackController.rack.children.every((i,s)=>i.importState(t.children[s])))}exportState(){return wt(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function co(n){return"rackController"in n}class pw{constructor(e){this.emitter=new Ge,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const t of this.allItems())if(e(t))return t;return null}includes(e){return this.cache_.has(e)}add(e,t){if(this.includes(e))throw $e.shouldNeverHappen();const i=t!==void 0?t:this.items_.length;this.items_.splice(i,0,e),this.cache_.add(e);const s=this.extract_(e);s&&(s.emitter.on("add",this.onSubListAdd_),s.emitter.on("remove",this.onSubListRemove_),s.allItems().forEach(r=>{this.cache_.add(r)})),this.emitter.emit("add",{index:i,item:e,root:this,target:this})}remove(e){const t=this.items_.indexOf(e);if(t<0)return;this.items_.splice(t,1),this.cache_.delete(e);const i=this.extract_(e);i&&(i.allItems().forEach(s=>{this.cache_.delete(s)}),i.emitter.off("add",this.onSubListAdd_),i.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function mw(n,e){for(let t=0;t<n.length;t++){const i=n[t];if(Ts(i)&&i.value===e)return i}return null}function fw(n){return co(n)?n.rackController.rack.bcSet_:null}class vw{constructor(e){var t,i;this.emitter=new Ge,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(t=e.blade)!==null&&t!==void 0?t:null,(i=this.blade_)===null||i===void 0||i.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new pw(fw),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,t){var i;(i=e.parent)===null||i===void 0||i.remove(e),e.parent=this,this.bcSet_.add(e,t)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:t,sender:this}),!t)return;const i=e.item;if(i.viewProps.emitter.on("change",this.onChildViewPropsChange_),i.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),i.viewProps.handleDispose(this.onChildDispose_),Ts(i))i.value.emitter.on("change",this.onChildValueChange_);else if(co(i)){const s=i.rackController.rack;if(s){const r=s.emitter;r.on("layout",this.onRackLayout_),r.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:t,sender:this}),!t)return;const i=e.item;if(Ts(i))i.value.emitter.off("change",this.onChildValueChange_);else if(co(i)){const s=i.rackController.rack;if(s){const r=s.emitter;r.off("layout",this.onRackLayout_),r.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(s=>!s.viewProps.get("hidden")),t=e[0],i=e[e.length-1];this.bcSet_.items.forEach(s=>{const r=[];s===t&&(r.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&r.push("veryfirst")),s===i&&(r.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&r.push("verylast")),s.blade.set("positions",r)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(t=>t.viewProps.get("disposed")).forEach(t=>{this.bcSet_.remove(t)})}onChildValueChange_(e){const t=mw(this.find(Ts),e.sender);if(!t)throw $e.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:t,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class wa{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const t=new vw({blade:e.root?void 0:e.blade,viewProps:e.viewProps});t.emitter.on("add",this.onRackAdd_),t.emitter.on("remove",this.onRackRemove_),this.rack=t,this.viewProps.handleDispose(()=>{for(let i=this.rack.children.length-1;i>=0;i--)this.rack.children[i].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&Ph(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&Zi(e.bladeController.view.element)}}function Ah(){return new L({positions:he([],{equals:ig})})}class _s extends L{constructor(e){super(e)}static create(e){const t={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},i=L.createCore(t);return new _s(i)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!J(e)?`${e}px`:"auto"}bindExpandedClass(e,t){const i=()=>{this.styleExpanded?e.classList.add(t):e.classList.remove(t)};ft(this,"expanded",i),ft(this,"temporaryExpanded",i)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function _w(n,e){let t=0;return Gg(e,()=>{n.set("expandedHeight",null),n.set("temporaryExpanded",!0),Bs(e),t=e.clientHeight,n.set("temporaryExpanded",null),Bs(e)}),t}function ql(n,e){e.style.height=n.styleHeight}function xa(n,e){n.value("expanded").emitter.on("beforechange",()=>{if(n.set("completed",!1),J(n.get("expandedHeight"))){const t=_w(n,e);t>0&&n.set("expandedHeight",t)}n.set("shouldFixHeight",!0),Bs(e)}),n.emitter.on("change",()=>{ql(n,e)}),ql(n,e),e.addEventListener("transitionend",t=>{t.propertyName==="height"&&n.cleanUpTransition()})}class bw extends ba{constructor(e,t){super(e,t),this.emitter_=new Ge,this.controller.foldable.value("expanded").emitter.on("change",i=>{this.emitter_.emit("fold",new Bg(this,i.sender.rawValue))}),this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){return this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)}),this}refresh(){this.rackApi_.refresh()}}const Sh=V("cnt");class gw{constructor(e,t){var i;this.className_=V((i=t.viewName)!==null&&i!==void 0?i:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),Sh()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),ft(this.foldable_,"completed",bi(this.element,this.className_(void 0,"cpl")));const s=e.createElement("button");s.classList.add(this.className_("b")),ft(t.props,"title",c=>{J(c)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),t.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s;const r=e.createElement("div");r.classList.add(this.className_("i")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(this.className_("t")),_a(t.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const a=e.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);const l=e.createElement("div");l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}}class Xl extends ga{constructor(e,t){var i;const s=_s.create((i=t.expanded)!==null&&i!==void 0?i:!0),r=new gw(e,{foldable:s,props:t.props,viewName:t.root?"rot":void 0,viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new wa({blade:t.blade,element:r.containerElement,root:t.root,viewProps:t.viewProps}),view:r})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=t.props,this.foldable=s,xa(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return gt(e,t=>super.importState(t),t=>({expanded:t.required.boolean,title:t.optional.string}),t=>(this.foldable.set("expanded",t.expanded),this.props.set("title",t.title),!0))}exportState(){return wt(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}fe({id:"folder",type:"blade",accept(n){const e=me(n,t=>({title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean}));return e?{params:e}:null},controller(n){return new Xl(n.document,{blade:n.blade,expanded:n.params.expanded,props:L.fromObject({title:n.params.title}),viewProps:n.viewProps})},api(n){return n.controller instanceof Xl?new bw(n.controller,n.pool):null}});const ww=V("");function Wl(n,e){return bi(n,ww(void 0,e))}class bs extends L{constructor(e){var t;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=cg(he(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var t,i,s;const r=e??{};return new bs(L.createCore({disabled:(t=r.disabled)!==null&&t!==void 0?t:!1,disposed:!1,hidden:(i=r.hidden)!==null&&i!==void 0?i:!1,parent:(s=r.parent)!==null&&s!==void 0?s:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){Lt(this.globalDisabled_,Wl(e,"disabled")),ft(this,"hidden",Wl(e,"hidden"))}bindDisabled(e){Lt(this.globalDisabled_,t=>{e.disabled=t})}bindTabIndex(e){Lt(this.globalDisabled_,t=>{e.tabIndex=t?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",t=>{t&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var t;const i=e.previousRawValue;i==null||i.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const Yl=V("tbp");class xw{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Yl()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Yl("c")),this.element.appendChild(i),this.containerElement=i}}const Si=V("tbi");class yw{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Si()),t.viewProps.bindClassModifiers(this.element),ft(t.props,"selected",r=>{r?this.element.classList.add(Si(void 0,"sel")):this.element.classList.remove(Si(void 0,"sel"))});const i=e.createElement("button");i.classList.add(Si("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const s=e.createElement("div");s.classList.add(Si("t")),_a(t.props.value("title"),s),this.buttonElement.appendChild(s),this.titleElement=s}}class Cw{constructor(e,t){this.emitter=new Ge,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new yw(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class uo extends ga{constructor(e,t){const i=new xw(e,{viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new wa({blade:t.blade,element:i.containerElement,viewProps:t.viewProps}),view:i})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Cw(e,{props:t.itemProps,viewProps:bs.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=t.props,ft(this.props,"selected",s=>{this.itemController.props.set("selected",s),this.viewProps.set("hidden",!s)})}get itemController(){return this.ic_}importState(e){return gt(e,t=>super.importState(t),t=>({selected:t.required.boolean,title:t.required.string}),t=>(this.ic_.props.set("selected",t.selected),this.ic_.props.set("title",t.title),!0))}exportState(){return wt(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class Pw extends ba{constructor(e,t){super(e,t),this.emitter_=new Ge,this.onSelect_=this.onSelect_.bind(this),this.pool_=t,this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const t=this.controller.view.element.ownerDocument,i=new uo(t,{blade:Ah(),itemProps:L.fromObject({selected:!1,title:e.title}),props:L.fromObject({selected:!1}),viewProps:bs.create()}),s=this.pool_.createApi(i);return this.rackApi_.add(s,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,t){const i=t.bind(this);return this.emitter_.on(e,s=>{i(s)}),this}onSelect_(e){this.emitter_.emit("select",new jg(this,e.rawValue))}}class Ew extends ba{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addBlade(e){return this.rackApi_.addBlade(e)}refresh(){this.rackApi_.refresh()}}const Ql=-1;class kw{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=he(!0),this.selectedIndex=he(Ql),this.items_=[]}add(e,t){const i=t??this.items_.length;this.items_.splice(i,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Ql,this.empty.rawValue=!0;return}const e=this.items_.findIndex(t=>t.rawValue);e<0?(this.items_.forEach((t,i)=>{t.rawValue=i===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((t,i)=>{t.rawValue=i===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const t=this.items_.findIndex(i=>i===e.sender);this.items_.forEach((i,s)=>{i.rawValue=s===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()}}const Mi=V("tab");class Tw{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Mi(),Sh()),t.viewProps.bindClassModifiers(this.element),Lt(t.empty,bi(this.element,Mi(void 0,"nop")));const i=e.createElement("div");i.classList.add(Mi("t")),this.element.appendChild(i),this.itemsElement=i;const s=e.createElement("div");s.classList.add(Mi("i")),this.element.appendChild(s);const r=e.createElement("div");r.classList.add(Mi("c")),this.element.appendChild(r),this.contentsElement=r}}class Zl extends ga{constructor(e,t){const i=new kw,s=new Tw(e,{empty:i.empty,viewProps:t.viewProps});super({blade:t.blade,rackController:new wa({blade:t.blade,element:s.contentsElement,viewProps:t.viewProps}),view:s}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const r=this.rackController.rack;r.emitter.on("add",this.onRackAdd_),r.emitter.on("remove",this.onRackRemove_),this.tab=i}add(e,t){this.rackController.rack.add(e,t)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const t=e.bladeController;Ph(this.view.itemsElement,t.itemController.view.element,e.index),t.itemController.viewProps.set("parent",this.viewProps),this.tab.add(t.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const t=e.bladeController;Zi(t.itemController.view.element),t.itemController.viewProps.set("parent",null),this.tab.remove(t.props.value("selected"))}}fe({id:"tab",type:"blade",accept(n){const e=me(n,t=>({pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(n){const e=new Zl(n.document,{blade:n.blade,viewProps:n.viewProps});return n.params.pages.forEach(t=>{const i=new uo(n.document,{blade:Ah(),itemProps:L.fromObject({selected:!1,title:t.title}),props:L.fromObject({selected:!1}),viewProps:bs.create()});e.add(i)}),e},api(n){return n.controller instanceof Zl?new Pw(n.controller,n.pool):n.controller instanceof uo?new Ew(n.controller,n.pool):null}});class ya extends fa{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class gi{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((t,i)=>i.constrain(t),e)}}function js(n,e){if(n instanceof e)return n;if(n instanceof gi){const t=n.constraints.reduce((i,s)=>i||(s instanceof e?s:null),null);if(t)return t}return null}class cr{constructor(e){this.values=L.fromObject({options:e})}constrain(e){const t=this.values.get("options");return t.length===0||t.filter(s=>s.value===e).length>0?e:t[0].value}}function ur(n){var e;const t=lo;if(Array.isArray(n))return(e=me({items:n},i=>({items:i.required.array(i.required.object({text:i.required.string,value:i.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof n=="object")return t.required.raw(n).value}function Mh(n){if(Array.isArray(n))return n;const e=[];return Object.keys(n).forEach(t=>{e.push({text:t,value:n[t]})}),e}function Ca(n){return J(n)?null:new cr(Mh(n))}const Ar=V("lst");class Aw{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(Ar()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("select");i.classList.add(Ar("s")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.selectElement=i;const s=e.createElement("div");s.classList.add(Ar("m")),s.appendChild(lr(e,"dropdown")),this.element.appendChild(s),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,ft(this.props_,"options",r=>{Eh(this.selectElement),r.forEach(o=>{const a=e.createElement("option");a.textContent=o.text,this.selectElement.appendChild(a)}),this.update_()})}update_(){const e=this.props_.get("options").map(t=>t.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class oi{constructor(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Aw(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const t=e.currentTarget;this.value.rawValue=this.props.get("options")[t.selectedIndex].value}importProps(e){return gt(e,null,t=>({options:t.required.custom(ur)}),t=>(this.props.set("options",Mh(t.options)),!0))}exportProps(){return wt(null,{options:this.props.get("options")})}}const Jl=V("pop");class Sw{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Jl()),t.viewProps.bindClassModifiers(this.element),Lt(t.shows,bi(this.element,Jl(void 0,"v")))}}class Vh{constructor(e,t){this.shows=he(!1),this.viewProps=t.viewProps,this.view=new Sw(e,{shows:this.shows,viewProps:this.viewProps})}}const ec=V("txt");class Mw{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(ec()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);const i=e.createElement("input");i.classList.add(ec("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class Pa{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Mw(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const i=e.currentTarget.value,s=this.parser_(i);J(s)||(this.value.rawValue=s),this.view.refresh()}}function Vw(n){return String(n)}function Lh(n){return n==="false"?!1:!!n}function tc(n){return Vw(n)}function Lw(n){return e=>n.reduce((t,i)=>t!==null?t:i(e),null)}const Rw=we(0);function Us(n){return Rw(n)+"%"}function Rh(n){return String(n)}function ho(n){return n}function wi({primary:n,secondary:e,forward:t,backward:i}){let s=!1;function r(o){s||(s=!0,o(),s=!1)}n.emitter.on("change",o=>{r(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),e.emitter.on("change",o=>{r(()=>{n.setRawValue(i(n.rawValue,e.rawValue),o.options)}),r(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),r(()=>{e.setRawValue(t(n.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Me(n,e){const t=n*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+t:e.downKey?-t:0}function Ji(n){return{altKey:n.altKey,downKey:n.key==="ArrowDown",shiftKey:n.shiftKey,upKey:n.key==="ArrowUp"}}function Nt(n){return{altKey:n.altKey,downKey:n.key==="ArrowLeft",shiftKey:n.shiftKey,upKey:n.key==="ArrowRight"}}function Ow(n){return n==="ArrowUp"||n==="ArrowDown"}function Oh(n){return Ow(n)||n==="ArrowLeft"||n==="ArrowRight"}function Sr(n,e){var t,i;const s=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:n.pageX-(((t=s&&s.scrollX)!==null&&t!==void 0?t:0)+r.left),y:n.pageY-(((i=s&&s.scrollY)!==null&&i!==void 0?i:0)+r.top)}}class ln{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Ge,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var t;e.preventDefault(),(t=e.currentTarget)===null||t===void 0||t.focus();const i=this.elem_.ownerDocument;i.addEventListener("mousemove",this.onDocumentMouseMove_),i.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(Sr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(Sr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(Sr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchMove_(e){const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchEnd_(e){var t;const i=(t=e.targetTouches.item(0))!==null&&t!==void 0?t:this.lastTouch_,s=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(i?{x:i.clientX-s.left,y:i.clientY-s.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const Xe=V("txt");class Dw{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Xe(),Xe(void 0,"num")),t.arrayPosition&&this.element.classList.add(Xe(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(Xe("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Xe()),this.inputElement.classList.add(Xe("i"));const s=e.createElement("div");s.classList.add(Xe("k")),this.element.appendChild(s),this.knobElement=s;const r=e.createElementNS(Be,"svg");r.classList.add(Xe("g")),this.knobElement.appendChild(r);const o=e.createElementNS(Be,"path");o.classList.add(Xe("gb")),r.appendChild(o),this.guideBodyElem_=o;const a=e.createElementNS(Be,"path");a.classList.add(Xe("gh")),r.appendChild(a),this.guideHeadElem_=a;const l=e.createElement("div");l.classList.add(V("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(Xe(void 0,"drg"));return}this.element.classList.add(Xe(void 0,"drg"));const t=e.rawValue/this.props_.get("pointerScale"),i=t+(t>0?-1:t<0?1:0),s=ae(-i,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${i+s},0 L${i},4 L${i+s},8`,`M ${t},-1 L${t},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${t},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${t}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class xi{constructor(e,t){var i;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=t.parser,this.props=t.props,this.sliderProps_=(i=t.sliderProps)!==null&&i!==void 0?i:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=he(null),this.view=new Dw(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const s=new ln(this.view.knobElement);s.emitter.on("down",this.onPointerDown_),s.emitter.on("move",this.onPointerMove_),s.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var t,i;const s=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("min"),r=(i=this.sliderProps_)===null||i===void 0?void 0:i.get("max");let o=e;return s!==void 0&&(o=Math.max(o,s)),r!==void 0&&(o=Math.min(o,r)),o}onInputChange_(e){const i=e.currentTarget.value,s=this.parser_(i);J(s)||(this.value.rawValue=this.constrainValue_(s)),this.view.refresh()}onInputKeyDown_(e){const t=Me(this.props.get("keyScale"),Ji(e));t!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Me(this.props.get("keyScale"),Ji(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("pointerScale"))}onPointerMove_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Mr=V("sld");class Nw{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Mr()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Mr("t")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.trackElement=i;const s=e.createElement("div");s.classList.add(Mr("k")),this.trackElement.appendChild(s),this.knobElement=s,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}update_(){const e=ae(I(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class Iw{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new Nw(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ln(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){e.point&&this.value.setRawValue(I(ae(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),t)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Me(this.props.get("keyScale"),Nt(e));t!==0&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})}onKeyUp_(e){Me(this.props.get("keyScale"),Nt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Vr=V("sldtxt");class $w{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Vr());const i=e.createElement("div");i.classList.add(Vr("s")),this.sliderView_=t.sliderView,i.appendChild(this.sliderView_.element),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(Vr("t")),this.textView_=t.textView,s.appendChild(this.textView_.element),this.element.appendChild(s)}}class nc{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new Iw(e,{props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new xi(e,{parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new $w(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return gt(e,null,t=>({max:t.required.number,min:t.required.number}),t=>{const i=this.sliderC_.props;return i.set("max",t.max),i.set("min",t.min),!0})}exportProps(){const e=this.sliderC_.props;return wt(null,{max:e.get("max"),min:e.get("min")})}}function Fw(n){return{sliderProps:new L({keyScale:n.keyScale,max:n.max,min:n.min}),textProps:new L({formatter:he(n.formatter),keyScale:n.keyScale,pointerScale:he(n.pointerScale)})}}const Bw={containerUnitSize:"cnt-usz"};function Dh(n){return`--${Bw[n]}`}function es(n){return or(n)}function Yt(n){if(oo(n))return me(n,es)}function St(n,e){if(!n)return;const t=[],i=ha(n,e);i&&t.push(i);const s=da(n);return s&&t.push(s),new gi(t)}function Nh(n){if(n==="inline"||n==="popup")return n}function $n(n,e){n.write(e)}const Cs=V("ckb");class jw{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Cs()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("label");i.classList.add(Cs("l")),this.element.appendChild(i);const s=e.createElement("input");s.classList.add(Cs("i")),s.type="checkbox",i.appendChild(s),this.inputElement=s,t.viewProps.bindDisabled(this.inputElement);const r=e.createElement("div");r.classList.add(Cs("w")),i.appendChild(r);const o=lr(e,"check");r.appendChild(o),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class Uw{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new jw(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const t=e.currentTarget;this.value.rawValue=t.checked}}function zw(n){const e=[],t=Ca(n.options);return t&&e.push(t),new gi(e)}fe({id:"input-bool",type:"input",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=me(e,i=>({options:i.optional.custom(ur),readonly:i.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Lh,constraint:n=>zw(n.params),writer:n=>$n},controller:n=>{const e=n.document,t=n.value,i=n.constraint,s=i&&js(i,cr);return s?new oi(e,{props:new L({options:s.values.value("options")}),value:t,viewProps:n.viewProps}):new Uw(e,{value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="boolean"?null:n.controller.valueController instanceof oi?new ya(n.controller):null}});const mn=V("col");class Hw{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(mn()),t.foldable.bindExpandedClass(this.element,mn(void 0,"expanded")),ft(t.foldable,"completed",bi(this.element,mn(void 0,"cpl")));const i=e.createElement("div");i.classList.add(mn("h")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(mn("s")),i.appendChild(s),this.swatchElement=s;const r=e.createElement("div");if(r.classList.add(mn("t")),i.appendChild(r),this.textElement=r,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(mn("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}function Kw(n,e,t){const i=ae(n/255,0,1),s=ae(e/255,0,1),r=ae(t/255,0,1),o=Math.max(i,s,r),a=Math.min(i,s,r),l=o-a;let c=0,u=0;const h=(a+o)/2;return l!==0&&(u=l/(1-Math.abs(o+a-1)),i===o?c=(s-r)/l:s===o?c=2+(r-i)/l:c=4+(i-s)/l,c=c/6+(c<0?1:0)),[c*360,u*100,h*100]}function Gw(n,e,t){const i=(n%360+360)%360,s=ae(e/100,0,1),r=ae(t/100,0,1),o=(1-Math.abs(2*r-1))*s,a=o*(1-Math.abs(i/60%2-1)),l=r-o/2;let c,u,h;return i>=0&&i<60?[c,u,h]=[o,a,0]:i>=60&&i<120?[c,u,h]=[a,o,0]:i>=120&&i<180?[c,u,h]=[0,o,a]:i>=180&&i<240?[c,u,h]=[0,a,o]:i>=240&&i<300?[c,u,h]=[a,0,o]:[c,u,h]=[o,0,a],[(c+l)*255,(u+l)*255,(h+l)*255]}function qw(n,e,t){const i=ae(n/255,0,1),s=ae(e/255,0,1),r=ae(t/255,0,1),o=Math.max(i,s,r),a=Math.min(i,s,r),l=o-a;let c;l===0?c=0:o===i?c=60*(((s-r)/l%6+6)%6):o===s?c=60*((r-i)/l+2):c=60*((i-s)/l+4);const u=o===0?0:l/o,h=o;return[c,u*100,h*100]}function Ih(n,e,t){const i=xh(n,360),s=ae(e/100,0,1),r=ae(t/100,0,1),o=r*s,a=o*(1-Math.abs(i/60%2-1)),l=r-o;let c,u,h;return i>=0&&i<60?[c,u,h]=[o,a,0]:i>=60&&i<120?[c,u,h]=[a,o,0]:i>=120&&i<180?[c,u,h]=[0,o,a]:i>=180&&i<240?[c,u,h]=[0,a,o]:i>=240&&i<300?[c,u,h]=[a,0,o]:[c,u,h]=[o,0,a],[(c+l)*255,(u+l)*255,(h+l)*255]}function Xw(n,e,t){const i=t+e*(100-Math.abs(2*t-100))/200;return[n,i!==0?e*(100-Math.abs(2*t-100))/i:0,t+e*(100-Math.abs(2*t-100))/(2*100)]}function Ww(n,e,t){const i=100-Math.abs(t*(200-e)/100-100);return[n,i!==0?e*t/i:0,t*(200-e)/(2*100)]}function vt(n){return[n[0],n[1],n[2]]}function hr(n,e){return[n[0],n[1],n[2],e]}const Yw={hsl:{hsl:(n,e,t)=>[n,e,t],hsv:Xw,rgb:Gw},hsv:{hsl:Ww,hsv:(n,e,t)=>[n,e,t],rgb:Ih},rgb:{hsl:Kw,hsv:qw,rgb:(n,e,t)=>[n,e,t]}};function ai(n,e){return[e==="float"?1:n==="rgb"?255:360,e==="float"?1:n==="rgb"?255:100,e==="float"?1:n==="rgb"?255:100]}function Qw(n,e){return n===e?e:xh(n,e)}function $h(n,e,t){var i;const s=ai(e,t);return[e==="rgb"?ae(n[0],0,s[0]):Qw(n[0],s[0]),ae(n[1],0,s[1]),ae(n[2],0,s[2]),ae((i=n[3])!==null&&i!==void 0?i:1,0,1)]}function ic(n,e,t,i){const s=ai(e,t),r=ai(e,i);return n.map((o,a)=>o/s[a]*r[a])}function Fh(n,e,t){const i=ic(n,e.mode,e.type,"int"),s=Yw[e.mode][t.mode](...i);return ic(s,t.mode,"int",t.type)}class O{static black(){return new O([0,0,0],"rgb")}constructor(e,t){this.type="int",this.mode=t,this.comps_=$h(e,t,this.type)}getComponents(e){return hr(Fh(vt(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const Ut=V("colp");class Zw{constructor(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(Ut()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Ut("hsv"));const s=e.createElement("div");s.classList.add(Ut("sv")),this.svPaletteView_=t.svPaletteView,s.appendChild(this.svPaletteView_.element),i.appendChild(s);const r=e.createElement("div");r.classList.add(Ut("h")),this.hPaletteView_=t.hPaletteView,r.appendChild(this.hPaletteView_.element),i.appendChild(r),this.element.appendChild(i);const o=e.createElement("div");if(o.classList.add(Ut("rgb")),this.textsView_=t.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};const a=e.createElement("div");a.classList.add(Ut("a"));const l=e.createElement("div");l.classList.add(Ut("ap")),l.appendChild(this.alphaViews_.palette.element),a.appendChild(l);const c=e.createElement("div");c.classList.add(Ut("at")),c.appendChild(this.alphaViews_.text.element),a.appendChild(c),this.element.appendChild(a)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(t=>t.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function Jw(n){return n==="int"?"int":n==="float"?"float":void 0}function Ea(n){return me(n,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(Jw)}),expanded:e.optional.boolean,picker:e.optional.custom(Nh),readonly:e.optional.constant(!1)}))}function Ln(n){return n?.1:1}function Bh(n){var e;return(e=n.color)===null||e===void 0?void 0:e.type}class ka{constructor(e,t){this.type="float",this.mode=t,this.comps_=$h(e,t,this.type)}getComponents(e){return hr(Fh(vt(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const e0={int:(n,e)=>new O(n,e),float:(n,e)=>new ka(n,e)};function Ta(n,e,t){return e0[t](n,e)}function t0(n){return n.type==="float"}function n0(n){return n.type==="int"}function i0(n){const e=n.getComponents(),t=ai(n.mode,"int");return new O([Math.round(I(e[0],0,1,0,t[0])),Math.round(I(e[1],0,1,0,t[1])),Math.round(I(e[2],0,1,0,t[2])),e[3]],n.mode)}function s0(n){const e=n.getComponents(),t=ai(n.mode,"int");return new ka([I(e[0],0,t[0],0,1),I(e[1],0,t[1],0,1),I(e[2],0,t[2],0,1),e[3]],n.mode)}function Ee(n,e){if(n.type===e)return n;if(n0(n)&&e==="float")return s0(n);if(t0(n)&&e==="int")return i0(n);throw $e.shouldNeverHappen()}function r0(n,e){return n.alpha===e.alpha&&n.mode===e.mode&&n.notation===e.notation&&n.type===e.type}function Ze(n,e){const t=n.match(/^(.+)%$/);return Math.min(t?parseFloat(t[1])*.01*e:parseFloat(n),e)}const o0={deg:n=>n,grad:n=>n*360/400,rad:n=>n*360/(2*Math.PI),turn:n=>n*360};function jh(n){const e=n.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(n);const t=parseFloat(e[1]),i=e[2];return o0[i](t)}function Uh(n){const e=n.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Ze(e[1],255),Ze(e[2],255),Ze(e[3],255)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function a0(n){const e=Uh(n);return e?new O(e,"rgb"):null}function zh(n){const e=n.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Ze(e[1],255),Ze(e[2],255),Ze(e[3],255),Ze(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function l0(n){const e=zh(n);return e?new O(e,"rgb"):null}function Hh(n){const e=n.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[jh(e[1]),Ze(e[2],100),Ze(e[3],100)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function c0(n){const e=Hh(n);return e?new O(e,"hsl"):null}function Kh(n){const e=n.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[jh(e[1]),Ze(e[2],100),Ze(e[3],100),Ze(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function u0(n){const e=Kh(n);return e?new O(e,"hsl"):null}function Gh(n){const e=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const t=n.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}function h0(n){const e=Gh(n);return e?new O(e,"rgb"):null}function qh(n){const e=n.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),I(parseInt(e[4]+e[4],16),0,255,0,1)];const t=n.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),I(parseInt(t[4],16),0,255,0,1)]:null}function d0(n){const e=qh(n);return e?new O(e,"rgb"):null}function Xh(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function p0(n){return e=>{const t=Xh(e);return t?Ta(t,"rgb",n):null}}function Wh(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function m0(n){return e=>{const t=Wh(e);return t?Ta(t,"rgb",n):null}}const f0=[{parser:Gh,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:qh,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Uh,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:zh,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Hh,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Kh,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Xh,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Wh,result:{alpha:!0,mode:"rgb",notation:"object"}}];function v0(n){return f0.reduce((e,{parser:t,result:i})=>e||(t(n)?i:null),null)}function _0(n,e="int"){const t=v0(n);return t?t.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},t),{type:"int"}):t.notation==="func"?Object.assign(Object.assign({},t),{type:e}):null:null}function gs(n){const e=[h0,d0,a0,l0,c0,u0];e.push(p0("int"),m0("int"));const t=Lw(e);return i=>{const s=t(i);return s?Ee(s,n):null}}function b0(n){const e=gs("int");if(typeof n!="string")return O.black();const t=e(n);return t??O.black()}function Yh(n){const e=ae(Math.floor(n),0,255).toString(16);return e.length===1?`0${e}`:e}function Aa(n,e="#"){const t=vt(n.getComponents("rgb")).map(Yh).join("");return`${e}${t}`}function Sa(n,e="#"){const t=n.getComponents("rgb"),i=[t[0],t[1],t[2],t[3]*255].map(Yh).join("");return`${e}${i}`}function Qh(n){const e=we(0),t=Ee(n,"int");return`rgb(${vt(t.getComponents("rgb")).map(s=>e(s)).join(", ")})`}function As(n){const e=we(2),t=we(0);return`rgba(${Ee(n,"int").getComponents("rgb").map((r,o)=>(o===3?e:t)(r)).join(", ")})`}function g0(n){const e=[we(0),Us,Us],t=Ee(n,"int");return`hsl(${vt(t.getComponents("hsl")).map((s,r)=>e[r](s)).join(", ")})`}function w0(n){const e=[we(0),Us,Us,we(2)];return`hsla(${Ee(n,"int").getComponents("hsl").map((s,r)=>e[r](s)).join(", ")})`}function Zh(n,e){const t=we(e==="float"?2:0),i=["r","g","b"],s=Ee(n,e);return`{${vt(s.getComponents("rgb")).map((o,a)=>`${i[a]}: ${t(o)}`).join(", ")}}`}function x0(n){return e=>Zh(e,n)}function Jh(n,e){const t=we(2),i=we(e==="float"?2:0),s=["r","g","b","a"];return`{${Ee(n,e).getComponents("rgb").map((a,l)=>{const c=l===3?t:i;return`${s[l]}: ${c(a)}`}).join(", ")}}`}function y0(n){return e=>Jh(e,n)}const C0=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Aa},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:Sa},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Qh},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:As},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:g0},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:w0},...["int","float"].reduce((n,e)=>[...n,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:x0(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:y0(e)}],[])];function ed(n){return C0.reduce((e,t)=>e||(r0(t.format,n)?t.stringifier:null),null)}const Vi=V("apl");class P0{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Vi()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(Vi("b")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(Vi("c")),i.appendChild(s),this.colorElem_=s;const r=e.createElement("div");r.classList.add(Vi("m")),this.element.appendChild(r),this.markerElem_=r;const o=e.createElement("div");o.classList.add(Vi("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const e=this.value.rawValue,t=e.getComponents("rgb"),i=new O([t[0],t[1],t[2],0],"rgb"),s=new O([t[0],t[1],t[2],255],"rgb"),r=["to right",As(i),As(s)];this.colorElem_.style.background=`linear-gradient(${r.join(",")})`,this.previewElem_.style.backgroundColor=As(e);const o=I(t[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class E0{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new P0(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ln(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=e.point.x/e.bounds.width,s=this.value.rawValue,[r,o,a]=s.getComponents("hsv");this.value.setRawValue(new O([r,o,a,i],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Me(Ln(!0),Nt(e));if(t===0)return;const i=this.value.rawValue,[s,r,o,a]=i.getComponents("hsv");this.value.setRawValue(new O([s,r,o,a+t],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Me(Ln(!0),Nt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Hn=V("coltxt");function k0(n){const e=n.createElement("select"),t=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(t.reduce((i,s)=>{const r=n.createElement("option");return r.textContent=s.text,r.value=s.value,i.appendChild(r),i},n.createDocumentFragment())),e}class T0{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Hn()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Hn("m")),this.modeElem_=k0(e),this.modeElem_.classList.add(Hn("ms")),i.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);const s=e.createElement("div");s.classList.add(Hn("mm")),s.appendChild(lr(e,"dropdown")),i.appendChild(s),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(Hn("w")),this.element.appendChild(r),this.inputsElem_=r,this.inputViews_=t.inputViews,this.applyInputViews_(),Lt(t.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){Eh(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(t=>{const i=e.createElement("div");i.classList.add(Hn("c")),i.appendChild(t.element),this.inputsElem_.appendChild(i)})}}function A0(n){return we(n==="float"?2:0)}function S0(n,e,t){const i=ai(n,e)[t];return new ir({min:0,max:i})}function M0(n,e,t){return new xi(n,{arrayPosition:t===0?"fst":t===2?"lst":"mid",parser:e.parser,props:L.fromObject({formatter:A0(e.colorType),keyScale:Ln(!1),pointerScale:e.colorType==="float"?.01:1}),value:he(0,{constraint:S0(e.colorMode,e.colorType,t)}),viewProps:e.viewProps})}function V0(n,e){const t={colorMode:e.colorMode,colorType:e.colorType,parser:mt,viewProps:e.viewProps};return[0,1,2].map(i=>{const s=M0(n,t,i);return wi({primary:e.value,secondary:s.value,forward(r){return Ee(r,e.colorType).getComponents(e.colorMode)[i]},backward(r,o){const a=e.colorMode,c=Ee(r,e.colorType).getComponents(a);c[i]=o;const u=Ta(hr(vt(c),c[3]),a,e.colorType);return Ee(u,"int")}}),s})}function L0(n,e){const t=new Pa(n,{parser:gs("int"),props:L.fromObject({formatter:Aa}),value:he(O.black()),viewProps:e.viewProps});return wi({primary:e.value,secondary:t.value,forward:i=>new O(vt(i.getComponents()),i.mode),backward:(i,s)=>new O(hr(vt(s.getComponents(i.mode)),i.getComponents()[3]),i.mode)}),[t]}function R0(n){return n!=="hex"}class O0{constructor(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=he(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new T0(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const t=this.colorMode.rawValue;return R0(t)?V0(e,{colorMode:t,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):L0(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(i=>i.view)}}const Lr=V("hpl");class D0{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Lr()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(Lr("c")),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(Lr("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const e=this.value.rawValue,[t]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=Qh(new O([t,100,100],"hsv"));const i=I(t,0,360,0,100);this.markerElem_.style.left=`${i}%`}onValueChange_(){this.update_()}}class N0{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new D0(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ln(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=I(ae(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),s=this.value.rawValue,[,r,o,a]=s.getComponents("hsv");this.value.setRawValue(new O([i,r,o,a],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Me(Ln(!1),Nt(e));if(t===0)return;const i=this.value.rawValue,[s,r,o,a]=i.getComponents("hsv");this.value.setRawValue(new O([s+t,r,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Me(Ln(!1),Nt(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Rr=V("svp"),sc=64;class I0{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Rr()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("canvas");i.height=sc,i.width=sc,i.classList.add(Rr("c")),this.element.appendChild(i),this.canvasElement=i;const s=e.createElement("div");s.classList.add(Rr("m")),this.element.appendChild(s),this.markerElem_=s,this.update_()}update_(){const e=qg(this.canvasElement);if(!e)return;const i=this.value.rawValue.getComponents("hsv"),s=this.canvasElement.width,r=this.canvasElement.height,o=e.getImageData(0,0,s,r),a=o.data;for(let u=0;u<r;u++)for(let h=0;h<s;h++){const d=I(h,0,s,0,100),p=I(u,0,r,100,0),f=Ih(i[0],d,p),m=(u*s+h)*4;a[m]=f[0],a[m+1]=f[1],a[m+2]=f[2],a[m+3]=255}e.putImageData(o,0,0);const l=I(i[1],0,100,0,100);this.markerElem_.style.left=`${l}%`;const c=I(i[2],0,100,100,0);this.markerElem_.style.top=`${c}%`}onValueChange_(){this.update_()}}class $0{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new I0(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ln(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=I(e.point.x,0,e.bounds.width,0,100),s=I(e.point.y,0,e.bounds.height,100,0),[r,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new O([r,i,s,o],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){Oh(e.key)&&e.preventDefault();const[t,i,s,r]=this.value.rawValue.getComponents("hsv"),o=Ln(!1),a=Me(o,Nt(e)),l=Me(o,Ji(e));a===0&&l===0||this.value.setRawValue(new O([t,i+a,s+l,r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const t=Ln(!1),i=Me(t,Nt(e)),s=Me(t,Ji(e));i===0&&s===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class F0{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new N0(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new $0(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new E0(e,{value:this.value,viewProps:this.viewProps}),text:new xi(e,{parser:mt,props:L.fromObject({pointerScale:.01,keyScale:.1,formatter:we(2)}),value:he(0,{constraint:new ir({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&wi({primary:this.value,secondary:this.alphaIcs_.text.value,forward:i=>i.getComponents()[3],backward:(i,s)=>{const r=i.getComponents();return r[3]=s,new O(r,i.mode)}}),this.textsC_=new O0(e,{colorType:t.colorType,value:this.value,viewProps:this.viewProps}),this.view=new Zw(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const Or=V("colsw");class B0{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(Or()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Or("sw")),this.element.appendChild(i),this.swatchElem_=i;const s=e.createElement("button");s.classList.add(Or("b")),t.viewProps.bindDisabled(s),this.element.appendChild(s),this.buttonElement=s,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=Sa(e)}onValueChange_(){this.update_()}}class j0{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new B0(e,{value:this.value,viewProps:this.viewProps})}}class Ma{constructor(e,t){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=_s.create(t.expanded),this.swatchC_=new j0(e,{value:this.value,viewProps:this.viewProps});const i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new Pa(e,{parser:t.parser,props:L.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Hw(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=t.pickerLayout==="popup"?new Vh(e,{viewProps:this.viewProps}):null;const s=new F0(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(r=>{r.addEventListener("blur",this.onPopupChildBlur_),r.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(s.view.element),wi({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:r=>r,backward:(r,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),xa(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=kh(e);i&&t.contains(i)||i&&i===this.swatchC_.view.buttonElement&&!va(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function U0(n){return vt(n.getComponents("rgb")).reduce((e,t)=>e<<8|Math.floor(t)&255,0)}function z0(n){return n.getComponents("rgb").reduce((e,t,i)=>{const s=Math.floor(i===3?t*255:t)&255;return e<<8|s},0)>>>0}function H0(n){return new O([n>>16&255,n>>8&255,n&255],"rgb")}function K0(n){return new O([n>>24&255,n>>16&255,n>>8&255,I(n&255,0,255,0,1)],"rgb")}function G0(n){return typeof n!="number"?O.black():H0(n)}function q0(n){return typeof n!="number"?O.black():K0(n)}function Ss(n,e){return typeof n!="object"||J(n)?!1:e in n&&typeof n[e]=="number"}function td(n){return Ss(n,"r")&&Ss(n,"g")&&Ss(n,"b")}function nd(n){return td(n)&&Ss(n,"a")}function id(n){return td(n)}function Va(n,e){if(n.mode!==e.mode||n.type!==e.type)return!1;const t=n.getComponents(),i=e.getComponents();for(let s=0;s<t.length;s++)if(t[s]!==i[s])return!1;return!0}function rc(n){return"a"in n?[n.r,n.g,n.b,n.a]:[n.r,n.g,n.b]}function X0(n){const e=ed(n);return e?(t,i)=>{$n(t,e(i))}:null}function W0(n){const e=n?z0:U0;return(t,i)=>{$n(t,e(i))}}function Y0(n,e,t){const s=Ee(e,t).toRgbaObject();n.writeProperty("r",s.r),n.writeProperty("g",s.g),n.writeProperty("b",s.b),n.writeProperty("a",s.a)}function Q0(n,e,t){const s=Ee(e,t).toRgbaObject();n.writeProperty("r",s.r),n.writeProperty("g",s.g),n.writeProperty("b",s.b)}function Z0(n,e){return(t,i)=>{n?Y0(t,i,e):Q0(t,i,e)}}function J0(n){var e;return!!(!((e=n==null?void 0:n.color)===null||e===void 0)&&e.alpha)}function ex(n){return n?e=>Sa(e,"0x"):e=>Aa(e,"0x")}function tx(n){return"color"in n||n.view==="color"}fe({id:"input-color-number",type:"input",accept:(n,e)=>{if(typeof n!="number"||!tx(e))return null;const t=Ea(e);return t?{initialValue:n,params:Object.assign(Object.assign({},t),{supportsAlpha:J0(e)})}:null},binding:{reader:n=>n.params.supportsAlpha?q0:G0,equals:Va,writer:n=>W0(n.params.supportsAlpha)},controller:n=>{var e,t;return new Ma(n.document,{colorType:"int",expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:ex(n.params.supportsAlpha),parser:gs("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.supportsAlpha,value:n.value,viewProps:n.viewProps})}});function nx(n,e){if(!id(n))return Ee(O.black(),e);if(e==="int"){const t=rc(n);return new O(t,"rgb")}if(e==="float"){const t=rc(n);return new ka(t,"rgb")}return Ee(O.black(),"int")}function ix(n){return nd(n)}function sx(n){return e=>{const t=nx(e,n);return Ee(t,"int")}}function rx(n,e){return t=>n?Jh(t,e):Zh(t,e)}fe({id:"input-color-object",type:"input",accept:(n,e)=>{var t;if(!id(n))return null;const i=Ea(e);return i?{initialValue:n,params:Object.assign(Object.assign({},i),{colorType:(t=Bh(e))!==null&&t!==void 0?t:"int"})}:null},binding:{reader:n=>sx(n.params.colorType),equals:Va,writer:n=>Z0(ix(n.initialValue),n.params.colorType)},controller:n=>{var e,t;const i=nd(n.initialValue);return new Ma(n.document,{colorType:n.params.colorType,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:rx(i,n.params.colorType),parser:gs("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:i,value:n.value,viewProps:n.viewProps})}});fe({id:"input-color-string",type:"input",accept:(n,e)=>{if(typeof n!="string"||e.view==="text")return null;const t=_0(n,Bh(e));if(!t)return null;const i=ed(t);if(!i)return null;const s=Ea(e);return s?{initialValue:n,params:Object.assign(Object.assign({},s),{format:t,stringifier:i})}:null},binding:{reader:()=>b0,equals:Va,writer:n=>{const e=X0(n.params.format);if(!e)throw $e.notBindable();return e}},controller:n=>{var e,t;return new Ma(n.document,{colorType:n.params.format.type,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:n.params.stringifier,parser:gs("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.format.alpha,value:n.value,viewProps:n.viewProps})}});class La{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const t=this.asm_.toComponents(e).map((i,s)=>{var r,o;return(o=(r=this.components[s])===null||r===void 0?void 0:r.constrain(i))!==null&&o!==void 0?o:i});return this.asm_.fromComponents(t)}}const oc=V("pndtxt");class ox{constructor(e,t){this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(oc()),this.textViews.forEach(i=>{const s=e.createElement("div");s.classList.add(oc("a")),s.appendChild(i.element),this.element.appendChild(s)})}}function ax(n,e,t){return new xi(n,{arrayPosition:t===0?"fst":t===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[t].textProps,value:he(0,{constraint:e.axes[t].constraint}),viewProps:e.viewProps})}class Ra{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map((i,s)=>ax(e,t,s)),this.acs_.forEach((i,s)=>{wi({primary:this.value,secondary:i.value,forward:r=>t.assembly.toComponents(r)[s],backward:(r,o)=>{const a=t.assembly.toComponents(r);return a[s]=o,t.assembly.fromComponents(a)}})}),this.view=new ox(e,{textViews:this.acs_.map(i=>i.view)})}get textControllers(){return this.acs_}}class lx extends fa{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function cx(n,e){const t=[],i=ha(n,e);i&&t.push(i);const s=da(n);s&&t.push(s);const r=Ca(n.options);return r&&t.push(r),new gi(t)}fe({id:"input-number",type:"input",accept:(n,e)=>{if(typeof n!="number")return null;const t=me(e,i=>Object.assign(Object.assign({},or(i)),{options:i.optional.custom(ur),readonly:i.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>sr,constraint:n=>cx(n.params,n.initialValue),writer:n=>$n},controller:n=>{const e=n.value,t=n.constraint,i=t&&js(t,cr);if(i)return new oi(n.document,{props:new L({options:i.values.value("options")}),value:e,viewProps:n.viewProps});const s=rr(n.params,e.rawValue),r=t&&js(t,ir);return r?new nc(n.document,Object.assign(Object.assign({},Fw(Object.assign(Object.assign({},s),{keyScale:he(s.keyScale),max:r.values.value("max"),min:r.values.value("min")}))),{parser:mt,value:e,viewProps:n.viewProps})):new xi(n.document,{parser:mt,props:L.fromObject(s),value:e,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="number"?null:n.controller.valueController instanceof nc?new lx(n.controller):n.controller.valueController instanceof oi?new ya(n.controller):null}});class tn{constructor(e=0,t=0){this.x=e,this.y=t}getComponents(){return[this.x,this.y]}static isObject(e){if(J(e))return!1;const t=e.x,i=e.y;return!(typeof t!="number"||typeof i!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y}toObject(){return{x:this.x,y:this.y}}}const sd={toComponents:n=>n.getComponents(),fromComponents:n=>new tn(...n)},Kn=V("p2d");class ux{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Kn()),t.viewProps.bindClassModifiers(this.element),Lt(t.expanded,bi(this.element,Kn(void 0,"expanded")));const i=e.createElement("div");i.classList.add(Kn("h")),this.element.appendChild(i);const s=e.createElement("button");s.classList.add(Kn("b")),s.appendChild(lr(e,"p2dpad")),t.viewProps.bindDisabled(s),i.appendChild(s),this.buttonElement=s;const r=e.createElement("div");if(r.classList.add(Kn("t")),i.appendChild(r),this.textElement=r,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(Kn("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}const zt=V("p2dp");class hx{constructor(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(zt()),t.layout==="popup"&&this.element.classList.add(zt(void 0,"p")),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(zt("p")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.padElement=i;const s=e.createElementNS(Be,"svg");s.classList.add(zt("g")),this.padElement.appendChild(s),this.svgElem_=s;const r=e.createElementNS(Be,"line");r.classList.add(zt("ax")),r.setAttributeNS(null,"x1","0"),r.setAttributeNS(null,"y1","50%"),r.setAttributeNS(null,"x2","100%"),r.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(r);const o=e.createElementNS(Be,"line");o.classList.add(zt("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const a=e.createElementNS(Be,"line");a.classList.add(zt("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const l=e.createElement("div");l.classList.add(zt("m")),this.padElement.appendChild(l),this.markerElem_=l,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,t]=this.value.rawValue.getComponents(),i=this.props_.get("max"),s=I(e,-i,+i,0,100),r=I(t,-i,+i,0,100),o=this.props_.get("invertsY")?100-r:r;this.lineElem_.setAttributeNS(null,"x2",`${s}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${s}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function ac(n,e,t){return[Me(e[0],Nt(n)),Me(e[1],Ji(n))*(t?1:-1)]}class dx{constructor(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new hx(e,{layout:t.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ln(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=this.props.get("max"),s=I(e.point.x,0,e.bounds.width,-i,+i),r=I(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-i,+i);this.value.setRawValue(new tn(s,r),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){Oh(e.key)&&e.preventDefault();const[t,i]=ac(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(new tn(this.value.rawValue.x+t,this.value.rawValue.y+i),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[t,i]=ac(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class px{constructor(e,t){var i,s;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=_s.create(t.expanded),this.popC_=t.pickerLayout==="popup"?new Vh(e,{viewProps:this.viewProps}):null;const r=new dx(e,{layout:t.pickerLayout,props:new L({invertsY:he(t.invertsY),max:he(t.max),xKeyScale:t.axes[0].textProps.value("keyScale"),yKeyScale:t.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.textC_=new Ra(e,{assembly:sd,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new ux(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("blur",this.onPadButtonBlur_),(s=this.view.buttonElement)===null||s===void 0||s.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),wi({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,a)=>a})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),xa(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=kh(e);i&&t.contains(i)||i&&i===this.view.buttonElement&&!va(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function mx(n){return tn.isObject(n)?new tn(n.x,n.y):new tn}function fx(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y)}function vx(n,e){return new La({assembly:sd,components:[St(Object.assign(Object.assign({},n),n.x),e.x),St(Object.assign(Object.assign({},n),n.y),e.y)]})}function lc(n,e){var t,i;if(!J(n.min)||!J(n.max))return Math.max(Math.abs((t=n.min)!==null&&t!==void 0?t:0),Math.abs((i=n.max)!==null&&i!==void 0?i:0));const s=yh(n);return Math.max(Math.abs(s)*10,Math.abs(e)*10)}function _x(n,e){var t,i;const s=lc(Vn(n,(t=n.x)!==null&&t!==void 0?t:{}),e.x),r=lc(Vn(n,(i=n.y)!==null&&i!==void 0?i:{}),e.y);return Math.max(s,r)}function bx(n){if(!("y"in n))return!1;const e=n.y;return e&&"inverted"in e?!!e.inverted:!1}fe({id:"input-point2d",type:"input",accept:(n,e)=>{if(!tn.isObject(n))return null;const t=me(e,i=>Object.assign(Object.assign({},es(i)),{expanded:i.optional.boolean,picker:i.optional.custom(Nh),readonly:i.optional.constant(!1),x:i.optional.custom(Yt),y:i.optional.object(Object.assign(Object.assign({},es(i)),{inverted:i.optional.boolean}))}));return t?{initialValue:n,params:t}:null},binding:{reader:()=>mx,constraint:n=>vx(n.params,n.initialValue),equals:tn.equals,writer:()=>fx},controller:n=>{var e,t;const i=n.document,s=n.value,r=n.constraint,o=[n.params.x,n.params.y];return new px(i,{axes:s.rawValue.getComponents().map((a,l)=>{var c;return pa({constraint:r.components[l],initialValue:a,params:Vn(n.params,(c=o[l])!==null&&c!==void 0?c:{})})}),expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,invertsY:bx(n.params),max:_x(n.params,s.rawValue),parser:mt,pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",value:s,viewProps:n.viewProps})}});class Zn{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(J(e))return!1;const t=e.x,i=e.y,s=e.z;return!(typeof t!="number"||typeof i!="number"||typeof s!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const rd={toComponents:n=>n.getComponents(),fromComponents:n=>new Zn(...n)};function gx(n){return Zn.isObject(n)?new Zn(n.x,n.y,n.z):new Zn}function wx(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z)}function xx(n,e){return new La({assembly:rd,components:[St(Object.assign(Object.assign({},n),n.x),e.x),St(Object.assign(Object.assign({},n),n.y),e.y),St(Object.assign(Object.assign({},n),n.z),e.z)]})}fe({id:"input-point3d",type:"input",accept:(n,e)=>{if(!Zn.isObject(n))return null;const t=me(e,i=>Object.assign(Object.assign({},es(i)),{readonly:i.optional.constant(!1),x:i.optional.custom(Yt),y:i.optional.custom(Yt),z:i.optional.custom(Yt)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>gx,constraint:n=>xx(n.params,n.initialValue),equals:Zn.equals,writer:n=>wx},controller:n=>{const e=n.value,t=n.constraint,i=[n.params.x,n.params.y,n.params.z];return new Ra(n.document,{assembly:rd,axes:e.rawValue.getComponents().map((s,r)=>{var o;return pa({constraint:t.components[r],initialValue:s,params:Vn(n.params,(o=i[r])!==null&&o!==void 0?o:{})})}),parser:mt,value:e,viewProps:n.viewProps})}});class Jn{constructor(e=0,t=0,i=0,s=0){this.x=e,this.y=t,this.z=i,this.w=s}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(J(e))return!1;const t=e.x,i=e.y,s=e.z,r=e.w;return!(typeof t!="number"||typeof i!="number"||typeof s!="number"||typeof r!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const od={toComponents:n=>n.getComponents(),fromComponents:n=>new Jn(...n)};function yx(n){return Jn.isObject(n)?new Jn(n.x,n.y,n.z,n.w):new Jn}function Cx(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z),n.writeProperty("w",e.w)}function Px(n,e){return new La({assembly:od,components:[St(Object.assign(Object.assign({},n),n.x),e.x),St(Object.assign(Object.assign({},n),n.y),e.y),St(Object.assign(Object.assign({},n),n.z),e.z),St(Object.assign(Object.assign({},n),n.w),e.w)]})}fe({id:"input-point4d",type:"input",accept:(n,e)=>{if(!Jn.isObject(n))return null;const t=me(e,i=>Object.assign(Object.assign({},es(i)),{readonly:i.optional.constant(!1),w:i.optional.custom(Yt),x:i.optional.custom(Yt),y:i.optional.custom(Yt),z:i.optional.custom(Yt)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>yx,constraint:n=>Px(n.params,n.initialValue),equals:Jn.equals,writer:n=>Cx},controller:n=>{const e=n.value,t=n.constraint,i=[n.params.x,n.params.y,n.params.z,n.params.w];return new Ra(n.document,{assembly:od,axes:e.rawValue.getComponents().map((s,r)=>{var o;return pa({constraint:t.components[r],initialValue:s,params:Vn(n.params,(o=i[r])!==null&&o!==void 0?o:{})})}),parser:mt,value:e,viewProps:n.viewProps})}});function Ex(n){const e=[],t=Ca(n.options);return t&&e.push(t),new gi(e)}fe({id:"input-string",type:"input",accept:(n,e)=>{if(typeof n!="string")return null;const t=me(e,i=>({readonly:i.optional.constant(!1),options:i.optional.custom(ur)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Rh,constraint:n=>Ex(n.params),writer:n=>$n},controller:n=>{const e=n.document,t=n.value,i=n.constraint,s=i&&js(i,cr);return s?new oi(e,{props:new L({options:s.values.value("options")}),value:t,viewProps:n.viewProps}):new Pa(e,{parser:r=>r,props:L.fromObject({formatter:ho}),value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="string"?null:n.controller.valueController instanceof oi?new ya(n.controller):null}});const dr={monitor:{defaultInterval:200,defaultRows:3}},cc=V("mll");class kx{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(cc()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("textarea");i.classList.add(cc("i")),i.style.height=`calc(var(${Dh("containerUnitSize")}) * ${t.rows})`,i.readOnly=!0,t.viewProps.bindDisabled(i),this.element.appendChild(i),this.textareaElem_=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.textareaElem_,t=e.scrollTop===e.scrollHeight-e.clientHeight,i=[];this.value.rawValue.forEach(s=>{s!==void 0&&i.push(this.formatter_(s))}),e.textContent=i.join(`
`),t&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class Oa{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new kx(e,{formatter:t.formatter,rows:t.rows,value:this.value,viewProps:this.viewProps})}}const uc=V("sgl");class Tx{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(uc()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(uc("i")),i.readOnly=!0,i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=t!==void 0?this.formatter_(t):""}onValueUpdate_(){this.update_()}}class Da{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Tx(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}}fe({id:"monitor-bool",type:"monitor",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=me(e,i=>({readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Lh},controller:n=>{var e;return n.value.rawValue.length===1?new Da(n.document,{formatter:tc,value:n.value,viewProps:n.viewProps}):new Oa(n.document,{formatter:tc,rows:(e=n.params.rows)!==null&&e!==void 0?e:dr.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}});class Ax extends fa{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const Ht=V("grl");class Sx{constructor(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Ht()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const i=e.createElementNS(Be,"svg");i.classList.add(Ht("g")),i.style.height=`calc(var(${Dh("containerUnitSize")}) * ${t.rows})`,this.element.appendChild(i),this.svgElem_=i;const s=e.createElementNS(Be,"polyline");this.svgElem_.appendChild(s),this.lineElem_=s;const r=e.createElement("div");r.classList.add(Ht("t"),V("tt")()),this.element.appendChild(r),this.tooltipElem_=r,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),t=this.value.rawValue.length-1,i=this.props_.get("min"),s=this.props_.get("max"),r=[];this.value.rawValue.forEach((u,h)=>{if(u===void 0)return;const d=I(h,0,t,0,e.width),p=I(u,i,s,e.height,0);r.push([d,p].join(","))}),this.lineElem_.setAttributeNS(null,"points",r.join(" "));const o=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(a===void 0){o.classList.remove(Ht("t","a"));return}const l=I(this.cursor_.rawValue,0,t,0,e.width),c=I(a,i,s,e.height,0);o.style.left=`${l}px`,o.style.top=`${c}px`,o.textContent=`${this.formatter_(a)}`,o.classList.contains(Ht("t","a"))||(o.classList.add(Ht("t","a"),Ht("t","in")),Bs(o),o.classList.remove(Ht("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class ad{constructor(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=he(-1),this.view=new Sx(e,{cursor:this.cursor_,formatter:t.formatter,rows:t.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!va(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const i=new ln(this.view.element);i.emitter.on("down",this.onGraphPointerDown_),i.emitter.on("move",this.onGraphPointerMove_),i.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return gt(e,null,t=>({max:t.required.number,min:t.required.number}),t=>(this.props.set("max",t.max),this.props.set("min",t.min),!0))}exportProps(){return wt(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const t=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(I(e.offsetX,0,t.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(I(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function po(n){return J(n.format)?we(2):n.format}function Mx(n){var e;return n.value.rawValue.length===1?new Da(n.document,{formatter:po(n.params),value:n.value,viewProps:n.viewProps}):new Oa(n.document,{formatter:po(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:dr.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}function Vx(n){var e,t,i;return new ad(n.document,{formatter:po(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:dr.monitor.defaultRows,props:L.fromObject({max:(t=n.params.max)!==null&&t!==void 0?t:100,min:(i=n.params.min)!==null&&i!==void 0?i:0}),value:n.value,viewProps:n.viewProps})}function hc(n){return n.view==="graph"}fe({id:"monitor-number",type:"monitor",accept:(n,e)=>{if(typeof n!="number")return null;const t=me(e,i=>({format:i.optional.function,max:i.optional.number,min:i.optional.number,readonly:i.required.constant(!0),rows:i.optional.number,view:i.optional.string}));return t?{initialValue:n,params:t}:null},binding:{defaultBufferSize:n=>hc(n)?64:1,reader:n=>sr},controller:n=>hc(n.params)?Vx(n):Mx(n),api:n=>n.controller.valueController instanceof ad?new Ax(n.controller):null});fe({id:"monitor-string",type:"monitor",accept:(n,e)=>{if(typeof n!="string")return null;const t=me(e,i=>({multiline:i.optional.boolean,readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Rh},controller:n=>{var e;const t=n.value;return t.rawValue.length>1||n.params.multiline?new Oa(n.document,{formatter:ho,rows:(e=n.params.rows)!==null&&e!==void 0?e:dr.monitor.defaultRows,value:t,viewProps:n.viewProps}):new Da(n.document,{formatter:ho,value:t,viewProps:n.viewProps})}});const st=V("ckr");class Lx{constructor(e,t){this.tickElems_=[],this.labelElems_=[],this.boundsWidth_=-1,this.onShowsTooltipChange_=this.onShowsTooltipChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.formatters_=t.formatters,this.unit_=t.unit,this.element=e.createElement("div"),this.element.classList.add(st(),st(void 0,`m${t.seriesId}`)),t.viewProps.bindClassModifiers(this.element),this.value_=t.value,this.value_.emitter.on("change",this.onValueChange_),t.showsTooltip.emitter.on("change",this.onShowsTooltipChange_);const i=e.createElement("div");i.classList.add(st("w")),this.element.appendChild(i),this.offsetElem_=e.createElement("div"),this.offsetElem_.classList.add(st("o")),i.appendChild(this.offsetElem_),this.svgElem_=e.createElementNS(Be,"svg"),this.svgElem_.classList.add(st("g")),this.offsetElem_.appendChild(this.svgElem_),this.tooltipElem_=e.createElement("div"),this.tooltipElem_.classList.add(V("tt")(),st("tt")),this.element.appendChild(this.tooltipElem_),this.waitToBeAdded_()}waitToBeAdded_(){const e=new IntersectionObserver(t=>{t.forEach(i=>{i.target!==this.element||i.intersectionRatio===0||(this.update(),e.disconnect())})},{root:null});e.observe(this.element)}rebuildScaleIfNeeded_(e){if(this.boundsWidth_===e)return;this.boundsWidth_=e,this.tickElems_.forEach(c=>{Zi(c)}),this.tickElems_=[],this.labelElems_.forEach(c=>{Zi(c)}),this.labelElems_=[];const t=this.element.ownerDocument,i=this.unit_.ticks,s=this.unit_.pixels,a=((Math.ceil(e/2/s)+1)*2+1)*i,l=s/i;for(let c=0;c<a;c++){const u=c*l;if(c%i===0){const h=t.createElementNS(Be,"line");h.classList.add(st("mjt")),h.setAttributeNS(null,"x1",String(u)),h.setAttributeNS(null,"y1","0"),h.setAttributeNS(null,"x2",String(u)),h.setAttributeNS(null,"y2","2"),this.svgElem_.appendChild(h),this.tickElems_.push(h);const d=t.createElement("div");d.classList.add(st("l")),d.style.left=`${u}px`,this.offsetElem_.appendChild(d),this.labelElems_.push(d)}else{const h=t.createElementNS(Be,"line");h.classList.add(st("mnt")),h.setAttributeNS(null,"x1",String(u)),h.setAttributeNS(null,"y1","0"),h.setAttributeNS(null,"x2",String(u)),h.setAttributeNS(null,"y2","2"),this.svgElem_.appendChild(h),this.tickElems_.push(h)}}}updateScale_(e){const t=this.unit_.value,i=this.unit_.pixels,s=this.value_.rawValue,r=Math.ceil(e/2/i)+1,o=s-s%t-t*r,a=c=>1-Math.pow(ae(Math.abs(s-c)/(e/2*(t/i)),0,1),10);this.labelElems_.forEach((c,u)=>{const h=o+u*t;c.textContent=this.formatters_.ring(h),c.style.opacity=String(a(h))});const l=this.unit_.ticks;this.tickElems_.forEach((c,u)=>{const h=o+u/l*t;c.style.opacity=String(a(h))})}update(){const e=this.element.getBoundingClientRect().width,t=this.unit_.value,i=this.unit_.pixels,s=this.value_.rawValue,r=Math.ceil(e/2/i)+1,o=(s%t+t*r)*(i/t),a=e/2-o;this.offsetElem_.style.transform=`translateX(${a}px)`,this.tooltipElem_.textContent=this.formatters_.text(s),this.rebuildScaleIfNeeded_(e),this.updateScale_(e)}onValueChange_(){this.update()}onShowsTooltipChange_(e){e.rawValue?this.element.classList.add(st(void 0,"tt")):this.element.classList.remove(st(void 0,"tt"))}}class Na{constructor(e,t){this.ox_=0,this.ov_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.tooltipEnabled_=t.tooltipEnabled,this.unit_=t.unit,this.showsTooltip_=he(!1),this.view=new Lx(e,{formatters:t.formatters,seriesId:t.seriesId,showsTooltip:this.showsTooltip_,unit:t.unit,value:this.value,viewProps:this.viewProps});const i=new ln(this.view.element);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}onPointerDown_(e){const t=e.data;t.point&&(this.ox_=t.point.x,this.ov_=this.value.rawValue,this.tooltipEnabled_&&(this.showsTooltip_.rawValue=!0))}onPointerMove_(e){const t=e.data;if(!t.point)return;const i=t.point.x-this.ox_,s=this.unit_.pixels,r=this.unit_.value;this.value.setRawValue(this.ov_-i/s*r,{forceEmit:!1,last:!1})}onPointerUp_(){this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0}),this.showsTooltip_.rawValue=!1}}const Dr=V("ckrtxt");class Rx{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Dr());const i=e.createElement("div");i.classList.add(Dr("r")),i.appendChild(t.ringView.element),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(Dr("t")),s.appendChild(t.textView.element),this.element.appendChild(s)}}class ld{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.rc_=new Na(e,{formatters:{ring:t.ringFormatter,text:t.textProps.get("formatter")},seriesId:t.seriesId,tooltipEnabled:!1,unit:t.ringUnit,value:this.value,viewProps:this.viewProps}),this.tc_=new xi(e,{parser:t.parser,props:t.textProps,value:this.value,viewProps:this.viewProps}),this.view=new Rx(e,{ringView:this.rc_.view,textView:this.tc_.view})}}function cd(n){const e=[],t=da(n);t&&e.push(t);const i=ha(n);return i&&e.push(i),new gi(e)}function Ox(n){return n===0||n===1||n===2?n:void 0}function dc(n){return n!==void 0?String(n):"0"}function Dx(n){const e=we(ao(n.value));return t=>{const i=e(t),s=i.substr(0,1);return i+(s==="-"||s==="+"?" ":"")}}const Nx=fe({id:"input-ring",type:"input",accept(n,e){if(typeof n!="number")return null;const t=me(e,i=>Object.assign(Object.assign({},or(i)),{series:i.optional.custom(Ox),unit:i.optional.object({pixels:i.required.number,ticks:i.required.number,value:i.required.number}),view:i.required.constant("cameraring"),wide:i.optional.boolean}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>sr,constraint:n=>cd(n.params),writer:n=>$n},controller(n){var e,t,i;const s=(e=n.params.unit)!==null&&e!==void 0?e:{ticks:5,pixels:40,value:10},r=Dx(s),o=rr(n.params,n.initialValue);if(n.params.wide)return new Na(n.document,{formatters:{ring:r,text:o.formatter},seriesId:(t=dc(n.params.series))!==null&&t!==void 0?t:"0",tooltipEnabled:!0,unit:s,value:n.value,viewProps:n.viewProps});const a=L.fromObject(o);return new ld(n.document,{parser:mt,ringFormatter:r,ringUnit:s,seriesId:(i=dc(n.params.series))!==null&&i!==void 0?i:"0",textProps:a,value:n.value,viewProps:n.viewProps})}}),Ix=fe({id:"input-wheel",type:"input",accept(n,e){if(typeof n!="number")return null;const t=me(e,i=>Object.assign(Object.assign({},or(i)),{amount:i.optional.number,view:i.required.constant("camerawheel"),wide:i.optional.boolean}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>sr,constraint:n=>cd(n.params),writer:n=>$n},controller(n){var e,t;const i=we(0),s=rr(n.params,n.initialValue);return n.params.wide?new Na(n.document,{formatters:{ring:i,text:s.formatter},seriesId:"w",tooltipEnabled:!0,unit:{ticks:10,pixels:40,value:((e=n.params.amount)!==null&&e!==void 0?e:s.pointerScale)*40},value:n.value,viewProps:n.viewProps}):new ld(n.document,{parser:mt,ringFormatter:i,ringUnit:{ticks:10,pixels:40,value:((t=n.params.amount)!==null&&t!==void 0?t:s.pointerScale)*40},seriesId:"w",textProps:L.fromObject(s),value:n.value,viewProps:n.viewProps})}}),$x="camerakit",Fx='.tp-ckrv_w{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-ckrv_w{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-ckrv_w:hover{background-color:var(--in-bg-h)}.tp-ckrv_w:focus{background-color:var(--in-bg-f)}.tp-ckrv_w:active{background-color:var(--in-bg-a)}.tp-ckrv_w:disabled{opacity:.5}.tp-ckrv{position:relative}.tp-ckrv.tp-v-disabled{opacity:.5}.tp-ckrv::before{background-color:var(--grv-fg);bottom:0;content:"";height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-ckrv::after{background-color:var(--in-fg);content:"";left:0;margin:auto;position:absolute;right:0}.tp-ckrv_w{cursor:pointer;height:calc(var(--cnt-usz));overflow:hidden}.tp-ckrv_o{height:100%;left:0;position:relative}.tp-ckrv_g{display:block;height:2px;overflow:visible;position:absolute;width:100%}.tp-ckrv_mjt{stroke:var(--in-fg);stroke-width:2;transform-origin:bottom}.tp-ckrv_mnt{stroke:var(--in-fg);stroke-width:1;transform-origin:bottom}.tp-ckrv_l{color:var(--in-fg);font-size:.9em;pointer-events:none;position:absolute;top:0;transform:translateX(-50%);white-space:pre}.tp-ckrv_tt{left:50%;top:-4px;visibility:hidden}.tp-ckrv.tp-ckrv-tt .tp-ckrv_tt{visibility:visible}.tp-ckrv.tp-ckrv-m0::before{display:none}.tp-ckrv.tp-ckrv-m0::after{bottom:0;height:6px;width:2px}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_g{bottom:0;margin:auto;transform:translateY(3px);top:0}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_mjt{transform:scaleY(3)}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_mnt{transform:scaleY(2)}.tp-ckrv.tp-ckrv-m0 .tp-ckrv_l{line-height:8px;transform:translateX(-50%) scale(0.8)}.tp-ckrv.tp-ckrv-m1::before{display:none}.tp-ckrv.tp-ckrv-m1::after{bottom:0;height:8px;width:2px}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_g{bottom:0}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_mjt{stroke-width:1;transform:scaleY(4)}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_mnt{transform:scaleY(2)}.tp-ckrv.tp-ckrv-m1 .tp-ckrv_l{line-height:12px}.tp-ckrv.tp-ckrv-m2::before{transform:translateY(3px)}.tp-ckrv.tp-ckrv-m2::after{border-radius:2px;bottom:1px;height:4px;width:4px}.tp-ckrv.tp-ckrv-m2 .tp-ckrv_g{display:none}.tp-ckrv.tp-ckrv-m2 .tp-ckrv_l{line-height:12px;transform:translateX(-50%)}.tp-ckrv.tp-ckrv-mw::before,.tp-ckrv.tp-ckrv-mw::after{display:none}.tp-ckrv.tp-ckrv-mw .tp-ckrv_g{bottom:0;opacity:.2}.tp-ckrv.tp-ckrv-mw .tp-ckrv_mjt,.tp-ckrv.tp-ckrv-mw .tp-ckrv_mnt{stroke:var(--in-fg);stroke-width:2;transform:scaleY(10)}.tp-ckrv.tp-ckrv-mw .tp-ckrv_l{display:none}.tp-ckrtxtv{display:flex}.tp-ckrtxtv_r{flex:2}.tp-ckrtxtv_t{flex:1;margin-left:4px}',Bx=[Nx,Ix],jx=Object.freeze(Object.defineProperty({__proto__:null,css:Fx,id:$x,plugins:Bx},Symbol.toStringTag,{value:"Module"}));class Ux{constructor(){D(this,"scene",new Kc);D(this,"handle",document.body.querySelector("#graphics"));D(this,"raycaster",new Pp);D(this,"debug",null);D(this,"clock",new Ep);D(this,"PARAMS",{fov:60,truck:5,pedestal:5,dolly:5,pan:0,tilt:0,roll:0});const{PARAMS:e}=this;this.scene.background=new nt(0),this.scene.fog=new kp(0,.125),this.camera=new Gc(e.fov,ce.viewport.width/ce.viewport.height,1,60),this.camera.position.x=e.truck,this.camera.position.y=e.pedestal,this.camera.position.z=e.dolly,this.camera.lookAt(0,.5,0)}init(){this.renderer=new Tp({antialias:!1}),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=Ap,this.handle.appendChild(this.renderer.domElement),this.renderer.setPixelRatio(ce.pixelRatio),window.location.hash==="#debug"&&(this.debug=new ng,this.debug.registerPlugin(jx))}render(){this.renderer.render(this.scene,this.camera)}dispose(){var e;this.handle.removeChild(this.renderer.domElement),this.renderer.dispose(),(e=this.debug)==null||e.dispose()}resize(){ce.viewport.width=this.renderer.domElement.parentElement.offsetWidth,ce.viewport.height=this.renderer.domElement.parentElement.offsetHeight,this.camera.aspect=ce.viewport.width/ce.viewport.height,this.camera.updateProjectionMatrix(),ce.fov.height=Am(this.camera,10),ce.fov.width=ce.fov.height*this.camera.aspect,this.renderer.setSize(ce.viewport.width,ce.viewport.height)}updateCamera(){const{PARAMS:e}=this;this.camera.fov=e.fov,this.camera.updateProjectionMatrix()}setDebug(){const{PARAMS:e}=this;this.debug.addFolder({title:"",expanded:!1}).addBinding(e,"fov",{view:"cameraring",series:0,unit:{ticks:5,pixels:40,value:10},min:1,max:180,step:.01}).on("change",()=>{this.updateCamera()})}}const S=new Ux;function Pt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ud(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ue={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},li={duration:.5,overwrite:!1,delay:0},Ia,be,W,Je=1e8,K=1/Je,mo=Math.PI*2,zx=mo/4,Hx=0,hd=Math.sqrt,Kx=Math.cos,Gx=Math.sin,pe=function(e){return typeof e=="string"},ie=function(e){return typeof e=="function"},It=function(e){return typeof e=="number"},$a=function(e){return typeof e>"u"},_t=function(e){return typeof e=="object"},Ve=function(e){return e!==!1},Fa=function(){return typeof window<"u"},Ps=function(e){return ie(e)||pe(e)},dd=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ge=Array.isArray,fo=/(?:-?\.?\d|\.)+/gi,pd=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Xn=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Nr=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,md=/[+-]=-?[.\d]+/,fd=/[^,'"\[\]\s]+/gi,qx=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Q,at,vo,Ba,ze={},zs={},vd,_d=function(e){return(zs=Rn(e,ze))&&Ne},ja=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},ts=function(e,t){return!t&&console.warn(e)},bd=function(e,t){return e&&(ze[e]=t)&&zs&&(zs[e]=t)||ze},ns=function(){return 0},Xx={suppressEvents:!0,isStart:!0,kill:!1},Ms={suppressEvents:!0,kill:!1},Wx={suppressEvents:!0},Ua={},nn=[],_o={},gd,Ie={},Ir={},pc=30,Vs=[],za="",Ha=function(e){var t=e[0],i,s;if(_t(t)||ie(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(s=Vs.length;s--&&!Vs[s].targetTest(t););i=Vs[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new zd(e[s],i)))||e.splice(s,1);return e},Pn=function(e){return e._gsap||Ha(et(e))[0]._gsap},wd=function(e,t,i){return(i=e[t])&&ie(i)?e[t]():$a(i)&&e.getAttribute&&e.getAttribute(t)||i},Le=function(e,t){return(e=e.split(",")).forEach(t)||e},se=function(e){return Math.round(e*1e5)/1e5||0},de=function(e){return Math.round(e*1e7)/1e7||0},ei=function(e,t){var i=t.charAt(0),s=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+s:i==="-"?e-s:i==="*"?e*s:e/s},Yx=function(e,t){for(var i=t.length,s=0;e.indexOf(t[s])<0&&++s<i;);return s<i},Hs=function(){var e=nn.length,t=nn.slice(0),i,s;for(_o={},nn.length=0,i=0;i<e;i++)s=t[i],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},xd=function(e,t,i,s){nn.length&&!be&&Hs(),e.render(t,i,be&&t<0&&(e._initted||e._startAt)),nn.length&&!be&&Hs()},yd=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(fd).length<2?t:pe(e)?e.trim():e},Cd=function(e){return e},it=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Qx=function(e){return function(t,i){for(var s in i)s in t||s==="duration"&&e||s==="ease"||(t[s]=i[s])}},Rn=function(e,t){for(var i in t)e[i]=t[i];return e},mc=function n(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=_t(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},Ks=function(e,t){var i={},s;for(s in e)s in t||(i[s]=e[s]);return i},Bi=function(e){var t=e.parent||Q,i=e.keyframes?Qx(ge(e.keyframes)):it;if(Ve(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},Zx=function(e,t){for(var i=e.length,s=i===t.length;s&&i--&&e[i]===t[i];);return i<0},Pd=function(e,t,i,s,r){var o=e[s],a;if(r)for(a=t[r];o&&o[r]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[s]=t,t._prev=o,t.parent=t._dp=e,t},pr=function(e,t,i,s){i===void 0&&(i="_first"),s===void 0&&(s="_last");var r=t._prev,o=t._next;r?r._next=o:e[i]===t&&(e[i]=o),o?o._prev=r:e[s]===t&&(e[s]=r),t._next=t._prev=t.parent=null},on=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},En=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},Jx=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},bo=function(e,t,i,s){return e._startAt&&(be?e._startAt.revert(Ms):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,s))},ey=function n(e){return!e||e._ts&&n(e.parent)},fc=function(e){return e._repeat?ci(e._tTime,e=e.duration()+e._rDelay)*e:0},ci=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},Gs=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},mr=function(e){return e._end=de(e._start+(e._tDur/Math.abs(e._ts||e._rts||K)||0))},fr=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=de(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),mr(e),i._dirty||En(i,e)),e},Ed=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=Gs(e.rawTime(),t),(!t._dur||ws(0,t.totalDuration(),i)-t._tTime>K)&&t.render(i,!0)),En(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-K}},lt=function(e,t,i,s){return t.parent&&on(t),t._start=de((It(i)?i:i||e!==Q?We(e,i,t):e._time)+t._delay),t._end=de(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Pd(e,t,"_first","_last",e._sort?"_start":0),go(t)||(e._recent=t),s||Ed(e,t),e._ts<0&&fr(e,e._tTime),e},kd=function(e,t){return(ze.ScrollTrigger||ja("scrollTrigger",t))&&ze.ScrollTrigger.create(t,e)},Td=function(e,t,i,s,r){if(Ga(e,t,r),!e._initted)return 1;if(!i&&e._pt&&!be&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&gd!==Fe.frame)return nn.push(e),e._lazy=[r,s],1},ty=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},go=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},ny=function(e,t,i,s){var r=e.ratio,o=t<0||!t&&(!e._start&&ty(e)&&!(!e._initted&&go(e))||(e._ts<0||e._dp._ts<0)&&!go(e))?0:1,a=e._rDelay,l=0,c,u,h;if(a&&e._repeat&&(l=ws(0,e._tDur,t),u=ci(l,a),e._yoyo&&u&1&&(o=1-o),u!==ci(e._tTime,a)&&(r=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==r||be||s||e._zTime===K||!t&&e._zTime){if(!e._initted&&Td(e,t,s,i,l))return;for(h=e._zTime,e._zTime=t||(i?K:0),i||(i=t&&!h),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&bo(e,t,i,!0),e._onUpdate&&!i&&je(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&je(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&on(e,1),!i&&!be&&(je(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},iy=function(e,t,i){var s;if(i>t)for(s=e._first;s&&s._start<=i;){if(s.data==="isPause"&&s._start>t)return s;s=s._next}else for(s=e._last;s&&s._start>=i;){if(s.data==="isPause"&&s._start<t)return s;s=s._prev}},ui=function(e,t,i,s){var r=e._repeat,o=de(t)||0,a=e._tTime/e._tDur;return a&&!s&&(e._time*=o/e._dur),e._dur=o,e._tDur=r?r<0?1e10:de(o*(r+1)+e._rDelay*r):o,a>0&&!s&&fr(e,e._tTime=e._tDur*a),e.parent&&mr(e),i||En(e.parent,e),e},vc=function(e){return e instanceof Ce?En(e):ui(e,e._dur)},sy={_start:0,endTime:ns,totalDuration:ns},We=function n(e,t,i){var s=e.labels,r=e._recent||sy,o=e.duration()>=Je?r.endTime(!1):e._dur,a,l,c;return pe(t)&&(isNaN(t)||t in s)?(l=t.charAt(0),c=t.substr(-1)==="%",a=t.indexOf("="),l==="<"||l===">"?(a>=0&&(t=t.replace(/=/,"")),(l==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?r:i).totalDuration()/100:1)):a<0?(t in s||(s[t]=o),s[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&i&&(l=l/100*(ge(i)?i[0]:i).totalDuration()),a>1?n(e,t.substr(0,a-1),i)+l:o+l)):t==null?o:+t},ji=function(e,t,i){var s=It(t[1]),r=(s?2:1)+(e<2?0:1),o=t[r],a,l;if(s&&(o.duration=t[1]),o.parent=i,e){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Ve(l.vars.inherit)&&l.parent;o.immediateRender=Ve(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[r-1]}return new oe(t[0],o,t[r+1])},cn=function(e,t){return e||e===0?t(e):t},ws=function(e,t,i){return i<e?e:i>t?t:i},_e=function(e,t){return!pe(e)||!(t=qx.exec(e))?"":t[1]},ry=function(e,t,i){return cn(i,function(s){return ws(e,t,s)})},wo=[].slice,Ad=function(e,t){return e&&_t(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&_t(e[0]))&&!e.nodeType&&e!==at},oy=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(s){var r;return pe(s)&&!t||Ad(s,1)?(r=i).push.apply(r,et(s)):i.push(s)})||i},et=function(e,t,i){return W&&!t&&W.selector?W.selector(e):pe(e)&&!i&&(vo||!hi())?wo.call((t||Ba).querySelectorAll(e),0):ge(e)?oy(e,i):Ad(e)?wo.call(e,0):e?[e]:[]},xo=function(e){return e=et(e)[0]||ts("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return et(t,i.querySelectorAll?i:i===e?ts("Invalid scope")||Ba.createElement("div"):e)}},Sd=function(e){return e.sort(function(){return .5-Math.random()})},Md=function(e){if(ie(e))return e;var t=_t(e)?e:{each:e},i=kn(t.ease),s=t.from||0,r=parseFloat(t.base)||0,o={},a=s>0&&s<1,l=isNaN(s)||a,c=t.axis,u=s,h=s;return pe(s)?u=h={center:.5,edges:.5,end:1}[s]||0:!a&&l&&(u=s[0],h=s[1]),function(d,p,f){var m=(f||t).length,v=o[m],_,g,w,b,x,P,C,E,y;if(!v){if(y=t.grid==="auto"?0:(t.grid||[1,Je])[1],!y){for(C=-Je;C<(C=f[y++].getBoundingClientRect().left)&&y<m;);y<m&&y--}for(v=o[m]=[],_=l?Math.min(y,m)*u-.5:s%y,g=y===Je?0:l?m*h/y-.5:s/y|0,C=0,E=Je,P=0;P<m;P++)w=P%y-_,b=g-(P/y|0),v[P]=x=c?Math.abs(c==="y"?b:w):hd(w*w+b*b),x>C&&(C=x),x<E&&(E=x);s==="random"&&Sd(v),v.max=C-E,v.min=E,v.v=m=(parseFloat(t.amount)||parseFloat(t.each)*(y>m?m-1:c?c==="y"?m/y:y:Math.max(y,m/y))||0)*(s==="edges"?-1:1),v.b=m<0?r-m:r,v.u=_e(t.amount||t.each)||0,i=i&&m<0?Bd(i):i}return m=(v[d]-v.min)/v.max||0,de(v.b+(i?i(m):m)*v.v)+v.u}},yo=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var s=de(Math.round(parseFloat(i)/e)*e*t);return(s-s%1)/t+(It(i)?0:_e(i))}},Vd=function(e,t){var i=ge(e),s,r;return!i&&_t(e)&&(s=i=e.radius||Je,e.values?(e=et(e.values),(r=!It(e[0]))&&(s*=s)):e=yo(e.increment)),cn(t,i?ie(e)?function(o){return r=e(o),Math.abs(r-o)<=s?r:o}:function(o){for(var a=parseFloat(r?o.x:o),l=parseFloat(r?o.y:0),c=Je,u=0,h=e.length,d,p;h--;)r?(d=e[h].x-a,p=e[h].y-l,d=d*d+p*p):d=Math.abs(e[h]-a),d<c&&(c=d,u=h);return u=!s||c<=s?e[u]:o,r||u===o||It(o)?u:u+_e(o)}:yo(e))},Ld=function(e,t,i,s){return cn(ge(e)?!t:i===!0?!!(i=0):!s,function(){return ge(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(s=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*s)/s})},ay=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(s){return t.reduce(function(r,o){return o(r)},s)}},ly=function(e,t){return function(i){return e(parseFloat(i))+(t||_e(i))}},cy=function(e,t,i){return Od(e,t,0,1,i)},Rd=function(e,t,i){return cn(i,function(s){return e[~~t(s)]})},uy=function n(e,t,i){var s=t-e;return ge(e)?Rd(e,n(0,e.length),t):cn(i,function(r){return(s+(r-e)%s)%s+e})},hy=function n(e,t,i){var s=t-e,r=s*2;return ge(e)?Rd(e,n(0,e.length-1),t):cn(i,function(o){return o=(r+(o-e)%r)%r||0,e+(o>s?r-o:o)})},is=function(e){for(var t=0,i="",s,r,o,a;~(s=e.indexOf("random(",t));)o=e.indexOf(")",s),a=e.charAt(s+7)==="[",r=e.substr(s+7,o-s-7).match(a?fd:fo),i+=e.substr(t,s-t)+Ld(a?r:+r[0],a?0:+r[1],+r[2]||1e-5),t=o+1;return i+e.substr(t,e.length-t)},Od=function(e,t,i,s,r){var o=t-e,a=s-i;return cn(r,function(l){return i+((l-e)/o*a||0)})},dy=function n(e,t,i,s){var r=isNaN(e+t)?0:function(p){return(1-p)*e+p*t};if(!r){var o=pe(e),a={},l,c,u,h,d;if(i===!0&&(s=1)&&(i=null),o)e={p:e},t={p:t};else if(ge(e)&&!ge(t)){for(u=[],h=e.length,d=h-2,c=1;c<h;c++)u.push(n(e[c-1],e[c]));h--,r=function(f){f*=h;var m=Math.min(d,~~f);return u[m](f-m)},i=t}else s||(e=Rn(ge(e)?[]:{},e));if(!u){for(l in t)Ka.call(a,e,l,"get",t[l]);r=function(f){return Wa(f,a)||(o?e.p:e)}}}return cn(i,r)},_c=function(e,t,i){var s=e.labels,r=Je,o,a,l;for(o in s)a=s[o]-t,a<0==!!i&&a&&r>(a=Math.abs(a))&&(l=o,r=a);return l},je=function(e,t,i){var s=e.vars,r=s[t],o=W,a=e._ctx,l,c,u;if(r)return l=s[t+"Params"],c=s.callbackScope||e,i&&nn.length&&Hs(),a&&(W=a),u=l?r.apply(c,l):r.call(c),W=o,u},Ni=function(e){return on(e),e.scrollTrigger&&e.scrollTrigger.kill(!!be),e.progress()<1&&je(e,"onInterrupt"),e},Wn,Dd=[],Nd=function(e){if(e)if(e=!e.name&&e.default||e,Fa()||e.headless){var t=e.name,i=ie(e),s=t&&!i&&e.init?function(){this._props=[]}:e,r={init:ns,render:Wa,add:Ka,kill:Ay,modifier:Ty,rawVars:0},o={targetTest:0,get:0,getSetter:Xa,aliases:{},register:0};if(hi(),e!==s){if(Ie[t])return;it(s,it(Ks(e,r),o)),Rn(s.prototype,Rn(r,Ks(e,o))),Ie[s.prop=t]=s,e.targetTest&&(Vs.push(s),Ua[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}bd(t,s),e.register&&e.register(Ne,s,Re)}else Dd.push(e)},z=255,Ii={aqua:[0,z,z],lime:[0,z,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,z],navy:[0,0,128],white:[z,z,z],olive:[128,128,0],yellow:[z,z,0],orange:[z,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[z,0,0],pink:[z,192,203],cyan:[0,z,z],transparent:[z,z,z,0]},$r=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*z+.5|0},Id=function(e,t,i){var s=e?It(e)?[e>>16,e>>8&z,e&z]:0:Ii.black,r,o,a,l,c,u,h,d,p,f;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),Ii[e])s=Ii[e];else if(e.charAt(0)==="#"){if(e.length<6&&(r=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+r+r+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&z,s&z,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&z,e&z]}else if(e.substr(0,3)==="hsl"){if(s=f=e.match(fo),!t)l=+s[0]%360/360,c=+s[1]/100,u=+s[2]/100,o=u<=.5?u*(c+1):u+c-u*c,r=u*2-o,s.length>3&&(s[3]*=1),s[0]=$r(l+1/3,r,o),s[1]=$r(l,r,o),s[2]=$r(l-1/3,r,o);else if(~e.indexOf("="))return s=e.match(pd),i&&s.length<4&&(s[3]=1),s}else s=e.match(fo)||Ii.transparent;s=s.map(Number)}return t&&!f&&(r=s[0]/z,o=s[1]/z,a=s[2]/z,h=Math.max(r,o,a),d=Math.min(r,o,a),u=(h+d)/2,h===d?l=c=0:(p=h-d,c=u>.5?p/(2-h-d):p/(h+d),l=h===r?(o-a)/p+(o<a?6:0):h===o?(a-r)/p+2:(r-o)/p+4,l*=60),s[0]=~~(l+.5),s[1]=~~(c*100+.5),s[2]=~~(u*100+.5)),i&&s.length<4&&(s[3]=1),s},$d=function(e){var t=[],i=[],s=-1;return e.split(sn).forEach(function(r){var o=r.match(Xn)||[];t.push.apply(t,o),i.push(s+=o.length+1)}),t.c=i,t},bc=function(e,t,i){var s="",r=(e+s).match(sn),o=t?"hsla(":"rgba(",a=0,l,c,u,h;if(!r)return e;if(r=r.map(function(d){return(d=Id(d,t,1))&&o+(t?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),i&&(u=$d(e),l=i.c,l.join(s)!==u.c.join(s)))for(c=e.replace(sn,"1").split(Xn),h=c.length-1;a<h;a++)s+=c[a]+(~l.indexOf(a)?r.shift()||o+"0,0,0,0)":(u.length?u:r.length?r:i).shift());if(!c)for(c=e.split(sn),h=c.length-1;a<h;a++)s+=c[a]+r[a];return s+c[h]},sn=function(){var n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in Ii)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),py=/hsl[a]?\(/,Fd=function(e){var t=e.join(" "),i;if(sn.lastIndex=0,sn.test(t))return i=py.test(t),e[1]=bc(e[1],i),e[0]=bc(e[0],i,$d(e[1])),!0},ss,Fe=function(){var n=Date.now,e=500,t=33,i=n(),s=i,r=1e3/240,o=r,a=[],l,c,u,h,d,p,f=function m(v){var _=n()-s,g=v===!0,w,b,x,P;if((_>e||_<0)&&(i+=_-t),s+=_,x=s-i,w=x-o,(w>0||g)&&(P=++h.frame,d=x-h.time*1e3,h.time=x=x/1e3,o+=w+(w>=r?4:r-w),b=1),g||(l=c(m)),b)for(p=0;p<a.length;p++)a[p](x,d,P,v)};return h={time:0,frame:0,tick:function(){f(!0)},deltaRatio:function(v){return d/(1e3/(v||60))},wake:function(){vd&&(!vo&&Fa()&&(at=vo=window,Ba=at.document||{},ze.gsap=Ne,(at.gsapVersions||(at.gsapVersions=[])).push(Ne.version),_d(zs||at.GreenSockGlobals||!at.gsap&&at||{}),Dd.forEach(Nd)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&h.sleep(),c=u||function(v){return setTimeout(v,o-h.time*1e3+1|0)},ss=1,f(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),ss=0,c=ns},lagSmoothing:function(v,_){e=v||1/0,t=Math.min(_||33,e)},fps:function(v){r=1e3/(v||240),o=h.time*1e3+r},add:function(v,_,g){var w=_?function(b,x,P,C){v(b,x,P,C),h.remove(w)}:v;return h.remove(v),a[g?"unshift":"push"](w),hi(),w},remove:function(v,_){~(_=a.indexOf(v))&&a.splice(_,1)&&p>=_&&p--},_listeners:a},h}(),hi=function(){return!ss&&Fe.wake()},M={},my=/^[\d.\-M][\d.\-,\s]/,fy=/["']/g,vy=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),s=i[0],r=1,o=i.length,a,l,c;r<o;r++)l=i[r],a=r!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[s]=isNaN(c)?c.replace(fy,"").trim():+c,s=l.substr(a+1).trim();return t},_y=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),s=e.indexOf("(",t);return e.substring(t,~s&&s<i?e.indexOf(")",i+1):i)},by=function(e){var t=(e+"").split("("),i=M[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[vy(t[1])]:_y(e).split(",").map(yd)):M._CE&&my.test(e)?M._CE("",e):i},Bd=function(e){return function(t){return 1-e(1-t)}},jd=function n(e,t){for(var i=e._first,s;i;)i instanceof Ce?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(s=i._ease,i._ease=i._yEase,i._yEase=s,i._yoyo=t)),i=i._next},kn=function(e,t){return e&&(ie(e)?e:M[e]||by(e))||t},Fn=function(e,t,i,s){i===void 0&&(i=function(l){return 1-t(1-l)}),s===void 0&&(s=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var r={easeIn:t,easeOut:i,easeInOut:s},o;return Le(e,function(a){M[a]=ze[a]=r,M[o=a.toLowerCase()]=i;for(var l in r)M[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=M[a+"."+l]=r[l]}),r},Ud=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},Fr=function n(e,t,i){var s=t>=1?t:1,r=(i||(e?.3:.45))/(t<1?t:1),o=r/mo*(Math.asin(1/s)||0),a=function(u){return u===1?1:s*Math.pow(2,-10*u)*Gx((u-o)*r)+1},l=e==="out"?a:e==="in"?function(c){return 1-a(1-c)}:Ud(a);return r=mo/r,l.config=function(c,u){return n(e,c,u)},l},Br=function n(e,t){t===void 0&&(t=1.70158);var i=function(o){return o?--o*o*((t+1)*o+t)+1:0},s=e==="out"?i:e==="in"?function(r){return 1-i(1-r)}:Ud(i);return s.config=function(r){return n(e,r)},s};Le("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Fn(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});M.Linear.easeNone=M.none=M.Linear.easeIn;Fn("Elastic",Fr("in"),Fr("out"),Fr());(function(n,e){var t=1/e,i=2*t,s=2.5*t,r=function(a){return a<t?n*a*a:a<i?n*Math.pow(a-1.5/e,2)+.75:a<s?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};Fn("Bounce",function(o){return 1-r(1-o)},r)})(7.5625,2.75);Fn("Expo",function(n){return n?Math.pow(2,10*(n-1)):0});Fn("Circ",function(n){return-(hd(1-n*n)-1)});Fn("Sine",function(n){return n===1?1:-Kx(n*zx)+1});Fn("Back",Br("in"),Br("out"),Br());M.SteppedEase=M.steps=ze.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,s=e+(t?0:1),r=t?1:0,o=1-K;return function(a){return((s*ws(0,o,a)|0)+r)*i}}};li.ease=M["quad.out"];Le("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return za+=n+","+n+"Params,"});var zd=function(e,t){this.id=Hx++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:wd,this.set=t?t.getSetter:Xa},rs=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,ui(this,+t.duration,1,1),this.data=t.data,W&&(this._ctx=W,W.data.push(this)),ss||Fe.wake()}var e=n.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,ui(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,s){if(hi(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(fr(this,i),!r._dp||r.parent||Ed(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&lt(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===K||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),xd(this,i,s)),this},e.time=function(i,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+fc(this))%(this._dur+this._rDelay)||(i?this._dur:0),s):this._time},e.totalProgress=function(i,s){return arguments.length?this.totalTime(this.totalDuration()*i,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(i,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+fc(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,s){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*r,s):this._repeat?ci(this._tTime,r)+1:1},e.timeScale=function(i,s){if(!arguments.length)return this._rts===-K?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?Gs(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-K?0:this._rts,this.totalTime(ws(-Math.abs(this._delay),this._tDur,r),s!==!1),mr(this),Jx(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(hi(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==K&&(this._tTime-=K)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&lt(s,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(Ve(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var s=this.parent||this._dp;return s?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Gs(s.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=Wx);var s=be;return be=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),be=s,this},e.globalTime=function(i){for(var s=this,r=arguments.length?i:s.rawTime();s;)r=s._start+r/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(i):r},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,vc(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var s=this._time;return this._rDelay=i,vc(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,s){return this.totalTime(We(this,i),Ve(s))},e.restart=function(i,s){return this.play().totalTime(i?-this._delay:0,Ve(s))},e.play=function(i,s){return i!=null&&this.seek(i,s),this.reversed(!1).paused(!1)},e.reverse=function(i,s){return i!=null&&this.seek(i||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(i,s){return i!=null&&this.seek(i,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-K:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-K,this},e.isActive=function(){var i=this.parent||this._dp,s=this._start,r;return!!(!i||this._ts&&this._initted&&i.isActive()&&(r=i.rawTime(!0))>=s&&r<this.endTime(!0)-K)},e.eventCallback=function(i,s,r){var o=this.vars;return arguments.length>1?(s?(o[i]=s,r&&(o[i+"Params"]=r),i==="onUpdate"&&(this._onUpdate=s)):delete o[i],this):o[i]},e.then=function(i){var s=this;return new Promise(function(r){var o=ie(i)?i:Cd,a=function(){var c=s.then;s.then=null,ie(o)&&(o=o(s))&&(o.then||o===s)&&(s.then=c),r(o),s.then=c};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?a():s._prom=a})},e.kill=function(){Ni(this)},n}();it(rs.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-K,_prom:0,_ps:!1,_rts:1});var Ce=function(n){ud(e,n);function e(i,s){var r;return i===void 0&&(i={}),r=n.call(this,i)||this,r.labels={},r.smoothChildTiming=!!i.smoothChildTiming,r.autoRemoveChildren=!!i.autoRemoveChildren,r._sort=Ve(i.sortChildren),Q&&lt(i.parent||Q,Pt(r),s),i.reversed&&r.reverse(),i.paused&&r.paused(!0),i.scrollTrigger&&kd(Pt(r),i.scrollTrigger),r}var t=e.prototype;return t.to=function(s,r,o){return ji(0,arguments,this),this},t.from=function(s,r,o){return ji(1,arguments,this),this},t.fromTo=function(s,r,o,a){return ji(2,arguments,this),this},t.set=function(s,r,o){return r.duration=0,r.parent=this,Bi(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new oe(s,r,We(this,o),1),this},t.call=function(s,r,o){return lt(this,oe.delayedCall(0,s,r),o)},t.staggerTo=function(s,r,o,a,l,c,u){return o.duration=r,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new oe(s,o,We(this,l)),this},t.staggerFrom=function(s,r,o,a,l,c,u){return o.runBackwards=1,Bi(o).immediateRender=Ve(o.immediateRender),this.staggerTo(s,r,o,a,l,c,u)},t.staggerFromTo=function(s,r,o,a,l,c,u,h){return a.startAt=o,Bi(a).immediateRender=Ve(a.immediateRender),this.staggerTo(s,r,a,l,c,u,h)},t.render=function(s,r,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=s<=0?0:de(s),h=this._zTime<0!=s<0&&(this._initted||!c),d,p,f,m,v,_,g,w,b,x,P,C;if(this!==Q&&u>l&&s>=0&&(u=l),u!==this._tTime||o||h){if(a!==this._time&&c&&(u+=this._time-a,s+=this._time-a),d=u,b=this._start,w=this._ts,_=!w,h&&(c||(a=this._zTime),(s||!r)&&(this._zTime=s)),this._repeat){if(P=this._yoyo,v=c+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(v*100+s,r,o);if(d=de(u%v),u===l?(m=this._repeat,d=c):(m=~~(u/v),m&&m===u/v&&(d=c,m--),d>c&&(d=c)),x=ci(this._tTime,v),!a&&this._tTime&&x!==m&&this._tTime-x*v-this._dur<=0&&(x=m),P&&m&1&&(d=c-d,C=1),m!==x&&!this._lock){var E=P&&x&1,y=E===(P&&m&1);if(m<x&&(E=!E),a=E?0:u%c?c:u,this._lock=1,this.render(a||(C?0:de(m*v)),r,!c)._lock=0,this._tTime=u,!r&&this.parent&&je(this,"onRepeat"),this.vars.repeatRefresh&&!C&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,y&&(this._lock=2,a=E?c:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!C&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;jd(this,C)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(g=iy(this,de(a),de(d)),g&&(u-=d-(d=g._start))),this._tTime=u,this._time=d,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,a=0),!a&&d&&!r&&!m&&(je(this,"onStart"),this._tTime!==u))return this;if(d>=a&&s>=0)for(p=this._first;p;){if(f=p._next,(p._act||d>=p._start)&&p._ts&&g!==p){if(p.parent!==this)return this.render(s,r,o);if(p.render(p._ts>0?(d-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(d-p._start)*p._ts,r,o),d!==this._time||!this._ts&&!_){g=0,f&&(u+=this._zTime=-K);break}}p=f}else{p=this._last;for(var k=s<0?s:d;p;){if(f=p._prev,(p._act||k<=p._end)&&p._ts&&g!==p){if(p.parent!==this)return this.render(s,r,o);if(p.render(p._ts>0?(k-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(k-p._start)*p._ts,r,o||be&&(p._initted||p._startAt)),d!==this._time||!this._ts&&!_){g=0,f&&(u+=this._zTime=k?-K:K);break}}p=f}}if(g&&!r&&(this.pause(),g.render(d>=a?0:-K)._zTime=d>=a?1:-1,this._ts))return this._start=b,mr(this),this.render(s,r,o);this._onUpdate&&!r&&je(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(b===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((s||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&on(this,1),!r&&!(s<0&&!a)&&(u||a||!l)&&(je(this,u===l&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(s,r){var o=this;if(It(r)||(r=We(this,r,s)),!(s instanceof rs)){if(ge(s))return s.forEach(function(a){return o.add(a,r)}),this;if(pe(s))return this.addLabel(s,r);if(ie(s))s=oe.delayedCall(0,s);else return this}return this!==s?lt(this,s,r):this},t.getChildren=function(s,r,o,a){s===void 0&&(s=!0),r===void 0&&(r=!0),o===void 0&&(o=!0),a===void 0&&(a=-Je);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof oe?r&&l.push(c):(o&&l.push(c),s&&l.push.apply(l,c.getChildren(!0,r,o)))),c=c._next;return l},t.getById=function(s){for(var r=this.getChildren(1,1,1),o=r.length;o--;)if(r[o].vars.id===s)return r[o]},t.remove=function(s){return pe(s)?this.removeLabel(s):ie(s)?this.killTweensOf(s):(pr(this,s),s===this._recent&&(this._recent=this._last),En(this))},t.totalTime=function(s,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=de(Fe.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),n.prototype.totalTime.call(this,s,r),this._forcing=0,this):this._tTime},t.addLabel=function(s,r){return this.labels[s]=We(this,r),this},t.removeLabel=function(s){return delete this.labels[s],this},t.addPause=function(s,r,o){var a=oe.delayedCall(0,r||ns,o);return a.data="isPause",this._hasPause=1,lt(this,a,We(this,s))},t.removePause=function(s){var r=this._first;for(s=We(this,s);r;)r._start===s&&r.data==="isPause"&&on(r),r=r._next},t.killTweensOf=function(s,r,o){for(var a=this.getTweensOf(s,o),l=a.length;l--;)Qt!==a[l]&&a[l].kill(s,r);return this},t.getTweensOf=function(s,r){for(var o=[],a=et(s),l=this._first,c=It(r),u;l;)l instanceof oe?Yx(l._targets,a)&&(c?(!Qt||l._initted&&l._ts)&&l.globalTime(0)<=r&&l.globalTime(l.totalDuration())>r:!r||l.isActive())&&o.push(l):(u=l.getTweensOf(a,r)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(s,r){r=r||{};var o=this,a=We(o,s),l=r,c=l.startAt,u=l.onStart,h=l.onStartParams,d=l.immediateRender,p,f=oe.to(o,it({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:r.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||K,onStart:function(){if(o.pause(),!p){var v=r.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());f._dur!==v&&ui(f,v,0,1).render(f._time,!0,!0),p=1}u&&u.apply(f,h||[])}},r));return d?f.render(0):f},t.tweenFromTo=function(s,r,o){return this.tweenTo(r,it({startAt:{time:We(this,s)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(s){return s===void 0&&(s=this._time),_c(this,We(this,s))},t.previousLabel=function(s){return s===void 0&&(s=this._time),_c(this,We(this,s),1)},t.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+K)},t.shiftChildren=function(s,r,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,c;a;)a._start>=o&&(a._start+=s,a._end+=s),a=a._next;if(r)for(c in l)l[c]>=o&&(l[c]+=s);return En(this)},t.invalidate=function(s){var r=this._first;for(this._lock=0;r;)r.invalidate(s),r=r._next;return n.prototype.invalidate.call(this,s)},t.clear=function(s){s===void 0&&(s=!0);for(var r=this._first,o;r;)o=r._next,this.remove(r),r=o;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),En(this)},t.totalDuration=function(s){var r=0,o=this,a=o._last,l=Je,c,u,h;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-s:s));if(o._dirty){for(h=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,lt(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(r-=u,(!h&&!o._dp||h&&h.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>r&&a._ts&&(r=a._end),a=c;ui(o,o===Q&&o._time>r?o._time:r,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(s){if(Q._ts&&(xd(Q,Gs(s,Q)),gd=Fe.frame),Fe.frame>=pc){pc+=Ue.autoSleep||120;var r=Q._first;if((!r||!r._ts)&&Ue.autoSleep&&Fe._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||Fe.sleep()}}},e}(rs);it(Ce.prototype,{_lock:0,_hasPause:0,_forcing:0});var gy=function(e,t,i,s,r,o,a){var l=new Re(this._pt,e,t,0,1,Wd,null,r),c=0,u=0,h,d,p,f,m,v,_,g;for(l.b=i,l.e=s,i+="",s+="",(_=~s.indexOf("random("))&&(s=is(s)),o&&(g=[i,s],o(g,e,t),i=g[0],s=g[1]),d=i.match(Nr)||[];h=Nr.exec(s);)f=h[0],m=s.substring(c,h.index),p?p=(p+1)%5:m.substr(-5)==="rgba("&&(p=1),f!==d[u++]&&(v=parseFloat(d[u-1])||0,l._pt={_next:l._pt,p:m||u===1?m:",",s:v,c:f.charAt(1)==="="?ei(v,f)-v:parseFloat(f)-v,m:p&&p<4?Math.round:0},c=Nr.lastIndex);return l.c=c<s.length?s.substring(c,s.length):"",l.fp=a,(md.test(s)||_)&&(l.e=0),this._pt=l,l},Ka=function(e,t,i,s,r,o,a,l,c,u){ie(s)&&(s=s(r||0,e,o));var h=e[t],d=i!=="get"?i:ie(h)?c?e[t.indexOf("set")||!ie(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():h,p=ie(h)?c?Py:qd:qa,f;if(pe(s)&&(~s.indexOf("random(")&&(s=is(s)),s.charAt(1)==="="&&(f=ei(d,s)+(_e(d)||0),(f||f===0)&&(s=f))),!u||d!==s||Co)return!isNaN(d*s)&&s!==""?(f=new Re(this._pt,e,t,+d||0,s-(d||0),typeof h=="boolean"?ky:Xd,0,p),c&&(f.fp=c),a&&f.modifier(a,this,e),this._pt=f):(!h&&!(t in e)&&ja(t,s),gy.call(this,e,t,d,s,p,l||Ue.stringFilter,c))},wy=function(e,t,i,s,r){if(ie(e)&&(e=Ui(e,r,t,i,s)),!_t(e)||e.style&&e.nodeType||ge(e)||dd(e))return pe(e)?Ui(e,r,t,i,s):e;var o={},a;for(a in e)o[a]=Ui(e[a],r,t,i,s);return o},Hd=function(e,t,i,s,r,o){var a,l,c,u;if(Ie[e]&&(a=new Ie[e]).init(r,a.rawVars?t[e]:wy(t[e],s,r,o,i),i,s,o)!==!1&&(i._pt=l=new Re(i._pt,r,e,0,1,a.render,a,0,a.priority),i!==Wn))for(c=i._ptLookup[i._targets.indexOf(r)],u=a._props.length;u--;)c[a._props[u]]=l;return a},Qt,Co,Ga=function n(e,t,i){var s=e.vars,r=s.ease,o=s.startAt,a=s.immediateRender,l=s.lazy,c=s.onUpdate,u=s.runBackwards,h=s.yoyoEase,d=s.keyframes,p=s.autoRevert,f=e._dur,m=e._startAt,v=e._targets,_=e.parent,g=_&&_.data==="nested"?_.vars.targets:v,w=e._overwrite==="auto"&&!Ia,b=e.timeline,x,P,C,E,y,k,H,F,B,te,q,ne,U;if(b&&(!d||!r)&&(r="none"),e._ease=kn(r,li.ease),e._yEase=h?Bd(kn(h===!0?r:h,li.ease)):0,h&&e._yoyo&&!e._repeat&&(h=e._yEase,e._yEase=e._ease,e._ease=h),e._from=!b&&!!s.runBackwards,!b||d&&!s.stagger){if(F=v[0]?Pn(v[0]).harness:0,ne=F&&s[F.prop],x=Ks(s,Ua),m&&(m._zTime<0&&m.progress(1),t<0&&u&&a&&!p?m.render(-1,!0):m.revert(u&&f?Ms:Xx),m._lazy=0),o){if(on(e._startAt=oe.set(v,it({data:"isStart",overwrite:!1,parent:_,immediateRender:!0,lazy:!m&&Ve(l),startAt:null,delay:0,onUpdate:c&&function(){return je(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(be||!a&&!p)&&e._startAt.revert(Ms),a&&f&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(u&&f&&!m){if(t&&(a=!1),C=it({overwrite:!1,data:"isFromStart",lazy:a&&!m&&Ve(l),immediateRender:a,stagger:0,parent:_},x),ne&&(C[F.prop]=ne),on(e._startAt=oe.set(v,C)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(be?e._startAt.revert(Ms):e._startAt.render(-1,!0)),e._zTime=t,!a)n(e._startAt,K,K);else if(!t)return}for(e._pt=e._ptCache=0,l=f&&Ve(l)||l&&!f,P=0;P<v.length;P++){if(y=v[P],H=y._gsap||Ha(v)[P]._gsap,e._ptLookup[P]=te={},_o[H.id]&&nn.length&&Hs(),q=g===v?P:g.indexOf(y),F&&(B=new F).init(y,ne||x,e,q,g)!==!1&&(e._pt=E=new Re(e._pt,y,B.name,0,1,B.render,B,0,B.priority),B._props.forEach(function(xe){te[xe]=E}),B.priority&&(k=1)),!F||ne)for(C in x)Ie[C]&&(B=Hd(C,x,e,q,y,g))?B.priority&&(k=1):te[C]=E=Ka.call(e,y,C,"get",x[C],q,g,0,s.stringFilter);e._op&&e._op[P]&&e.kill(y,e._op[P]),w&&e._pt&&(Qt=e,Q.killTweensOf(y,te,e.globalTime(t)),U=!e.parent,Qt=0),e._pt&&l&&(_o[H.id]=1)}k&&Yd(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!U,d&&t<=0&&b.render(Je,!0,!0)},xy=function(e,t,i,s,r,o,a,l){var c=(e._pt&&e._ptCache||(e._ptCache={}))[t],u,h,d,p;if(!c)for(c=e._ptCache[t]=[],d=e._ptLookup,p=e._targets.length;p--;){if(u=d[p][t],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return Co=1,e.vars[t]="+=0",Ga(e,a),Co=0,l?ts(t+" not eligible for reset"):1;c.push(u)}for(p=c.length;p--;)h=c[p],u=h._pt||h,u.s=(s||s===0)&&!r?s:u.s+(s||0)+o*u.c,u.c=i-u.s,h.e&&(h.e=se(i)+_e(h.e)),h.b&&(h.b=u.s+_e(h.b))},yy=function(e,t){var i=e[0]?Pn(e[0]).harness:0,s=i&&i.aliases,r,o,a,l;if(!s)return t;r=Rn({},t);for(o in s)if(o in r)for(l=s[o].split(","),a=l.length;a--;)r[l[a]]=r[o];return r},Cy=function(e,t,i,s){var r=t.ease||s||"power1.inOut",o,a;if(ge(t))a=i[e]||(i[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:r})});else for(o in t)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:t[o],e:r})},Ui=function(e,t,i,s,r){return ie(e)?e.call(t,i,s,r):pe(e)&&~e.indexOf("random(")?is(e):e},Kd=za+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Gd={};Le(Kd+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return Gd[n]=1});var oe=function(n){ud(e,n);function e(i,s,r,o){var a;typeof s=="number"&&(r.duration=s,s=r,r=null),a=n.call(this,o?s:Bi(s))||this;var l=a.vars,c=l.duration,u=l.delay,h=l.immediateRender,d=l.stagger,p=l.overwrite,f=l.keyframes,m=l.defaults,v=l.scrollTrigger,_=l.yoyoEase,g=s.parent||Q,w=(ge(i)||dd(i)?It(i[0]):"length"in s)?[i]:et(i),b,x,P,C,E,y,k,H;if(a._targets=w.length?Ha(w):ts("GSAP target "+i+" not found. https://gsap.com",!Ue.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=p,f||d||Ps(c)||Ps(u)){if(s=a.vars,b=a.timeline=new Ce({data:"nested",defaults:m||{},targets:g&&g.data==="nested"?g.vars.targets:w}),b.kill(),b.parent=b._dp=Pt(a),b._start=0,d||Ps(c)||Ps(u)){if(C=w.length,k=d&&Md(d),_t(d))for(E in d)~Kd.indexOf(E)&&(H||(H={}),H[E]=d[E]);for(x=0;x<C;x++)P=Ks(s,Gd),P.stagger=0,_&&(P.yoyoEase=_),H&&Rn(P,H),y=w[x],P.duration=+Ui(c,Pt(a),x,y,w),P.delay=(+Ui(u,Pt(a),x,y,w)||0)-a._delay,!d&&C===1&&P.delay&&(a._delay=u=P.delay,a._start+=u,P.delay=0),b.to(y,P,k?k(x,y,w):0),b._ease=M.none;b.duration()?c=u=0:a.timeline=0}else if(f){Bi(it(b.vars.defaults,{ease:"none"})),b._ease=kn(f.ease||s.ease||"none");var F=0,B,te,q;if(ge(f))f.forEach(function(ne){return b.to(w,ne,">")}),b.duration();else{P={};for(E in f)E==="ease"||E==="easeEach"||Cy(E,f[E],P,f.easeEach);for(E in P)for(B=P[E].sort(function(ne,U){return ne.t-U.t}),F=0,x=0;x<B.length;x++)te=B[x],q={ease:te.e,duration:(te.t-(x?B[x-1].t:0))/100*c},q[E]=te.v,b.to(w,q,F),F+=q.duration;b.duration()<c&&b.to({},{duration:c-b.duration()})}}c||a.duration(c=b.duration())}else a.timeline=0;return p===!0&&!Ia&&(Qt=Pt(a),Q.killTweensOf(w),Qt=0),lt(g,Pt(a),r),s.reversed&&a.reverse(),s.paused&&a.paused(!0),(h||!c&&!f&&a._start===de(g._time)&&Ve(h)&&ey(Pt(a))&&g.data!=="nested")&&(a._tTime=-K,a.render(Math.max(0,-u)||0)),v&&kd(Pt(a),v),a}var t=e.prototype;return t.render=function(s,r,o){var a=this._time,l=this._tDur,c=this._dur,u=s<0,h=s>l-K&&!u?l:s<K?0:s,d,p,f,m,v,_,g,w,b;if(!c)ny(this,s,r,o);else if(h!==this._tTime||!s||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(d=h,w=this.timeline,this._repeat){if(m=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(m*100+s,r,o);if(d=de(h%m),h===l?(f=this._repeat,d=c):(f=~~(h/m),f&&f===de(h/m)&&(d=c,f--),d>c&&(d=c)),_=this._yoyo&&f&1,_&&(b=this._yEase,d=c-d),v=ci(this._tTime,m),d===a&&!o&&this._initted&&f===v)return this._tTime=h,this;f!==v&&(w&&this._yEase&&jd(w,_),this.vars.repeatRefresh&&!_&&!this._lock&&this._time!==m&&this._initted&&(this._lock=o=1,this.render(de(m*f),!0).invalidate()._lock=0))}if(!this._initted){if(Td(this,u?s:d,o,r,h))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&f!==v))return this;if(c!==this._dur)return this.render(s,r,o)}if(this._tTime=h,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=g=(b||this._ease)(d/c),this._from&&(this.ratio=g=1-g),d&&!a&&!r&&!f&&(je(this,"onStart"),this._tTime!==h))return this;for(p=this._pt;p;)p.r(g,p.d),p=p._next;w&&w.render(s<0?s:w._dur*w._ease(d/this._dur),r,o)||this._startAt&&(this._zTime=s),this._onUpdate&&!r&&(u&&bo(this,s,r,o),je(this,"onUpdate")),this._repeat&&f!==v&&this.vars.onRepeat&&!r&&this.parent&&je(this,"onRepeat"),(h===this._tDur||!h)&&this._tTime===h&&(u&&!this._onUpdate&&bo(this,s,!0,!0),(s||!c)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&on(this,1),!r&&!(u&&!a)&&(h||a||_)&&(je(this,h===l?"onComplete":"onReverseComplete",!0),this._prom&&!(h<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),n.prototype.invalidate.call(this,s)},t.resetTo=function(s,r,o,a,l){ss||Fe.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||Ga(this,c),u=this._ease(c/this._dur),xy(this,s,r,o,a,u,c,l)?this.resetTo(s,r,o,a,1):(fr(this,0),this.parent||Pd(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(s,r){if(r===void 0&&(r="all"),!s&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?Ni(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(s,r,Qt&&Qt.vars.overwrite!==!0)._first||Ni(this),this.parent&&o!==this.timeline.totalDuration()&&ui(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=s?et(s):a,c=this._ptLookup,u=this._pt,h,d,p,f,m,v,_;if((!r||r==="all")&&Zx(a,l))return r==="all"&&(this._pt=0),Ni(this);for(h=this._op=this._op||[],r!=="all"&&(pe(r)&&(m={},Le(r,function(g){return m[g]=1}),r=m),r=yy(a,r)),_=a.length;_--;)if(~l.indexOf(a[_])){d=c[_],r==="all"?(h[_]=r,f=d,p={}):(p=h[_]=h[_]||{},f=r);for(m in f)v=d&&d[m],v&&((!("kill"in v.d)||v.d.kill(m)===!0)&&pr(this,v,"_pt"),delete d[m]),p!=="all"&&(p[m]=1)}return this._initted&&!this._pt&&u&&Ni(this),this},e.to=function(s,r){return new e(s,r,arguments[2])},e.from=function(s,r){return ji(1,arguments)},e.delayedCall=function(s,r,o,a){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:r,onReverseComplete:r,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(s,r,o){return ji(2,arguments)},e.set=function(s,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(s,r)},e.killTweensOf=function(s,r,o){return Q.killTweensOf(s,r,o)},e}(rs);it(oe.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Le("staggerTo,staggerFrom,staggerFromTo",function(n){oe[n]=function(){var e=new Ce,t=wo.call(arguments,0);return t.splice(n==="staggerFromTo"?5:4,0,0),e[n].apply(e,t)}});var qa=function(e,t,i){return e[t]=i},qd=function(e,t,i){return e[t](i)},Py=function(e,t,i,s){return e[t](s.fp,i)},Ey=function(e,t,i){return e.setAttribute(t,i)},Xa=function(e,t){return ie(e[t])?qd:$a(e[t])&&e.setAttribute?Ey:qa},Xd=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},ky=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Wd=function(e,t){var i=t._pt,s="";if(!e&&t.b)s=t.b;else if(e===1&&t.e)s=t.e;else{for(;i;)s=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+s,i=i._next;s+=t.c}t.set(t.t,t.p,s,t)},Wa=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},Ty=function(e,t,i,s){for(var r=this._pt,o;r;)o=r._next,r.p===s&&r.modifier(e,t,i),r=o},Ay=function(e){for(var t=this._pt,i,s;t;)s=t._next,t.p===e&&!t.op||t.op===e?pr(this,t,"_pt"):t.dep||(i=1),t=s;return!i},Sy=function(e,t,i,s){s.mSet(e,t,s.m.call(s.tween,i,s.mt),s)},Yd=function(e){for(var t=e._pt,i,s,r,o;t;){for(i=t._next,s=r;s&&s.pr>t.pr;)s=s._next;(t._prev=s?s._prev:o)?t._prev._next=t:r=t,(t._next=s)?s._prev=t:o=t,t=i}e._pt=r},Re=function(){function n(t,i,s,r,o,a,l,c,u){this.t=i,this.s=r,this.c=o,this.p=s,this.r=a||Xd,this.d=l||this,this.set=c||qa,this.pr=u||0,this._next=t,t&&(t._prev=this)}var e=n.prototype;return e.modifier=function(i,s,r){this.mSet=this.mSet||this.set,this.set=Sy,this.m=i,this.mt=r,this.tween=s},n}();Le(za+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return Ua[n]=1});ze.TweenMax=ze.TweenLite=oe;ze.TimelineLite=ze.TimelineMax=Ce;Q=new Ce({sortChildren:!1,defaults:li,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Ue.stringFilter=Fd;var Tn=[],Ls={},My=[],gc=0,Vy=0,jr=function(e){return(Ls[e]||My).map(function(t){return t()})},Po=function(){var e=Date.now(),t=[];e-gc>2&&(jr("matchMediaInit"),Tn.forEach(function(i){var s=i.queries,r=i.conditions,o,a,l,c;for(a in s)o=at.matchMedia(s[a]).matches,o&&(l=1),o!==r[a]&&(r[a]=o,c=1);c&&(i.revert(),l&&t.push(i))}),jr("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(s){return i.add(null,s)})}),gc=e,jr("matchMedia"))},Qd=function(){function n(t,i){this.selector=i&&xo(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Vy++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,s,r){ie(i)&&(r=s,s=i,i=ie);var o=this,a=function(){var c=W,u=o.selector,h;return c&&c!==o&&c.data.push(o),r&&(o.selector=xo(r)),W=o,h=s.apply(o,arguments),ie(h)&&o._r.push(h),W=c,o.selector=u,o.isReverted=!1,h};return o.last=a,i===ie?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},e.ignore=function(i){var s=W;W=null,i(this),W=s},e.getTweens=function(){var i=[];return this.data.forEach(function(s){return s instanceof n?i.push.apply(i,s.getTweens()):s instanceof oe&&!(s.parent&&s.parent.data==="nested")&&i.push(s)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,s){var r=this;if(i?function(){for(var a=r.getTweens(),l=r.data.length,c;l--;)c=r.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,h){return h.g-u.g||-1/0}).forEach(function(u){return u.t.revert(i)}),l=r.data.length;l--;)c=r.data[l],c instanceof Ce?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof oe)&&c.revert&&c.revert(i);r._r.forEach(function(u){return u(i,r)}),r.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),s)for(var o=Tn.length;o--;)Tn[o].id===this.id&&Tn.splice(o,1)},e.revert=function(i){this.kill(i||{})},n}(),Ly=function(){function n(t){this.contexts=[],this.scope=t,W&&W.data.push(this)}var e=n.prototype;return e.add=function(i,s,r){_t(i)||(i={matches:i});var o=new Qd(0,r||this.scope),a=o.conditions={},l,c,u;W&&!o.selector&&(o.selector=W.selector),this.contexts.push(o),s=o.add("onMatch",s),o.queries=i;for(c in i)c==="all"?u=1:(l=at.matchMedia(i[c]),l&&(Tn.indexOf(o)<0&&Tn.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(Po):l.addEventListener("change",Po)));return u&&s(o,function(h){return o.add(null,h)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(s){return s.kill(i,!0)})},n}(),qs={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(s){return Nd(s)})},timeline:function(e){return new Ce(e)},getTweensOf:function(e,t){return Q.getTweensOf(e,t)},getProperty:function(e,t,i,s){pe(e)&&(e=et(e)[0]);var r=Pn(e||{}).get,o=i?Cd:yd;return i==="native"&&(i=""),e&&(t?o((Ie[t]&&Ie[t].get||r)(e,t,i,s)):function(a,l,c){return o((Ie[a]&&Ie[a].get||r)(e,a,l,c))})},quickSetter:function(e,t,i){if(e=et(e),e.length>1){var s=e.map(function(u){return Ne.quickSetter(u,t,i)}),r=s.length;return function(u){for(var h=r;h--;)s[h](u)}}e=e[0]||{};var o=Ie[t],a=Pn(e),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var h=new o;Wn._pt=0,h.init(e,i?u+i:u,Wn,0,[e]),h.render(1,h),Wn._pt&&Wa(1,Wn)}:a.set(e,l);return o?c:function(u){return c(e,l,i?u+i:u,a,1)}},quickTo:function(e,t,i){var s,r=Ne.to(e,Rn((s={},s[t]="+=0.1",s.paused=!0,s),i||{})),o=function(l,c,u){return r.resetTo(t,l,c,u)};return o.tween=r,o},isTweening:function(e){return Q.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=kn(e.ease,li.ease)),mc(li,e||{})},config:function(e){return mc(Ue,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,s=e.plugins,r=e.defaults,o=e.extendTimeline;(s||"").split(",").forEach(function(a){return a&&!Ie[a]&&!ze[a]&&ts(t+" effect requires "+a+" plugin.")}),Ir[t]=function(a,l,c){return i(et(a),it(l||{},r),c)},o&&(Ce.prototype[t]=function(a,l,c){return this.add(Ir[t](a,_t(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){M[e]=kn(t)},parseEase:function(e,t){return arguments.length?kn(e,t):M},getById:function(e){return Q.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new Ce(e),s,r;for(i.smoothChildTiming=Ve(e.smoothChildTiming),Q.remove(i),i._dp=0,i._time=i._tTime=Q._time,s=Q._first;s;)r=s._next,(t||!(!s._dur&&s instanceof oe&&s.vars.onComplete===s._targets[0]))&&lt(i,s,s._start-s._delay),s=r;return lt(Q,i,0),i},context:function(e,t){return e?new Qd(e,t):W},matchMedia:function(e){return new Ly(e)},matchMediaRefresh:function(){return Tn.forEach(function(e){var t=e.conditions,i,s;for(s in t)t[s]&&(t[s]=!1,i=1);i&&e.revert()})||Po()},addEventListener:function(e,t){var i=Ls[e]||(Ls[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=Ls[e],s=i&&i.indexOf(t);s>=0&&i.splice(s,1)},utils:{wrap:uy,wrapYoyo:hy,distribute:Md,random:Ld,snap:Vd,normalize:cy,getUnit:_e,clamp:ry,splitColor:Id,toArray:et,selector:xo,mapRange:Od,pipe:ay,unitize:ly,interpolate:dy,shuffle:Sd},install:_d,effects:Ir,ticker:Fe,updateRoot:Ce.updateRoot,plugins:Ie,globalTimeline:Q,core:{PropTween:Re,globals:bd,Tween:oe,Timeline:Ce,Animation:rs,getCache:Pn,_removeLinkedListItem:pr,reverting:function(){return be},context:function(e){return e&&W&&(W.data.push(e),e._ctx=W),W},suppressOverwrites:function(e){return Ia=e}}};Le("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return qs[n]=oe[n]});Fe.add(Ce.updateRoot);Wn=qs.to({},{duration:0});var Ry=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},Oy=function(e,t){var i=e._targets,s,r,o;for(s in t)for(r=i.length;r--;)o=e._ptLookup[r][s],o&&(o=o.d)&&(o._pt&&(o=Ry(o,s)),o&&o.modifier&&o.modifier(t[s],e,i[r],s))},Ur=function(e,t){return{name:e,rawVars:1,init:function(s,r,o){o._onInit=function(a){var l,c;if(pe(r)&&(l={},Le(r,function(u){return l[u]=1}),r=l),t){l={};for(c in r)l[c]=t(r[c]);r=l}Oy(a,r)}}}},Ne=qs.registerPlugin({name:"attr",init:function(e,t,i,s,r){var o,a,l;this.tween=i;for(o in t)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",t[o],s,r,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var i=t._pt;i;)be?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},Ur("roundProps",yo),Ur("modifiers"),Ur("snap",Vd))||qs;oe.version=Ce.version=Ne.version="3.12.5";vd=1;Fa()&&hi();M.Power0;M.Power1;M.Power2;M.Power3;M.Power4;M.Linear;M.Quad;M.Cubic;M.Quart;M.Quint;M.Strong;M.Elastic;M.Back;M.SteppedEase;M.Bounce;M.Sine;M.Expo;M.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var wc,Zt,ti,Ya,yn,xc,Qa,Dy=function(){return typeof window<"u"},$t={},bn=180/Math.PI,ni=Math.PI/180,Gn=Math.atan2,yc=1e8,Za=/([A-Z])/g,Ny=/(left|right|width|margin|padding|x)/i,Iy=/[\s,\(]\S/,ut={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Eo=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},$y=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},Fy=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},By=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},Zd=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Jd=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},jy=function(e,t,i){return e.style[t]=i},Uy=function(e,t,i){return e.style.setProperty(t,i)},zy=function(e,t,i){return e._gsap[t]=i},Hy=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},Ky=function(e,t,i,s,r){var o=e._gsap;o.scaleX=o.scaleY=i,o.renderTransform(r,o)},Gy=function(e,t,i,s,r){var o=e._gsap;o[t]=i,o.renderTransform(r,o)},Z="transform",Oe=Z+"Origin",qy=function n(e,t){var i=this,s=this.target,r=s.style,o=s._gsap;if(e in $t&&r){if(this.tfm=this.tfm||{},e!=="transform")e=ut[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=kt(s,a)}):this.tfm[e]=o.x?o[e]:kt(s,e),e===Oe&&(this.tfm.zOrigin=o.zOrigin);else return ut.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(this.props.indexOf(Z)>=0)return;o.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(Oe,t,"")),e=Z}(r||t)&&this.props.push(e,t,r[e])},ep=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Xy=function(){var e=this.props,t=this.target,i=t.style,s=t._gsap,r,o;for(r=0;r<e.length;r+=3)e[r+1]?t[e[r]]=e[r+2]:e[r+2]?i[e[r]]=e[r+2]:i.removeProperty(e[r].substr(0,2)==="--"?e[r]:e[r].replace(Za,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)s[o]=this.tfm[o];s.svg&&(s.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),r=Qa(),(!r||!r.isStart)&&!i[Z]&&(ep(i),s.zOrigin&&i[Oe]&&(i[Oe]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},tp=function(e,t){var i={target:e,props:[],revert:Xy,save:qy};return e._gsap||Ne.core.getCache(e),t&&t.split(",").forEach(function(s){return i.save(s)}),i},np,ko=function(e,t){var i=Zt.createElementNS?Zt.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Zt.createElement(e);return i&&i.style?i:Zt.createElement(e)},ht=function n(e,t,i){var s=getComputedStyle(e);return s[t]||s.getPropertyValue(t.replace(Za,"-$1").toLowerCase())||s.getPropertyValue(t)||!i&&n(e,di(t)||t,1)||""},Cc="O,Moz,ms,Ms,Webkit".split(","),di=function(e,t,i){var s=t||yn,r=s.style,o=5;if(e in r&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(Cc[o]+e in r););return o<0?null:(o===3?"ms":o>=0?Cc[o]:"")+e},To=function(){Dy()&&window.document&&(wc=window,Zt=wc.document,ti=Zt.documentElement,yn=ko("div")||{style:{}},ko("div"),Z=di(Z),Oe=Z+"Origin",yn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",np=!!di("perspective"),Qa=Ne.core.reverting,Ya=1)},zr=function n(e){var t=ko("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,s=this.nextSibling,r=this.style.cssText,o;if(ti.appendChild(t),t.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(o=this._gsapBBox());return i&&(s?i.insertBefore(this,s):i.appendChild(this)),ti.removeChild(t),this.style.cssText=r,o},Pc=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},ip=function(e){var t;try{t=e.getBBox()}catch{t=zr.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===zr||(t=zr.call(e,!0)),t&&!t.width&&!t.x&&!t.y?{x:+Pc(e,["x","cx","x1"])||0,y:+Pc(e,["y","cy","y1"])||0,width:0,height:0}:t},sp=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&ip(e))},On=function(e,t){if(t){var i=e.style,s;t in $t&&t!==Oe&&(t=Z),i.removeProperty?(s=t.substr(0,2),(s==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(s==="--"?t:t.replace(Za,"-$1").toLowerCase())):i.removeAttribute(t)}},Jt=function(e,t,i,s,r,o){var a=new Re(e._pt,t,i,0,1,o?Jd:Zd);return e._pt=a,a.b=s,a.e=r,e._props.push(i),a},Ec={deg:1,rad:1,turn:1},Wy={grid:1,flex:1},an=function n(e,t,i,s){var r=parseFloat(i)||0,o=(i+"").trim().substr((r+"").length)||"px",a=yn.style,l=Ny.test(t),c=e.tagName.toLowerCase()==="svg",u=(c?"client":"offset")+(l?"Width":"Height"),h=100,d=s==="px",p=s==="%",f,m,v,_;if(s===o||!r||Ec[s]||Ec[o])return r;if(o!=="px"&&!d&&(r=n(e,t,i,"px")),_=e.getCTM&&sp(e),(p||o==="%")&&($t[t]||~t.indexOf("adius")))return f=_?e.getBBox()[l?"width":"height"]:e[u],se(p?r/f*h:r/100*f);if(a[l?"width":"height"]=h+(d?o:s),m=~t.indexOf("adius")||s==="em"&&e.appendChild&&!c?e:e.parentNode,_&&(m=(e.ownerSVGElement||{}).parentNode),(!m||m===Zt||!m.appendChild)&&(m=Zt.body),v=m._gsap,v&&p&&v.width&&l&&v.time===Fe.time&&!v.uncache)return se(r/v.width*h);if(p&&(t==="height"||t==="width")){var g=e.style[t];e.style[t]=h+s,f=e[u],g?e.style[t]=g:On(e,t)}else(p||o==="%")&&!Wy[ht(m,"display")]&&(a.position=ht(e,"position")),m===e&&(a.position="static"),m.appendChild(yn),f=yn[u],m.removeChild(yn),a.position="absolute";return l&&p&&(v=Pn(m),v.time=Fe.time,v.width=m[u]),se(d?f*r/h:f&&r?h/f*r:0)},kt=function(e,t,i,s){var r;return Ya||To(),t in ut&&t!=="transform"&&(t=ut[t],~t.indexOf(",")&&(t=t.split(",")[0])),$t[t]&&t!=="transform"?(r=as(e,s),r=t!=="transformOrigin"?r[t]:r.svg?r.origin:Ws(ht(e,Oe))+" "+r.zOrigin+"px"):(r=e.style[t],(!r||r==="auto"||s||~(r+"").indexOf("calc("))&&(r=Xs[t]&&Xs[t](e,t,i)||ht(e,t)||wd(e,t)||(t==="opacity"?1:0))),i&&!~(r+"").trim().indexOf(" ")?an(e,t,r,i)+i:r},Yy=function(e,t,i,s){if(!i||i==="none"){var r=di(t,e,1),o=r&&ht(e,r,1);o&&o!==i?(t=r,i=o):t==="borderColor"&&(i=ht(e,"borderTopColor"))}var a=new Re(this._pt,e.style,t,0,1,Wd),l=0,c=0,u,h,d,p,f,m,v,_,g,w,b,x;if(a.b=i,a.e=s,i+="",s+="",s==="auto"&&(m=e.style[t],e.style[t]=s,s=ht(e,t)||s,m?e.style[t]=m:On(e,t)),u=[i,s],Fd(u),i=u[0],s=u[1],d=i.match(Xn)||[],x=s.match(Xn)||[],x.length){for(;h=Xn.exec(s);)v=h[0],g=s.substring(l,h.index),f?f=(f+1)%5:(g.substr(-5)==="rgba("||g.substr(-5)==="hsla(")&&(f=1),v!==(m=d[c++]||"")&&(p=parseFloat(m)||0,b=m.substr((p+"").length),v.charAt(1)==="="&&(v=ei(p,v)+b),_=parseFloat(v),w=v.substr((_+"").length),l=Xn.lastIndex-w.length,w||(w=w||Ue.units[t]||b,l===s.length&&(s+=w,a.e+=w)),b!==w&&(p=an(e,t,m,w)||0),a._pt={_next:a._pt,p:g||c===1?g:",",s:p,c:_-p,m:f&&f<4||t==="zIndex"?Math.round:0});a.c=l<s.length?s.substring(l,s.length):""}else a.r=t==="display"&&s==="none"?Jd:Zd;return md.test(s)&&(a.e=0),this._pt=a,a},kc={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Qy=function(e){var t=e.split(" "),i=t[0],s=t[1]||"50%";return(i==="top"||i==="bottom"||s==="left"||s==="right")&&(e=i,i=s,s=e),t[0]=kc[i]||i,t[1]=kc[s]||s,t.join(" ")},Zy=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,s=i.style,r=t.u,o=i._gsap,a,l,c;if(r==="all"||r===!0)s.cssText="",l=1;else for(r=r.split(","),c=r.length;--c>-1;)a=r[c],$t[a]&&(l=1,a=a==="transformOrigin"?Oe:Z),On(i,a);l&&(On(i,Z),o&&(o.svg&&i.removeAttribute("transform"),as(i,1),o.uncache=1,ep(s)))}},Xs={clearProps:function(e,t,i,s,r){if(r.data!=="isFromStart"){var o=e._pt=new Re(e._pt,t,i,0,0,Zy);return o.u=s,o.pr=-10,o.tween=r,e._props.push(i),1}}},os=[1,0,0,1,0,0],rp={},op=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Tc=function(e){var t=ht(e,Z);return op(t)?os:t.substr(7).match(pd).map(se)},Ja=function(e,t){var i=e._gsap||Pn(e),s=e.style,r=Tc(e),o,a,l,c;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,r=[l.a,l.b,l.c,l.d,l.e,l.f],r.join(",")==="1,0,0,1,0,0"?os:r):(r===os&&!e.offsetParent&&e!==ti&&!i.svg&&(l=s.display,s.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(c=1,a=e.nextElementSibling,ti.appendChild(e)),r=Tc(e),l?s.display=l:On(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):ti.removeChild(e))),t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},Ao=function(e,t,i,s,r,o){var a=e._gsap,l=r||Ja(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,h=a.xOffset||0,d=a.yOffset||0,p=l[0],f=l[1],m=l[2],v=l[3],_=l[4],g=l[5],w=t.split(" "),b=parseFloat(w[0])||0,x=parseFloat(w[1])||0,P,C,E,y;i?l!==os&&(C=p*v-f*m)&&(E=b*(v/C)+x*(-m/C)+(m*g-v*_)/C,y=b*(-f/C)+x*(p/C)-(p*g-f*_)/C,b=E,x=y):(P=ip(e),b=P.x+(~w[0].indexOf("%")?b/100*P.width:b),x=P.y+(~(w[1]||w[0]).indexOf("%")?x/100*P.height:x)),s||s!==!1&&a.smooth?(_=b-c,g=x-u,a.xOffset=h+(_*p+g*m)-_,a.yOffset=d+(_*f+g*v)-g):a.xOffset=a.yOffset=0,a.xOrigin=b,a.yOrigin=x,a.smooth=!!s,a.origin=t,a.originIsAbsolute=!!i,e.style[Oe]="0px 0px",o&&(Jt(o,a,"xOrigin",c,b),Jt(o,a,"yOrigin",u,x),Jt(o,a,"xOffset",h,a.xOffset),Jt(o,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",b+" "+x)},as=function(e,t){var i=e._gsap||new zd(e);if("x"in i&&!t&&!i.uncache)return i;var s=e.style,r=i.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=ht(e,Oe)||"0",u,h,d,p,f,m,v,_,g,w,b,x,P,C,E,y,k,H,F,B,te,q,ne,U,xe,jn,un,Ci,hn,el,xt,dn;return u=h=d=m=v=_=g=w=b=0,p=f=1,i.svg=!!(e.getCTM&&sp(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(s[Z]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Z]!=="none"?l[Z]:"")),s.scale=s.rotate=s.translate="none"),C=Ja(e,i.svg),i.svg&&(i.uncache?(xe=e.getBBox(),c=i.xOrigin-xe.x+"px "+(i.yOrigin-xe.y)+"px",U=""):U=!t&&e.getAttribute("data-svg-origin"),Ao(e,U||c,!!U||i.originIsAbsolute,i.smooth!==!1,C)),x=i.xOrigin||0,P=i.yOrigin||0,C!==os&&(H=C[0],F=C[1],B=C[2],te=C[3],u=q=C[4],h=ne=C[5],C.length===6?(p=Math.sqrt(H*H+F*F),f=Math.sqrt(te*te+B*B),m=H||F?Gn(F,H)*bn:0,g=B||te?Gn(B,te)*bn+m:0,g&&(f*=Math.abs(Math.cos(g*ni))),i.svg&&(u-=x-(x*H+P*B),h-=P-(x*F+P*te))):(dn=C[6],el=C[7],un=C[8],Ci=C[9],hn=C[10],xt=C[11],u=C[12],h=C[13],d=C[14],E=Gn(dn,hn),v=E*bn,E&&(y=Math.cos(-E),k=Math.sin(-E),U=q*y+un*k,xe=ne*y+Ci*k,jn=dn*y+hn*k,un=q*-k+un*y,Ci=ne*-k+Ci*y,hn=dn*-k+hn*y,xt=el*-k+xt*y,q=U,ne=xe,dn=jn),E=Gn(-B,hn),_=E*bn,E&&(y=Math.cos(-E),k=Math.sin(-E),U=H*y-un*k,xe=F*y-Ci*k,jn=B*y-hn*k,xt=te*k+xt*y,H=U,F=xe,B=jn),E=Gn(F,H),m=E*bn,E&&(y=Math.cos(E),k=Math.sin(E),U=H*y+F*k,xe=q*y+ne*k,F=F*y-H*k,ne=ne*y-q*k,H=U,q=xe),v&&Math.abs(v)+Math.abs(m)>359.9&&(v=m=0,_=180-_),p=se(Math.sqrt(H*H+F*F+B*B)),f=se(Math.sqrt(ne*ne+dn*dn)),E=Gn(q,ne),g=Math.abs(E)>2e-4?E*bn:0,b=xt?1/(xt<0?-xt:xt):0),i.svg&&(U=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!op(ht(e,Z)),U&&e.setAttribute("transform",U))),Math.abs(g)>90&&Math.abs(g)<270&&(r?(p*=-1,g+=m<=0?180:-180,m+=m<=0?180:-180):(f*=-1,g+=g<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+o,i.y=h-((i.yPercent=h&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-h)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+o,i.z=d+o,i.scaleX=se(p),i.scaleY=se(f),i.rotation=se(m)+a,i.rotationX=se(v)+a,i.rotationY=se(_)+a,i.skewX=g+a,i.skewY=w+a,i.transformPerspective=b+o,(i.zOrigin=parseFloat(c.split(" ")[2])||!t&&i.zOrigin||0)&&(s[Oe]=Ws(c)),i.xOffset=i.yOffset=0,i.force3D=Ue.force3D,i.renderTransform=i.svg?e1:np?ap:Jy,i.uncache=0,i},Ws=function(e){return(e=e.split(" "))[0]+" "+e[1]},Hr=function(e,t,i){var s=_e(t);return se(parseFloat(t)+parseFloat(an(e,"x",i+"px",s)))+s},Jy=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,ap(e,t)},fn="0deg",Li="0px",vn=") ",ap=function(e,t){var i=t||this,s=i.xPercent,r=i.yPercent,o=i.x,a=i.y,l=i.z,c=i.rotation,u=i.rotationY,h=i.rotationX,d=i.skewX,p=i.skewY,f=i.scaleX,m=i.scaleY,v=i.transformPerspective,_=i.force3D,g=i.target,w=i.zOrigin,b="",x=_==="auto"&&e&&e!==1||_===!0;if(w&&(h!==fn||u!==fn)){var P=parseFloat(u)*ni,C=Math.sin(P),E=Math.cos(P),y;P=parseFloat(h)*ni,y=Math.cos(P),o=Hr(g,o,C*y*-w),a=Hr(g,a,-Math.sin(P)*-w),l=Hr(g,l,E*y*-w+w)}v!==Li&&(b+="perspective("+v+vn),(s||r)&&(b+="translate("+s+"%, "+r+"%) "),(x||o!==Li||a!==Li||l!==Li)&&(b+=l!==Li||x?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+vn),c!==fn&&(b+="rotate("+c+vn),u!==fn&&(b+="rotateY("+u+vn),h!==fn&&(b+="rotateX("+h+vn),(d!==fn||p!==fn)&&(b+="skew("+d+", "+p+vn),(f!==1||m!==1)&&(b+="scale("+f+", "+m+vn),g.style[Z]=b||"translate(0, 0)"},e1=function(e,t){var i=t||this,s=i.xPercent,r=i.yPercent,o=i.x,a=i.y,l=i.rotation,c=i.skewX,u=i.skewY,h=i.scaleX,d=i.scaleY,p=i.target,f=i.xOrigin,m=i.yOrigin,v=i.xOffset,_=i.yOffset,g=i.forceCSS,w=parseFloat(o),b=parseFloat(a),x,P,C,E,y;l=parseFloat(l),c=parseFloat(c),u=parseFloat(u),u&&(u=parseFloat(u),c+=u,l+=u),l||c?(l*=ni,c*=ni,x=Math.cos(l)*h,P=Math.sin(l)*h,C=Math.sin(l-c)*-d,E=Math.cos(l-c)*d,c&&(u*=ni,y=Math.tan(c-u),y=Math.sqrt(1+y*y),C*=y,E*=y,u&&(y=Math.tan(u),y=Math.sqrt(1+y*y),x*=y,P*=y)),x=se(x),P=se(P),C=se(C),E=se(E)):(x=h,E=d,P=C=0),(w&&!~(o+"").indexOf("px")||b&&!~(a+"").indexOf("px"))&&(w=an(p,"x",o,"px"),b=an(p,"y",a,"px")),(f||m||v||_)&&(w=se(w+f-(f*x+m*C)+v),b=se(b+m-(f*P+m*E)+_)),(s||r)&&(y=p.getBBox(),w=se(w+s/100*y.width),b=se(b+r/100*y.height)),y="matrix("+x+","+P+","+C+","+E+","+w+","+b+")",p.setAttribute("transform",y),g&&(p.style[Z]=y)},t1=function(e,t,i,s,r){var o=360,a=pe(r),l=parseFloat(r)*(a&&~r.indexOf("rad")?bn:1),c=l-s,u=s+c+"deg",h,d;return a&&(h=r.split("_")[1],h==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),h==="cw"&&c<0?c=(c+o*yc)%o-~~(c/o)*o:h==="ccw"&&c>0&&(c=(c-o*yc)%o-~~(c/o)*o)),e._pt=d=new Re(e._pt,t,i,s,c,$y),d.e=u,d.u="deg",e._props.push(i),d},Ac=function(e,t){for(var i in t)e[i]=t[i];return e},n1=function(e,t,i){var s=Ac({},i._gsap),r="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,c,u,h,d,p,f;s.svg?(c=i.getAttribute("transform"),i.setAttribute("transform",""),o[Z]=t,a=as(i,1),On(i,Z),i.setAttribute("transform",c)):(c=getComputedStyle(i)[Z],o[Z]=t,a=as(i,1),o[Z]=c);for(l in $t)c=s[l],u=a[l],c!==u&&r.indexOf(l)<0&&(p=_e(c),f=_e(u),h=p!==f?an(i,l,c,f):parseFloat(c),d=parseFloat(u),e._pt=new Re(e._pt,a,l,h,d-h,Eo),e._pt.u=f||0,e._props.push(l));Ac(a,s)};Le("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",s="Bottom",r="Left",o=(e<3?[t,i,s,r]:[t+r,t+i,s+i,s+r]).map(function(a){return e<2?n+a:"border"+a+n});Xs[e>1?"border"+n:n]=function(a,l,c,u,h){var d,p;if(arguments.length<4)return d=o.map(function(f){return kt(a,f,c)}),p=d.join(" "),p.split(d[0]).length===5?d[0]:p;d=(u+"").split(" "),p={},o.forEach(function(f,m){return p[f]=d[m]=d[m]||d[(m-1)/2|0]}),a.init(l,p,h)}});var lp={name:"css",register:To,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,s,r){var o=this._props,a=e.style,l=i.vars.startAt,c,u,h,d,p,f,m,v,_,g,w,b,x,P,C,E;Ya||To(),this.styles=this.styles||tp(e),E=this.styles.props,this.tween=i;for(m in t)if(m!=="autoRound"&&(u=t[m],!(Ie[m]&&Hd(m,t,i,s,e,r)))){if(p=typeof u,f=Xs[m],p==="function"&&(u=u.call(i,s,e,r),p=typeof u),p==="string"&&~u.indexOf("random(")&&(u=is(u)),f)f(this,e,m,u,i)&&(C=1);else if(m.substr(0,2)==="--")c=(getComputedStyle(e).getPropertyValue(m)+"").trim(),u+="",sn.lastIndex=0,sn.test(c)||(v=_e(c),_=_e(u)),_?v!==_&&(c=an(e,m,c,_)+_):v&&(u+=v),this.add(a,"setProperty",c,u,s,r,0,0,m),o.push(m),E.push(m,0,a[m]);else if(p!=="undefined"){if(l&&m in l?(c=typeof l[m]=="function"?l[m].call(i,s,e,r):l[m],pe(c)&&~c.indexOf("random(")&&(c=is(c)),_e(c+"")||c==="auto"||(c+=Ue.units[m]||_e(kt(e,m))||""),(c+"").charAt(1)==="="&&(c=kt(e,m))):c=kt(e,m),d=parseFloat(c),g=p==="string"&&u.charAt(1)==="="&&u.substr(0,2),g&&(u=u.substr(2)),h=parseFloat(u),m in ut&&(m==="autoAlpha"&&(d===1&&kt(e,"visibility")==="hidden"&&h&&(d=0),E.push("visibility",0,a.visibility),Jt(this,a,"visibility",d?"inherit":"hidden",h?"inherit":"hidden",!h)),m!=="scale"&&m!=="transform"&&(m=ut[m],~m.indexOf(",")&&(m=m.split(",")[0]))),w=m in $t,w){if(this.styles.save(m),b||(x=e._gsap,x.renderTransform&&!t.parseTransform||as(e,t.parseTransform),P=t.smoothOrigin!==!1&&x.smooth,b=this._pt=new Re(this._pt,a,Z,0,1,x.renderTransform,x,0,-1),b.dep=1),m==="scale")this._pt=new Re(this._pt,x,"scaleY",x.scaleY,(g?ei(x.scaleY,g+h):h)-x.scaleY||0,Eo),this._pt.u=0,o.push("scaleY",m),m+="X";else if(m==="transformOrigin"){E.push(Oe,0,a[Oe]),u=Qy(u),x.svg?Ao(e,u,0,P,0,this):(_=parseFloat(u.split(" ")[2])||0,_!==x.zOrigin&&Jt(this,x,"zOrigin",x.zOrigin,_),Jt(this,a,m,Ws(c),Ws(u)));continue}else if(m==="svgOrigin"){Ao(e,u,1,P,0,this);continue}else if(m in rp){t1(this,x,m,d,g?ei(d,g+u):u);continue}else if(m==="smoothOrigin"){Jt(this,x,"smooth",x.smooth,u);continue}else if(m==="force3D"){x[m]=u;continue}else if(m==="transform"){n1(this,u,e);continue}}else m in a||(m=di(m)||m);if(w||(h||h===0)&&(d||d===0)&&!Iy.test(u)&&m in a)v=(c+"").substr((d+"").length),h||(h=0),_=_e(u)||(m in Ue.units?Ue.units[m]:v),v!==_&&(d=an(e,m,c,_)),this._pt=new Re(this._pt,w?x:a,m,d,(g?ei(d,g+h):h)-d,!w&&(_==="px"||m==="zIndex")&&t.autoRound!==!1?By:Eo),this._pt.u=_||0,v!==_&&_!=="%"&&(this._pt.b=c,this._pt.r=Fy);else if(m in a)Yy.call(this,e,m,c,g?g+u:u);else if(m in e)this.add(e,m,c||e[m],g?g+u:u,s,r);else if(m!=="parseTransform"){ja(m,u);continue}w||(m in a?E.push(m,0,a[m]):E.push(m,1,c||e[m])),o.push(m)}}C&&Yd(this)},render:function(e,t){if(t.tween._time||!Qa())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:kt,aliases:ut,getSetter:function(e,t,i){var s=ut[t];return s&&s.indexOf(",")<0&&(t=s),t in $t&&t!==Oe&&(e._gsap.x||kt(e,"x"))?i&&xc===i?t==="scale"?Hy:zy:(xc=i||{})&&(t==="scale"?Ky:Gy):e.style&&!$a(e.style[t])?jy:~t.indexOf("-")?Uy:Xa(e,t)},core:{_removeProperty:On,_getMatrix:Ja}};Ne.utils.checkPrefix=di;Ne.core.getStyleSaver=tp;(function(n,e,t,i){var s=Le(n+","+e+","+t,function(r){$t[r]=1});Le(e,function(r){Ue.units[r]="deg",rp[r]=1}),ut[s[13]]=n+","+e,Le(i,function(r){var o=r.split(":");ut[o[1]]=s[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Le("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){Ue.units[n]="px"});Ne.registerPlugin(lp);var Bn=Ne.registerPlugin(lp)||Ne;Bn.core.Tween;function Sc(n,e){if(e===Sp)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===Qr||e===qc){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,s=[];if(e===Qr)for(let o=1;o<=i;o++)s.push(t.getX(0)),s.push(t.getX(o)),s.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(s.push(t.getX(o)),s.push(t.getX(o+1)),s.push(t.getX(o+2))):(s.push(t.getX(o+2)),s.push(t.getX(o+1)),s.push(t.getX(o)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=n.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class i1 extends Mp{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new l1(t)}),this.register(function(t){return new c1(t)}),this.register(function(t){return new b1(t)}),this.register(function(t){return new g1(t)}),this.register(function(t){return new w1(t)}),this.register(function(t){return new h1(t)}),this.register(function(t){return new d1(t)}),this.register(function(t){return new p1(t)}),this.register(function(t){return new m1(t)}),this.register(function(t){return new a1(t)}),this.register(function(t){return new f1(t)}),this.register(function(t){return new u1(t)}),this.register(function(t){return new _1(t)}),this.register(function(t){return new v1(t)}),this.register(function(t){return new r1(t)}),this.register(function(t){return new x1(t)}),this.register(function(t){return new y1(t)})}load(e,t,i,s){const r=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=$i.extractUrlBase(e);o=$i.resolveURL(c,this.path)}else o=$i.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){s?s(c):console.error(c),r.manager.itemError(e),r.manager.itemEnd(e)},l=new Xc(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{r.parse(c,o,function(u){t(u),r.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let r;const o={},a={},l=new TextDecoder;if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===cp){try{o[T.KHR_BINARY_GLTF]=new C1(e)}catch(h){s&&s(h);return}r=JSON.parse(o[T.KHR_BINARY_GLTF].content)}else r=JSON.parse(l.decode(e));else r=e;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new N1(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](c);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,o[h.name]=!0}if(r.extensionsUsed)for(let u=0;u<r.extensionsUsed.length;++u){const h=r.extensionsUsed[u],d=r.extensionsRequired||[];switch(h){case T.KHR_MATERIALS_UNLIT:o[h]=new o1;break;case T.KHR_DRACO_MESH_COMPRESSION:o[h]=new P1(r,this.dracoLoader);break;case T.KHR_TEXTURE_TRANSFORM:o[h]=new E1;break;case T.KHR_MESH_QUANTIZATION:o[h]=new k1;break;default:d.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,r){i.parse(e,t,s,r)})}}function s1(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const T={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class r1{constructor(e){this.parser=e,this.name=T.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const r=t[i];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const r=t.json,l=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let c;const u=new nt(16777215);l.color!==void 0&&u.setRGB(l.color[0],l.color[1],l.color[2],Rt);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new Wc(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Lp(u),c.distance=h;break;case"spot":c=new Vp(u),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Et(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),s=Promise.resolve(c),t.cache.add(i,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,r=i.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class o1{constructor(){this.name=T.KHR_MATERIALS_UNLIT}getMaterialType(){return Di}extendParams(e,t,i){const s=[];e.color=new nt(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Rt),e.opacity=o[3]}r.baseColorTexture!==void 0&&s.push(i.assignTexture(e,"map",r.baseColorTexture,zi))}return Promise.all(s)}}class a1{constructor(e){this.parser=e,this.name=T.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}}class l1{constructor(e){this.parser=e,this.name=T.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bt}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new rt(a,a)}return Promise.all(r)}}class c1{constructor(e){this.parser=e,this.name=T.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bt}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class u1{constructor(e){this.parser=e,this.name=T.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bt}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class h1{constructor(e){this.parser=e,this.name=T.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bt}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new nt(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=s.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Rt)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,zi)),o.sheenRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class d1{constructor(e){this.parser=e,this.name=T.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bt}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class p1{constructor(e){this.parser=e,this.name=T.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bt}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new nt().setRGB(a[0],a[1],a[2],Rt),Promise.all(r)}}class m1{constructor(e){this.parser=e,this.name=T.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bt}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class f1{constructor(e){this.parser=e,this.name=T.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bt}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new nt().setRGB(a[0],a[1],a[2],Rt),o.specularColorTexture!==void 0&&r.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,zi)),Promise.all(r)}}class v1{constructor(e){this.parser=e,this.name=T.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bt}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&r.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}}class _1{constructor(e){this.parser=e,this.name=T.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bt}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&r.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class b1{constructor(e){this.parser=e,this.name=T.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class g1{constructor(e){this.parser=e,this.name=T.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class w1{constructor(e){this.parser=e,this.name=T.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class x1{constructor(e){this.name=T.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(a){const l=s.byteOffset||0,c=s.byteLength||0,u=s.count,h=s.byteStride,d=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,h,d,s.mode,s.filter).then(function(p){return p.buffer}):o.ready.then(function(){const p=new ArrayBuffer(u*h);return o.decodeGltfBuffer(new Uint8Array(p),u,h,d,s.mode,s.filter),p})})}else return null}}class y1{constructor(e){this.name=T.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=t.meshes[i.mesh];for(const c of s.primitives)if(c.mode!==Ye.TRIANGLES&&c.mode!==Ye.TRIANGLE_STRIP&&c.mode!==Ye.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),h=u.isGroup?u.children:[u],d=c[0].count,p=[];for(const f of h){const m=new Os,v=new X,_=new Ro,g=new X(1,1,1),w=new Rp(f.geometry,f.material,d);for(let b=0;b<d;b++)l.TRANSLATION&&v.fromBufferAttribute(l.TRANSLATION,b),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,b),l.SCALE&&g.fromBufferAttribute(l.SCALE,b),w.setMatrixAt(b,m.compose(v,_,g));for(const b in l)if(b==="_COLOR_0"){const x=l[b];w.instanceColor=new Yc(x.array,x.itemSize,x.normalized)}else b!=="TRANSLATION"&&b!=="ROTATION"&&b!=="SCALE"&&f.geometry.setAttribute(b,l[b]);si.prototype.copy.call(w,f),this.parser.assignFinalMaterial(w),p.push(w)}return u.isGroup?(u.clear(),u.add(...p),u):p[0]}))}}const cp="glTF",Ri=12,Mc={JSON:1313821514,BIN:5130562};class C1{constructor(e){this.name=T.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Ri),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==cp)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-Ri,r=new DataView(e,Ri);let o=0;for(;o<s;){const a=r.getUint32(o,!0);o+=4;const l=r.getUint32(o,!0);if(o+=4,l===Mc.JSON){const c=new Uint8Array(e,Ri+o,a);this.content=i.decode(c)}else if(l===Mc.BIN){const c=Ri+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class P1{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=T.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const h=So[u]||u.toLowerCase();a[h]=o[u]}for(const u in e.attributes){const h=So[u]||u.toLowerCase();if(o[u]!==void 0){const d=i.accessors[e.attributes[u]],p=ii[d.componentType];c[h]=p.name,l[h]=d.normalized===!0}}return t.getDependency("bufferView",r).then(function(u){return new Promise(function(h,d){s.decodeDracoFile(u,function(p){for(const f in p.attributes){const m=p.attributes[f],v=l[f];v!==void 0&&(m.normalized=v)}h(p)},a,c,Rt,d)})})}}class E1{constructor(){this.name=T.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class k1{constructor(){this.name=T.KHR_MESH_QUANTIZATION}}class up extends nm{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)t[o]=i[r+o];return t}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=s-t,h=(i-t)/u,d=h*h,p=d*h,f=e*c,m=f-c,v=-2*p+3*d,_=p-d,g=1-v,w=_-d+h;for(let b=0;b!==a;b++){const x=o[m+b+a],P=o[m+b+l]*u,C=o[f+b+a],E=o[f+b]*u;r[b]=g*x+w*P+v*C+_*E}return r}}const T1=new Ro;class A1 extends up{interpolate_(e,t,i,s){const r=super.interpolate_(e,t,i,s);return T1.fromArray(r).normalize().toArray(r),r}}const Ye={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},ii={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Vc={9728:Jc,9729:Zr,9984:Wp,9985:Yp,9986:Qp,9987:Zc},Lc={33071:Zp,33648:Jp,10497:ye},Kr={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},So={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Kt={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},S1={CUBICSPLINE:void 0,LINEAR:iu,STEP:em},Gr={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function M1(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new eu({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:su})),n.DefaultMaterial}function _n(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Et(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function V1(n,e,t){let i=!1,s=!1,r=!1;for(let c=0,u=e.length;c<u;c++){const h=e[c];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(s=!0),h.COLOR_0!==void 0&&(r=!0),i&&s&&r)break}if(!i&&!s&&!r)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const h=e[c];if(i){const d=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;o.push(d)}if(s){const d=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(d)}if(r){const d=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(d)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],h=c[1],d=c[2];return i&&(n.morphAttributes.position=u),s&&(n.morphAttributes.normal=h),r&&(n.morphAttributes.color=d),n.morphTargetsRelative=!0,n})}function L1(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function R1(n){let e;const t=n.extensions&&n.extensions[T.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+qr(t.attributes):e=n.indices+":"+qr(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,s=n.targets.length;i<s;i++)e+=":"+qr(n.targets[i]);return e}function qr(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function Mo(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function O1(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const D1=new Os;class N1{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new s1,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=-1,r=!1,o=-1;if(typeof navigator<"u"){const a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;const l=a.match(/Version\/(\d+)/);s=i&&l?parseInt(l[1],10):-1,r=a.indexOf("Firefox")>-1,o=r?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&s<17||r&&o<98?this.textureLoader=new Qc(this.options.manager):this.textureLoader=new Op(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Xc(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:i,userData:{}};return _n(r,a,s),Et(a,s),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const o=t[s].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const o=e[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),r=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())r(u,a.children[c])};return r(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[T.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){i.load($i.resolveURL(t.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteLength||0,r=t.byteOffset||0;return i.slice(r,r+s)})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const o=Kr[s.type],a=ii[s.componentType],l=s.normalized===!0,c=new a(s.count*o);return Promise.resolve(new wn(c,o,l))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const a=o[0],l=Kr[s.type],c=ii[s.componentType],u=c.BYTES_PER_ELEMENT,h=u*l,d=s.byteOffset||0,p=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,f=s.normalized===!0;let m,v;if(p&&p!==h){const _=Math.floor(d/p),g="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+_+":"+s.count;let w=t.cache.get(g);w||(m=new c(a,_*p,s.count*p/u),w=new Dp(m,p/u),t.cache.add(g,w)),v=new tm(w,l,d%p/u,f)}else a===null?m=new c(s.count*l):m=new c(a,d,s.count*l),v=new wn(m,l,f);if(s.sparse!==void 0){const _=Kr.SCALAR,g=ii[s.sparse.indices.componentType],w=s.sparse.indices.byteOffset||0,b=s.sparse.values.byteOffset||0,x=new g(o[1],w,s.sparse.count*_),P=new c(o[2],b,s.sparse.count*l);a!==null&&(v=new wn(v.array.slice(),v.itemSize,v.normalized)),v.normalized=!1;for(let C=0,E=x.length;C<E;C++){const y=x[C];if(v.setX(y,P[C*l]),l>=2&&v.setY(y,P[C*l+1]),l>=3&&v.setZ(y,P[C*l+2]),l>=4&&v.setW(y,P[C*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}v.normalized=f}return v})}loadTexture(e){const t=this.json,i=this.options,r=t.textures[e].source,o=t.images[r];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,i){const s=this,r=this.json,o=r.textures[e],a=r.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const d=(r.samplers||{})[o.sampler]||{};return u.magFilter=Vc[d.magFilter]||Zr,u.minFilter=Vc[d.minFilter]||Zc,u.wrapS=Lc[d.wrapS]||ye,u.wrapT=Lc[d.wrapT]||ye,u.generateMipmaps=!u.isCompressedTexture&&u.minFilter!==Jc&&u.minFilter!==Zr,s.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,s=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const o=s.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(h){c=!0;const d=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(d),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(h){return new Promise(function(d,p){let f=d;t.isImageBitmapLoader===!0&&(f=function(m){const v=new sl(m);v.needsUpdate=!0,d(v)}),t.load($i.resolveURL(h,r.path),f,void 0,p)})}).then(function(h){return c===!0&&a.revokeObjectURL(l),Et(h,o),h.userData.mimeType=o.mimeType||O1(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=u,u}assignTexture(e,t,i,s){const r=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),r.extensions[T.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[T.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=r.associations.get(o);o=r.extensions[T.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),r.associations.set(o,l)}}return s!==void 0&&(o.colorSpace=s),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Np,_r.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Ip,_r.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(s||r||o){let a="ClonedMaterial:"+i.uuid+":";s&&(a+="derivative-tangents:"),r&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),r&&(l.vertexColors=!0),o&&(l.flatShading=!0),s&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return eu}loadMaterial(e){const t=this,i=this.json,s=this.extensions,r=i.materials[e];let o;const a={},l=r.extensions||{},c=[];if(l[T.KHR_MATERIALS_UNLIT]){const h=s[T.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),c.push(h.extendParams(a,r,t))}else{const h=r.pbrMetallicRoughness||{};if(a.color=new nt(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const d=h.baseColorFactor;a.color.setRGB(d[0],d[1],d[2],Rt),a.opacity=d[3]}h.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",h.baseColorTexture,zi)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}r.doubleSided===!0&&(a.side=$p);const u=r.alphaMode||Gr.OPAQUE;if(u===Gr.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===Gr.MASK&&(a.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==Di&&(c.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new rt(1,1),r.normalTexture.scale!==void 0)){const h=r.normalTexture.scale;a.normalScale.set(h,h)}if(r.occlusionTexture!==void 0&&o!==Di&&(c.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==Di){const h=r.emissiveFactor;a.emissive=new nt().setRGB(h[0],h[1],h[2],Rt)}return r.emissiveTexture!==void 0&&o!==Di&&c.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture,zi)),Promise.all(c).then(function(){const h=new o(a);return r.name&&(h.name=r.name),Et(h,r),t.associations.set(h,{materials:e}),r.extensions&&_n(s,h,r),h})}createUniqueName(e){const t=Fp.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function r(a){return i[T.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return Rc(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=R1(c),h=s[u];if(h)o.push(h.promise);else{let d;c.extensions&&c.extensions[T.KHR_DRACO_MESH_COMPRESSION]?d=r(c):d=Rc(new tu,c,t),s[u]={primitive:c,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,s=this.extensions,r=i.meshes[e],o=r.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?M1(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],h=[];for(let p=0,f=u.length;p<f;p++){const m=u[p],v=o[p];let _;const g=c[p];if(v.mode===Ye.TRIANGLES||v.mode===Ye.TRIANGLE_STRIP||v.mode===Ye.TRIANGLE_FAN||v.mode===void 0)_=r.isSkinnedMesh===!0?new Bp(m,g):new pi(m,g),_.isSkinnedMesh===!0&&_.normalizeSkinWeights(),v.mode===Ye.TRIANGLE_STRIP?_.geometry=Sc(_.geometry,qc):v.mode===Ye.TRIANGLE_FAN&&(_.geometry=Sc(_.geometry,Qr));else if(v.mode===Ye.LINES)_=new jp(m,g);else if(v.mode===Ye.LINE_STRIP)_=new Up(m,g);else if(v.mode===Ye.LINE_LOOP)_=new zp(m,g);else if(v.mode===Ye.POINTS)_=new Hp(m,g);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(_.geometry.morphAttributes).length>0&&L1(_,r),_.name=t.createUniqueName(r.name||"mesh_"+e),Et(_,r),v.extensions&&_n(s,_,v),t.assignFinalMaterial(_),h.push(_)}for(let p=0,f=h.length;p<f;p++)t.associations.set(h[p],{meshes:e,primitives:p});if(h.length===1)return r.extensions&&_n(s,h[0],r),h[0];const d=new Fi;r.extensions&&_n(s,d,r),t.associations.set(d,{meshes:e});for(let p=0,f=h.length;p<f;p++)d.add(h[p]);return d})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Gc(Kp.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(t=new nu(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Et(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let s=0,r=t.joints.length;s<r;s++)i.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const r=s.pop(),o=s,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const h=o[c];if(h){a.push(h);const d=new Os;r!==null&&d.fromArray(r.array,c*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Gp(a,l)})}loadAnimation(e){const t=this.json,i=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let h=0,d=s.channels.length;h<d;h++){const p=s.channels[h],f=s.samplers[p.sampler],m=p.target,v=m.node,_=s.parameters!==void 0?s.parameters[f.input]:f.input,g=s.parameters!==void 0?s.parameters[f.output]:f.output;m.node!==void 0&&(o.push(this.getDependency("node",v)),a.push(this.getDependency("accessor",_)),l.push(this.getDependency("accessor",g)),c.push(f),u.push(m))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(h){const d=h[0],p=h[1],f=h[2],m=h[3],v=h[4],_=[];for(let g=0,w=d.length;g<w;g++){const b=d[g],x=p[g],P=f[g],C=m[g],E=v[g];if(b===void 0)continue;b.updateMatrix&&b.updateMatrix();const y=i._createAnimationTracks(b,x,P,C,E);if(y)for(let k=0;k<y.length;k++)_.push(y[k])}return new qp(r,void 0,_)})}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(r){const o=i._getNodeRef(i.meshCache,s.mesh,r);return s.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=s.weights.length;l<c;l++)a.morphTargetInfluences[l]=s.weights[l]}),o})}loadNode(e){const t=this.json,i=this,s=t.nodes[e],r=i._loadNodeShallow(e),o=[],a=s.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([r,Promise.all(o),l]).then(function(c){const u=c[0],h=c[1],d=c[2];d!==null&&u.traverse(function(p){p.isSkinnedMesh&&p.bind(d,D1)});for(let p=0,f=h.length;p<f;p++)u.add(h[p]);return u})}_loadNodeShallow(e){const t=this.json,i=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],o=r.name?s.createUniqueName(r.name):"",a=[],l=s._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),r.camera!==void 0&&a.push(s.getDependency("camera",r.camera).then(function(c){return s._getNodeRef(s.cameraCache,r.camera,c)})),s._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(r.isBone===!0?u=new Xp:c.length>1?u=new Fi:c.length===1?u=c[0]:u=new si,u!==c[0])for(let h=0,d=c.length;h<d;h++)u.add(c[h]);if(r.name&&(u.userData.name=r.name,u.name=o),Et(u,r),r.extensions&&_n(i,u,r),r.matrix!==void 0){const h=new Os;h.fromArray(r.matrix),u.applyMatrix4(h)}else r.translation!==void 0&&u.position.fromArray(r.translation),r.rotation!==void 0&&u.quaternion.fromArray(r.rotation),r.scale!==void 0&&u.scale.fromArray(r.scale);return s.associations.has(u)||s.associations.set(u,{}),s.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,r=new Fi;i.name&&(r.name=s.createUniqueName(i.name)),Et(r,i),i.extensions&&_n(t,r,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(s.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,h=l.length;u<h;u++)r.add(l[u]);const c=u=>{const h=new Map;for(const[d,p]of s.associations)(d instanceof _r||d instanceof sl)&&h.set(d,p);return u.traverse(d=>{const p=s.associations.get(d);p!=null&&h.set(d,p)}),h};return s.associations=c(r),r})}_createAnimationTracks(e,t,i,s,r){const o=[],a=e.name?e.name:e.uuid,l=[];Kt[r.path]===Kt.weights?e.traverse(function(d){d.morphTargetInfluences&&l.push(d.name?d.name:d.uuid)}):l.push(a);let c;switch(Kt[r.path]){case Kt.weights:c=ol;break;case Kt.rotation:c=al;break;case Kt.position:case Kt.scale:c=rl;break;default:switch(i.itemSize){case 1:c=ol;break;case 2:case 3:default:c=rl;break}break}const u=s.interpolation!==void 0?S1[s.interpolation]:iu,h=this._getArrayFromAccessor(i);for(let d=0,p=l.length;d<p;d++){const f=new c(l[d]+"."+Kt[r.path],t.array,h,u);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(f),o.push(f)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=Mo(t.constructor),s=new Float32Array(t.length);for(let r=0,o=t.length;r<o;r++)s[r]=t[r]*i;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const s=this instanceof al?A1:up;return new s(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function I1(n,e,t){const i=e.attributes,s=new ru;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(s.set(new X(l[0],l[1],l[2]),new X(c[0],c[1],c[2])),a.normalized){const u=Mo(ii[a.componentType]);s.min.multiplyScalar(u),s.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const a=new X,l=new X;for(let c=0,u=r.length;c<u;c++){const h=r[c];if(h.POSITION!==void 0){const d=t.json.accessors[h.POSITION],p=d.min,f=d.max;if(p!==void 0&&f!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(f[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(f[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(f[2]))),d.normalized){const m=Mo(ii[d.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(a)}n.boundingBox=s;const o=new ou;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=o}function Rc(n,e,t){const i=e.attributes,s=[];function r(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=So[o]||o.toLowerCase();a in n.attributes||s.push(r(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});s.push(o)}return il.workingColorSpace!==Rt&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${il.workingColorSpace}" not supported.`),Et(n,e),I1(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?V1(n,e.targets,t):n})}const $1=["Love.png"],F1=[{id:8212,index:570,char:"",width:18,height:3,xoffset:0,yoffset:11,xadvance:17,chnl:15,x:74,y:195,page:0},{id:201,index:27,char:"",width:10,height:17,xoffset:0,yoffset:1,xadvance:10,chnl:15,x:97,y:190,page:0},{id:106,index:192,char:"j",width:5,height:16,xoffset:-1,yoffset:5,xadvance:3,chnl:15,x:112,y:190,page:0},{id:87,index:109,char:"W",width:16,height:13,xoffset:-1,yoffset:5,xadvance:15,chnl:15,x:122,y:190,page:0},{id:37,index:666,char:"%",width:15,height:14,xoffset:-1,yoffset:5,xadvance:13,chnl:15,x:143,y:190,page:0},{id:98,index:154,char:"b",width:10,height:14,xoffset:0,yoffset:5,xadvance:9,chnl:15,x:163,y:189,page:0},{id:100,index:161,char:"d",width:10,height:14,xoffset:-1,yoffset:5,xadvance:9,chnl:15,x:178,y:189,page:0},{id:102,index:174,char:"f",width:6,height:14,xoffset:-1,yoffset:4,xadvance:5,chnl:15,x:0,y:978,page:0},{id:119,index:251,char:"w",width:14,height:10,xoffset:-1,yoffset:8,xadvance:12,chnl:15,x:74,y:203,page:0},{id:67,index:16,char:"C",width:12,height:14,xoffset:0,yoffset:4,xadvance:11,chnl:15,x:0,y:997,page:0},{id:71,index:36,char:"G",width:12,height:14,xoffset:0,yoffset:4,xadvance:12,chnl:15,x:11,y:978,page:0},{id:74,index:53,char:"J",width:9,height:14,xoffset:-1,yoffset:5,xadvance:8,chnl:15,x:17,y:997,page:0},{id:79,index:69,char:"O",width:13,height:14,xoffset:0,yoffset:4,xadvance:12,chnl:15,x:28,y:978,page:0},{id:81,index:81,char:"Q",width:13,height:14,xoffset:0,yoffset:4,xadvance:12,chnl:15,x:31,y:997,page:0},{id:83,index:86,char:"S",width:11,height:14,xoffset:-1,yoffset:4,xadvance:10,chnl:15,x:46,y:978,page:0},{id:85,index:97,char:"U",width:11,height:14,xoffset:0,yoffset:5,xadvance:11,chnl:15,x:49,y:997,page:0},{id:48,index:440,char:"0",width:11,height:14,xoffset:0,yoffset:5,xadvance:10,chnl:15,x:62,y:978,page:0},{id:51,index:443,char:"3",width:10,height:14,xoffset:0,yoffset:5,xadvance:10,chnl:15,x:65,y:997,page:0},{id:54,index:446,char:"6",width:10,height:14,xoffset:0,yoffset:5,xadvance:10,chnl:15,x:78,y:978,page:0},{id:56,index:448,char:"8",width:10,height:14,xoffset:0,yoffset:5,xadvance:10,chnl:15,x:80,y:997,page:0},{id:57,index:449,char:"9",width:10,height:14,xoffset:0,yoffset:5,xadvance:10,chnl:15,x:93,y:978,page:0},{id:233,index:166,char:"",width:10,height:14,xoffset:-1,yoffset:4,xadvance:9,chnl:15,x:95,y:997,page:0},{id:103,index:175,char:"g",width:10,height:13,xoffset:-1,yoffset:8,xadvance:9,chnl:15,x:108,y:978,page:0},{id:104,index:180,char:"h",width:9,height:13,xoffset:0,yoffset:5,xadvance:9,chnl:15,x:110,y:996,page:0},{id:105,index:183,char:"i",width:4,height:13,xoffset:0,yoffset:5,xadvance:3,chnl:15,x:123,y:978,page:0},{id:107,index:195,char:"k",width:9,height:13,xoffset:0,yoffset:5,xadvance:8,chnl:15,x:124,y:996,page:0},{id:108,index:198,char:"l",width:4,height:13,xoffset:0,yoffset:5,xadvance:3,chnl:15,x:132,y:978,page:0},{id:109,index:203,char:"m",width:13,height:10,xoffset:0,yoffset:8,xadvance:13,chnl:15,x:110,y:1014,page:0},{id:112,index:220,char:"p",width:10,height:13,xoffset:0,yoffset:8,xadvance:9,chnl:15,x:138,y:996,page:0},{id:113,index:222,char:"q",width:10,height:13,xoffset:-1,yoffset:8,xadvance:9,chnl:15,x:141,y:978,page:0},{id:116,index:234,char:"t",width:6,height:13,xoffset:-1,yoffset:5,xadvance:5,chnl:15,x:153,y:996,page:0},{id:121,index:257,char:"y",width:10,height:13,xoffset:-1,yoffset:8,xadvance:8,chnl:15,x:156,y:978,page:0},{id:65,index:4,char:"A",width:12,height:13,xoffset:-1,yoffset:5,xadvance:11,chnl:15,x:164,y:996,page:0},{id:66,index:15,char:"B",width:11,height:13,xoffset:0,yoffset:5,xadvance:11,chnl:15,x:171,y:978,page:0},{id:68,index:22,char:"D",width:11,height:13,xoffset:0,yoffset:5,xadvance:11,chnl:15,x:181,y:996,page:0},{id:69,index:26,char:"E",width:10,height:13,xoffset:0,yoffset:5,xadvance:10,chnl:15,x:186,y:789,page:0},{id:70,index:35,char:"F",width:10,height:13,xoffset:0,yoffset:5,xadvance:9,chnl:15,x:186,y:807,page:0},{id:72,index:41,char:"H",width:11,height:13,xoffset:0,yoffset:5,xadvance:11,chnl:15,x:186,y:825,page:0},{id:73,index:44,char:"I",width:4,height:13,xoffset:0,yoffset:5,xadvance:4,chnl:15,x:201,y:789,page:0},{id:75,index:55,char:"K",width:12,height:13,xoffset:0,yoffset:5,xadvance:10,chnl:15,x:201,y:807,page:0},{id:76,index:57,char:"L",width:10,height:13,xoffset:0,yoffset:5,xadvance:9,chnl:15,x:210,y:789,page:0},{id:77,index:62,char:"M",width:13,height:13,xoffset:0,yoffset:5,xadvance:14,chnl:15,x:186,y:843,page:0},{id:78,index:63,char:"N",width:11,height:13,xoffset:0,yoffset:5,xadvance:11,chnl:15,x:202,y:825,page:0},{id:80,index:79,char:"P",width:11,height:13,xoffset:0,yoffset:5,xadvance:10,chnl:15,x:186,y:861,page:0},{id:82,index:82,char:"R",width:11,height:13,xoffset:0,yoffset:5,xadvance:10,chnl:15,x:186,y:879,page:0},{id:84,index:92,char:"T",width:11,height:13,xoffset:-1,yoffset:5,xadvance:10,chnl:15,x:186,y:897,page:0},{id:86,index:108,char:"V",width:12,height:13,xoffset:-1,yoffset:5,xadvance:10,chnl:15,x:186,y:915,page:0},{id:88,index:114,char:"X",width:12,height:13,xoffset:-1,yoffset:5,xadvance:10,chnl:15,x:186,y:933,page:0},{id:89,index:115,char:"Y",width:12,height:13,xoffset:-1,yoffset:5,xadvance:10,chnl:15,x:186,y:951,page:0},{id:90,index:120,char:"Z",width:11,height:13,xoffset:-1,yoffset:5,xadvance:10,chnl:15,x:187,y:969,page:0},{id:49,index:441,char:"1",width:6,height:13,xoffset:-1,yoffset:5,xadvance:5,chnl:15,x:197,y:987,page:0},{id:50,index:442,char:"2",width:10,height:13,xoffset:-1,yoffset:5,xadvance:9,chnl:15,x:197,y:1005,page:0},{id:52,index:444,char:"4",width:11,height:13,xoffset:-1,yoffset:5,xadvance:9,chnl:15,x:202,y:861,page:0},{id:53,index:445,char:"5",width:10,height:13,xoffset:0,yoffset:5,xadvance:9,chnl:15,x:204,y:843,page:0},{id:55,index:447,char:"7",width:10,height:13,xoffset:-1,yoffset:5,xadvance:8,chnl:15,x:202,y:879,page:0},{id:47,index:550,char:"/",width:8,height:13,xoffset:-1,yoffset:5,xadvance:6,chnl:15,x:202,y:897,page:0},{id:97,index:143,char:"a",width:10,height:11,xoffset:-1,yoffset:8,xadvance:8,chnl:15,x:218,y:807,page:0},{id:99,index:155,char:"c",width:10,height:11,xoffset:-1,yoffset:8,xadvance:8,chnl:15,x:225,y:789,page:0},{id:101,index:165,char:"e",width:10,height:11,xoffset:-1,yoffset:8,xadvance:9,chnl:15,x:218,y:823,page:0},{id:111,index:210,char:"o",width:10,height:11,xoffset:-1,yoffset:8,xadvance:9,chnl:15,x:203,y:915,page:0},{id:115,index:227,char:"s",width:9,height:11,xoffset:-1,yoffset:8,xadvance:8,chnl:15,x:215,y:897,page:0},{id:110,index:204,char:"n",width:9,height:10,xoffset:0,yoffset:8,xadvance:9,chnl:15,x:128,y:1014,page:0},{id:114,index:223,char:"r",width:7,height:10,xoffset:0,yoffset:8,xadvance:6,chnl:15,x:142,y:1014,page:0},{id:117,index:239,char:"u",width:9,height:10,xoffset:0,yoffset:8,xadvance:9,chnl:15,x:154,y:1014,page:0},{id:118,index:250,char:"v",width:10,height:10,xoffset:-1,yoffset:8,xadvance:8,chnl:15,x:168,y:1014,page:0},{id:120,index:256,char:"x",width:10,height:10,xoffset:-1,yoffset:8,xadvance:8,chnl:15,x:217,y:879,page:0},{id:122,index:262,char:"z",width:9,height:10,xoffset:-1,yoffset:8,xadvance:7,chnl:15,x:183,y:1014,page:0},{id:58,index:539,char:":",width:4,height:9,xoffset:0,yoffset:9,xadvance:3,chnl:15,x:218,y:861,page:0},{id:45,index:567,char:"-",width:6,height:3,xoffset:0,yoffset:11,xadvance:6,chnl:15,x:93,y:212,page:0},{id:39,index:599,char:"'",width:3,height:6,xoffset:0,yoffset:5,xadvance:3,chnl:15,x:122,y:209,page:0},{id:44,index:538,char:",",width:4,height:6,xoffset:0,yoffset:14,xadvance:3,chnl:15,x:130,y:209,page:0},{id:46,index:537,char:".",width:4,height:4,xoffset:0,yoffset:14,xadvance:3,chnl:15,x:187,y:987,page:0},{id:32,index:3,char:" ",width:0,height:0,xoffset:-1,yoffset:16,xadvance:3,chnl:15,x:79,y:190,page:0}],B1={face:"PPNeueMontreal-Medium",size:16,bold:0,italic:0,charset:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","","","-",".","'",",","",":","/","%"," "],unicode:1,stretchH:100,smooth:1,aa:1,padding:[1,1,1,1],spacing:[0,0],outline:0},j1={lineHeight:19,base:16,scaleW:1024,scaleH:1024,pages:1,packed:0,alphaChnl:0,redChnl:0,greenChnl:0,blueChnl:0},U1={fieldType:"msdf",distanceRange:3},z1=[],H1={pages:$1,chars:F1,info:B1,common:j1,distanceField:U1,kernings:z1};class K1{constructor(){D(this,"manager",new im);D(this,"textureLoader",new Qc(this.manager));D(this,"gltfLoader",new i1(this.manager))}init(){this.PPNeueMontrealMedium=H1,this.concrete={map:this.textureLoader.load("/assets/textures/concrete/Concrete_019_BaseColor.jpg"),normal:this.textureLoader.load("/assets/textures/concrete/Concrete_019_Normal.jpg"),roughness:this.textureLoader.load("/assets/textures/concrete/Concrete_019_Roughness.jpg"),bump:this.textureLoader.load("/assets/textures/concrete/Concrete_019_Height.png"),ao:this.textureLoader.load("/assets/textures/concrete/Concrete_019_AmbientOcclusion.jpg")},this.atlas=this.textureLoader.load("/assets/textures/fonts/Love.png"),this.gltfLoader.load("/assets/models/character.glb",e=>{e.scene.matrixAutoUpdate=!1,e.scene.traverse(function(t){if(t.isMesh){const i=new sm({});i.roughness=.5527864098548889,i.reflectivity=.5,t.material=i,t.name==="Alpha_Joints"?t.material.color=new nt(0):t.material.color=new nt(16777215),t.matrixAutoUpdate=!1,t.castShadow=!0,t.material.side=su}}),this.dummy=e})}}const j=new K1,Oc=new cu,Dc=new cu;let Xr;const G1=ke(([n])=>tt(n.rgb.mul(n.a),n.a)).setLayout({name:"premult",type:"vec4",inputs:[{name:"color",type:"vec4"}]}),q1=ke(([n])=>(um(n.a.equal(0),()=>tt(0)),tt(n.rgb.div(n.a),n.a))).setLayout({name:"unpremult",type:"vec4",inputs:[{name:"color",type:"vec4"}]});class X1 extends am{static get type(){return"GaussianBlurNode"}constructor(e,t=null,i=2){super("vec4"),this.textureNode=e,this.directionNode=t,this.sigma=i,this._invSize=ot(new rt),this._passDirection=ot(new rt),this._horizontalRT=new ll(1,1,{depthBuffer:!1}),this._horizontalRT.texture.name="GaussianBlurNode.horizontal",this._verticalRT=new ll(1,1,{depthBuffer:!1}),this._verticalRT.texture.name="GaussianBlurNode.vertical",this._textureNode=lm(this,this._verticalRT.texture),this._textureNode.uvNode=e.uvNode,this.updateBeforeType=cm.FRAME,this.resolution=new rt(1,1),this.premultipliedAlpha=!1}setPremultipliedAlpha(e){return this.premultipliedAlpha=e,this}getPremultipliedAlpha(){return this.premultipliedAlpha}setSize(e,t){e=Math.max(Math.round(e*this.resolution.x),1),t=Math.max(Math.round(t*this.resolution.y),1),this._invSize.value.set(1/e,1/t),this._horizontalRT.setSize(e,t),this._verticalRT.setSize(e,t)}updateBefore(e){const{renderer:t}=e;Xr=cl.resetRendererState(t,Xr);const i=this.textureNode,s=i.value,r=i.value;Oc.material=this._material,Dc.material=this._material,this.setSize(s.image.width,s.image.height);const o=s.type;this._horizontalRT.texture.type=o,this._verticalRT.texture.type=o,t.setRenderTarget(this._horizontalRT),this._passDirection.value.set(1,0),Oc.render(t),i.value=this._horizontalRT.texture,t.setRenderTarget(this._verticalRT),this._passDirection.value.set(0,1),Dc.render(t),i.value=r,cl.restoreRendererState(t,Xr)}getTextureNode(){return this._textureNode}setup(e){const t=this.textureNode,i=t.uvNode||qt(),s=Ae(this.directionNode||1);let r,o;this.premultipliedAlpha?(r=u=>G1(t.uv(u)),o=u=>q1(u)):(r=u=>t.uv(u),o=u=>u);const a=ke(()=>{const u=3+2*this.sigma,h=this._getCoefficients(u),d=this._invSize,p=s.mul(this._passDirection),f=Xt(h[0]).toVar(),m=tt(r(i).mul(f)).toVar();for(let v=1;v<u;v++){const _=Xt(v),g=Xt(h[v]),w=Ae(p.mul(d.mul(_))).toVar(),b=r(i.add(w)),x=r(i.sub(w));m.addAssign(b.add(x).mul(g)),f.addAssign(au(2,g))}return o(m.div(f))}),l=this._material||(this._material=new lu);l.fragmentNode=a().context(e.getSharedContext()),l.name="Gaussian_blur",l.needsUpdate=!0;const c=e.getNodeProperties(this);return c.textureNode=t,this._textureNode}dispose(){this._horizontalRT.dispose(),this._verticalRT.dispose()}_getCoefficients(e){const t=[];for(let i=0;i<e;i++)t.push(.39894*Math.exp(-.5*i*i/(e*e))/e);return t}}const W1=(n,e,t)=>rm(new X1(om(n),e,t));class Y1{constructor(e){D(this,"color",ot(Ys(1,1,1)));D(this,"noiseFactor",ot(0));D(this,"blurDir",ot(Ae(1,1)));const{scene:t,camera:i,renderer:s,UI:r}=e,{color:o,noiseFactor:a,blurDir:l}=this,c=ul(t,i),u=c.getTextureNode(),h=W1(u,l,2),d=Qs,p=hl.distance(.5).remap(.4,1).mul(3).clamp().oneMinus(),f=gn(h,c,gn(p,0,a)),m=ul(r,r.camera);this.postProcessing=new hm(s);const v=m.a,_=uu(dm(hl.add(d)));this.postProcessing.outputNode=gn(f.rgb.mul(o).mul(gn(1,_,a)),m.rgb,v),this.setAnimations()}render(){this.postProcessing.render()}setAnimations(){this.enter=new Bn.timeline({paused:!0});const e={color:{x:.9,y:.4,z:2},blurDir:{x:2.5,y:2.5}};this.enter.to(this.color.value,{...e.color},"a"),this.enter.to(this.blurDir.value,{...e.blurDir},"a"),this.enter.to(this.noiseFactor,{value:1},"a")}setDebug(e){const t=e.addFolder({title:"",expanded:!1});t.addBinding(this.color,"value",{label:"Color",step:.01,min:0,max:2}),t.addBinding(this.noiseFactor,"value",{label:"NoiseFactor",step:.01,min:0,max:1}),t.addBinding(this.blurDir,"value",{label:"BlurDir",step:.01,min:-10,max:10})}}class Q1 extends Fi{constructor(t){super();D(this,"PARAMS",{});this.target=t.target;const i=new Wc(16777215,4);this.target&&(i.target=this.target),i.position.set(10,10,10),i.castShadow=!0,i.shadow.camera.near=.1,i.shadow.camera.far=500,i.shadow.camera.right=20,i.shadow.camera.left=-20,i.shadow.camera.top=20,i.shadow.camera.bottom=-20,i.shadow.mapSize.width=2048,i.shadow.mapSize.height=2048,i.shadow.radius=4,i.shadow.blurSamples=8,i.shadow.bias=-1e-5,i.shadow.normalBias=-.001,this.add(i),this.ambientLight=new pm(16777215,.25),this.add(this.ambientLight)}render(){}dispose(){}resize(){}setDebug(){}}class Z1 extends pi{constructor(){j.concrete.map.wrapS=ye,j.concrete.map.wrapT=ye,j.concrete.map.repeat.set(20,20),j.concrete.normal.wrapS=ye,j.concrete.normal.wrapT=ye,j.concrete.normal.repeat.set(20,20),j.concrete.roughness.wrapS=ye,j.concrete.roughness.wrapT=ye,j.concrete.roughness.repeat.set(20,20),j.concrete.bump.wrapS=ye,j.concrete.bump.wrapT=ye,j.concrete.bump.repeat.set(20,20),j.concrete.ao.wrapS=ye,j.concrete.ao.wrapT=ye,j.concrete.ao.repeat.set(20,20);const i=new mm({color:11316396,map:j.concrete.map,normalMap:j.concrete.normal,roughnessMap:j.concrete.roughness,bumpMap:j.concrete.bump,aoMap:j.concrete.ao}),s=new Zs(100,100,1);super(s,i);D(this,"PARAMS",{});this.receiveShadow=!0,this.rotation.x=-Math.PI*.5,this.matrixAutoUpdate=!1,this.updateMatrix()}render(){}dispose(){}resize(){}}function J1(n){const e=new Map,t=new Map,i=n.clone();return hp(n,i,function(s,r){e.set(r,s),t.set(s,r)}),i.traverse(function(s){if(!s.isSkinnedMesh)return;const r=s,o=e.get(s),a=o.skeleton.bones;r.skeleton=o.skeleton.clone(),r.bindMatrix.copy(o.bindMatrix),r.skeleton.bones=a.map(function(l){return t.get(l)}),r.bind(r.skeleton,r.bindMatrix)}),i}function hp(n,e,t){t(n,e);for(let i=0;i<n.children.length;i++)hp(n.children[i],e.children[i],t)}class eC{constructor(e=512,t=512){const i=document.createElement("canvas");i.width=e,i.height=t;const s=i.getContext("2d");s.fillStyle="rgb(127,127,255)",s.fillRect(0,0,e,t);for(let r=0;r<4e3;r++){const o=Math.random()*e,a=Math.random()*t,l=Math.random()*3+3;let c=Math.random()*2-1,u=Math.random()*2-1,h=1.5;const d=Math.sqrt(c*c+u*u+h*h);c/=d,u/=d,h/=d,s.fillStyle="rgb("+(c*127+127)+","+(u*127+127)+","+h*255+")",s.beginPath(),s.arc(o,a,l,0,Math.PI*2),s.fill()}return i}}class tC{constructor(){this.states={},this.currentState=null}addState(e,t){this.states[e]=t}setState(e){const t=this.currentState;if(t){if(t.Name==e)return;t.exit()}const i=new this.states[e](this);this.currentState=i,i.enter(t)}update(e,t){this.currentState&&this.currentState.update(e,t)}}class yi{constructor(e){this._parent=e}enter(){}exit(){}update(){}}class nC{constructor(e){D(this,"_decceleration",new X(-5e-4,-1e-4,-5));D(this,"_acceleration",new X(1,.25,50));D(this,"_velocity",new X(0,0,0));D(this,"disabled",!1);this.init(e)}init(e){this.target=e.target,this.input=new sC,this.stateMachine=new hC(new iC(e.animations)),this.stateMachine.setState("Idle")}update(e){this.stateMachine.update(e,this.input);const t=this._velocity,i=new X(t.x*this._decceleration.x,t.y*this._decceleration.y,t.z*this._decceleration.z);i.multiplyScalar(e),i.z=Math.sign(i.z)*Math.min(Math.abs(i.z),Math.abs(t.z)),t.add(i);const s=this.target,r=new Ro,o=new X,a=s.quaternion.clone(),l=this._acceleration.clone().multiplyScalar(.2);this.input._keys.space||(this.input._keys.forward&&(t.z+=l.z*e),this.input._keys.backward&&(t.z-=this._acceleration.clone().multiplyScalar(.35*.155).z*e)),this.input._keys.left&&(o.set(0,1,0),r.setFromAxisAngle(o,2*Math.PI*e*this._acceleration.y),a.multiply(r)),this.input._keys.right&&(o.set(0,1,0),r.setFromAxisAngle(o,2*-Math.PI*e*this._acceleration.y),a.multiply(r)),s.quaternion.copy(a);const c=new X;c.copy(s.position);const u=new X(0,0,1);u.applyQuaternion(s.quaternion),u.normalize();const h=new X(1,0,0);h.applyQuaternion(s.quaternion),h.normalize(),h.multiplyScalar(t.x*e),u.multiplyScalar(t.z*e),s.position.add(u),s.position.add(h),c.copy(s.position)}}class iC{constructor(e){this._animations=e}get animations(){return this._animations}}class sC{constructor(){this._keys=xn._keys}}class rC extends yi{constructor(e){super(e)}get name(){return"Idle"}enter(e){const t=this._parent.proxy._animations.Idle.action;if(e){const i=this._parent.proxy._animations[e.name].action;t.time=0,t.enabled=!0,t.setEffectiveTimeScale(1),t.setEffectiveWeight(1),t.crossFadeFrom(i,.5,!0),t.play()}else t.play()}exit(){}update(e,t){t._keys.forward?this._parent.setState("Walking"):t._keys.backward?this._parent.setState("WalkingBackward"):t._keys.left?this._parent.setState("LeftTurn"):t._keys.right?this._parent.setState("RightTurn"):t._keys.space&&this._parent.setState("NervouslyLookAround")}}class oC extends yi{constructor(e){super(e)}get name(){return"Walking"}enter(e){const t=this._parent.proxy._animations.Walking.action;if(e){const i=this._parent.proxy._animations[e.name].action;t.enabled=!0,t.time=0,t.setEffectiveTimeScale(1),t.setEffectiveWeight(1),t.crossFadeFrom(i,.5,!0),t.play()}else t.play()}exit(){}update(e,t){if(t._keys.forward){t._keys.space&&this._parent.setState("NervouslyLookAround");return}this._parent.setState("Idle")}}class aC extends yi{constructor(e){super(e)}get name(){return"Walking backward"}enter(e){const t=this._parent.proxy._animations["Walking backward"].action;if(e){const i=this._parent.proxy._animations[e.name].action;t.enabled=!0,t.time=0,t.setEffectiveTimeScale(1),t.setEffectiveWeight(1),t.crossFadeFrom(i,.5,!0),t.play()}else t.play()}exit(){}update(e,t){if(t._keys.backward){t._keys.forward&&this._parent.setState("Walking"),t._keys.space&&this._parent.setState("NervouslyLookAround");return}this._parent.setState("Idle")}}class lC extends yi{constructor(e){super(e)}get name(){return"Left turn"}enter(e){const t=this._parent.proxy._animations["Left turn"].action;if(e){const i=this._parent.proxy._animations[e.name].action;t.enabled=!0,t.time=0,t.setEffectiveTimeScale(1),t.setEffectiveWeight(1),t.crossFadeFrom(i,.1,!0),t.play()}else t.play()}exit(){}update(e,t){if(t._keys.left){t._keys.forward?this._parent.setState("Walking"):t._keys.backward&&this._parent.setState("WalkingBackward");return}this._parent.setState("Idle")}}class cC extends yi{constructor(e){super(e)}get name(){return"Right turn"}enter(e){const t=this._parent.proxy._animations["Right turn"].action;if(e){const i=this._parent.proxy._animations[e.name].action;t.enabled=!0,t.time=0,t.setEffectiveTimeScale(1),t.setEffectiveWeight(1),t.crossFadeFrom(i,.1,!0),t.play()}else t.play()}exit(){}update(e,t){if(t._keys.right){t._keys.forward?this._parent.setState("Walking"):t._keys.backward&&this._parent.setState("WalkingBackward");return}this._parent.setState("Idle")}}class uC extends yi{constructor(e){super(e)}get name(){return"Nervously look around"}enter(e){const t=this._parent.proxy._animations["Nervously look around"].action;if(e){const i=this._parent.proxy._animations[e.name].action;t.enabled=!0,t.time=0,t.setEffectiveTimeScale(1),t.setEffectiveWeight(1),t.crossFadeFrom(i,.1,!0),t.play()}else t.play()}exit(){}update(e,t){t._keys.space||this._parent.setState("Idle")}}class hC extends tC{constructor(e){super(),this.proxy=e,this.init()}init(){this.addState("Idle",rC),this.addState("Walking",oC),this.addState("WalkingBackward",aC),this.addState("LeftTurn",lC),this.addState("RightTurn",cC),this.addState("NervouslyLookAround",uC)}}class dC{constructor(e){D(this,"position",new X);D(this,"lookAt",new X(0,.5,0));this.camera=e.camera,this.target=e.target,this.position.copy(this.camera.position)}computeIdealOffset(){const e=new X(-5,8,-11).multiplyScalar(.2);return e.applyQuaternion(this.target.quaternion),e.add(this.target.position),e}computeIdealLooAt(){const e=new X(0,14,50).multiplyScalar(.1);return e.applyQuaternion(this.target.quaternion),e.add(this.target.position),e}update(e){const t=this.computeIdealOffset(),i=this.computeIdealLooAt(),s=1-Math.pow(.001,e);this.position.lerp(t,s),this.lookAt.lerp(i,s),this.camera.position.copy(this.position),this.camera.lookAt(this.lookAt)}}class pC extends si{constructor(){super();D(this,"PARAMS",{action:"Idle"});D(this,"actions",{});D(this,"decceleration",new X(-5e-4,-1e-4,-5));D(this,"acceleration",new X(1,.25,50));D(this,"velocity",new X(0,0,0));this.matrixAutoUpdate=!1,this.model=j.dummy.scene,this.add(this.model),this.setAnimations(),this.thirdPersonCamera=new dC({camera:S.camera,target:this.model}),this.curve=new dl([S.camera.position.clone(),new X(10,12,-6.5).multiplyScalar(.2),new X(-5,8,-11).multiplyScalar(.2)]),this.lookAtCurve=new dl([new X(0,.5,0),new X(0,14,50).multiplyScalar(.1)]),document.body.addEventListener("click",async()=>{S.active&&(S.active.leave(),this.enterThird(S.active.activity))});const t=new fm(new eC,vm,ye,ye);this.model.traverse(h=>{h.isMesh&&(h.material.normalMap=t,h.material.normalMap.repeat.set(15,15),h.material.normalScale.set(.15,.15))});const i=200,s=new si;this.afterImages=J1(this.model),this.afterImages.frustumCulled=!1,this.afterImagesMixer=new pl(this.afterImages);let r=this.animations[0];this.afterImagesMixer.clipAction(r).play();const a=this.model.children[0].children[1].material.clone();a.roughness=.5527864098548889,a.reflectivity=.5,a.color=new nt(65792),a.transparent=!0,a.normalMap=t,a.normalMap.repeat.set(15,15),a.normalScale.set(.15,.15);const l=ot(1);this.afterImagesFade=l;const c=Qs;a.colorNode=ke(()=>{const h=br(ml).mul(1).add(0),d=bm.mul(.75).add(c.mul(.5));let p=gm(d);const f=Tt(p.r.add(l),p.r.add(l).add(.4),Tt(0,h,l).oneMinus()).oneMinus();return tt(Ys(a.color),f)})();const u=ke(([h,d=1])=>{const p=br(ml).mul(1).add(0);return br(wm).greaterThan(Tt(0,p,l)).discard(),tt(h,d)});a.shadowNode=u(a.attenuationColor),this.afterImages.traverse(h=>{if(h.isMesh){h.frustumCulled=!1,h.material=a,h.isInstancedMesh=!0,h.instanceMatrix=new Yc(new Float32Array(i*16),16),h.count=i;for(let d=0;d<i;d++)d!==70&&(s.position.x=d%20*-300+300*10,s.position.y=Math.floor(d/20)*-300+300*3,s.updateMatrix(),s.matrix.toArray(h.instanceMatrix.array,d*16))}}),this.add(this.afterImages),this.afterImagesMixer.update(0)}enterThird(t){const i={x:0,y:1};new Bn.timeline({onComplete:()=>{t(),this.third=!0,this.remove(this.afterImages)}}).to(i,{x:1,duration:2,onUpdate:()=>{const r=this.curve.getPointAt(i.x),o=this.lookAtCurve.getPointAt(i.x);S.camera.position.copy(r),S.camera.lookAt(o),this.thirdPersonCamera.position.copy(r),this.thirdPersonCamera.lookAt.copy(o)}},"a").to(i,{y:0,duration:2,ease:"power1.out",onUpdate:()=>{this.afterImagesFade.value=i.y}},"a")}setAnimations(){this._animations={},this.animations=j.dummy.animations,this.mixer=new pl(this.model);for(let t=0;t!==this.animations.length;++t){let i=this.animations[t];const s=i.name,r=this.mixer.clipAction(i);this.actions[s]=r,r.play(),r.setEffectiveWeight(this.PARAMS.action===s?1:0),this._animations[s]={clip:i,action:r}}this.controls=new nC({target:this.model,animations:this._animations})}render(){const t=S.clock.getDelta();this.controls.disabled||(this.mixer.update(t),this.controls.update(t)),this.third&&this.thirdPersonCamera.update(t),this.model.updateMatrix()}dispose(){}resize(){}setDebug(){this.skeleton=new _m(this.model),S.scene.add(this.skeleton)}}class Gt extends pi{constructor(e){const t=new Zs(10,1,1),i=ot(1/10),s=ot(-1),r=ot(e.timeOffset||0),o=ot(Ys(.05)),a=new Oo({transparent:!0,opacity:.628}),l=Tt(-.1,.25,qt().y),c=Tt(-.1,.25,qt().y.oneMinus()),u=Yr(qt().y.div(.5).add(Qs.add(r))).mul(Xt(.5).sub(i)).mul(au(l,c)).add(.5),h=hu(qt().x,u),d=Tt(0,i,h).oneMinus(),p=Tt(s,1,qt().y);a.colorNode=tt(o,d.mul(p)),super(t,a),this.screenX=e.screenX,this.x=e.x,this.color=o.value,this.tail=s;const f={x:this.tail.value};this.animation=new Bn.timeline({paused:!0}),this.animation.to(f,{x:1,duration:2,onUpdate:()=>{this.tail.value=f.x}},"a")}enter(){this.animation.reverse()}leave(){this.animation.play()}render(){}dispose(){}resize(){this.scale.y=ce.viewport.height,this.position.x=ce.viewport.width*this.screenX+this.x}}function dp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var mC=function(n){switch(n){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}},fC=Object.prototype.toString,vC=_C;function _C(n){return n.BYTES_PER_ELEMENT&&fC.call(n.buffer)==="[object ArrayBuffer]"||Array.isArray(n)}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var bC=function(n){return n!=null&&(pp(n)||gC(n)||!!n._isBuffer)};function pp(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function gC(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&pp(n.slice(0,0))}var wC=mC,xC=vC,yC=bC,CC=[0,2,3],PC=[2,1,3],EC=function(e,t){(!e||!(xC(e)||yC(e)))&&(t=e||{},e=null),typeof t=="number"?t={count:t}:t=t||{};for(var i=typeof t.type=="string"?t.type:"uint16",s=typeof t.count=="number"?t.count:1,r=t.start||0,o=t.clockwise!==!1?CC:PC,a=o[0],l=o[1],c=o[2],u=s*6,h=e||new(wC(i))(u),d=0,p=0;d<u;d+=6,p+=4){var f=d+r;h[f+0]=p+0,h[f+1]=p+1,h[f+2]=p+2,h[f+3]=p+a,h[f+4]=p+l,h[f+5]=p+c}return h};const kC=dp(EC);var mp={exports:{}};(function(n){var e=/\n/,t=`
`,i=/\s/;n.exports=function(c,u){var h=n.exports.lines(c,u);return h.map(function(d){return c.substring(d.start,d.end)}).join(`
`)},n.exports.lines=function(u,h){if(h=h||{},h.width===0&&h.mode!=="nowrap")return[];u=u||"";var d=typeof h.width=="number"?h.width:Number.MAX_VALUE,p=Math.max(0,h.start||0),f=typeof h.end=="number"?h.end:u.length,m=h.mode,v=h.measure||l;return m==="pre"?o(v,u,p,f,d):a(v,u,p,f,d,m)};function s(c,u,h,d){var p=c.indexOf(u,h);return p===-1||p>d?d:p}function r(c){return i.test(c)}function o(c,u,h,d,p){for(var f=[],m=h,v=h;v<d&&v<u.length;v++){var _=u.charAt(v),g=e.test(_);if(g||v===d-1){var w=g?v:v+1,b=c(u,m,w,p);f.push(b),m=v+1}}return f}function a(c,u,h,d,p,f){var m=[],v=p;for(f==="nowrap"&&(v=Number.MAX_VALUE);h<d&&h<u.length;){for(var _=s(u,t,h,d);h<_&&r(u.charAt(h));)h++;var g=c(u,h,_,v),w=h+(g.end-g.start),b=w+t.length;if(w<_){for(;w>h&&!r(u.charAt(w));)w--;if(w===h)b>h+t.length&&b--,w=b;else for(b=w;w>h&&r(u.charAt(w-t.length));)w--}if(w>=h){var x=c(u,h,w,v);m.push(x)}h=b}return m}function l(c,u,h,d){var p=Math.min(d,h-u);return{start:u,end:u+p}}})(mp);var TC=mp.exports;const AC=dp(TC),Nc=["x","e","a","o","n","s","r","c","u","m","v","w","z"],Ic=["m","w"],$c=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],Fc=9,Oi=32,SC=0,fp=1,vp=2;class MC{constructor(e={}){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(e)}get width(){return this._width}get height(){return this._height}get descender(){return this._descender}get ascender(){return this._ascender}get xHeight(){return this._xHeight}get baseline(){return this._baseline}get capHeight(){return this._capHeight}get lineHeight(){return this._lineHeight}get linesTotal(){return this._linesTotal}get lettersTotal(){return this._lettersTotal}get wordsTotal(){return this._wordsTotal}update(e){if(e=Object.assign({measure:this._measure},e),this._options=e,this._options.tabSize=Uc(this._options.tabSize,4),!e.font)throw new Error("must provide a valid bitmap font");const t=this.glyphs,i=e.text||"",s=e.font;this._setupSpaceGlyphs(s);const r=AC.lines(i,e),o=e.width||0,a=i.split(" ").filter(b=>b!==`
`).length,l=i.split("").filter(b=>b!==`
`&&b!==" ").length;t.length=0;const c=r.reduce(function(b,x){return Math.max(b,x.width,o)},0);let u=0,h=0;const d=Uc(e.lineHeight,s.common.lineHeight),p=s.common.base,f=d-p,m=e.letterSpacing||0,v=d*r.length-f,_=DC(this._options.align);this._width=c,this._height=v,this._descender=d-p,this._baseline=p,this._xHeight=LC(s),this._capHeight=OC(s),this._lineHeight=d,this._ascender=d-f-this._xHeight,h+=(s.common.lineHeight-d)*.5;let g=0,w=0;r.forEach((b,x)=>{const P=b.start,C=b.end,E=b.width,k=i.slice(P,C).split(" ").filter(q=>q!=="").length,H=i.slice(P,C).split(" ").join("").length;let F=0,B=0,te;for(let q=P;q<C;q++){const ne=i.charCodeAt(q),U=this.getGlyph(s,ne);if(U){te&&(u+=jc(s,te.id,U.id));let xe=u;_===fp?xe+=(c-E)/2:_===vp&&(xe+=c-E);const{yoffset:jn,height:un}=U;t.push({position:[xe,h-(un+jn)+f*.5],data:U,index:q,linesTotal:r.length,lineIndex:x,lineLettersTotal:H,lineLetterIndex:F,lineWordsTotal:k,lineWordIndex:B,wordsTotal:a,wordIndex:g,lettersTotal:l,letterIndex:w}),U.id===Oi&&te.id!==Oi&&(B++,g++),U.id!==Oi&&(F++,w++),u+=U.xadvance+m,te=U}}h-=d,u=0}),this._lettersTotal=l,this._wordsTotal=a,this._linesTotal=r.length}getGlyph(e,t){const i=Bc(e,t);return i||(t===Fc?this._fallbackTabGlyph:t===Oi?this._fallbackSpaceGlyph:null)}computeMetrics(e,t,i,s){const r=this._options.letterSpacing||0,o=this._options.font;let a=0,l=0,c=0,u,h;if(!o.chars||o.chars.length===0)return{start:t,end:t,width:0};i=Math.min(e.length,i);for(let d=t;d<i;d++){const p=e.charCodeAt(d);if(u=this.getGlyph(o,p),u){u.char=e[d],u.xoffset;const f=h?jc(o,h.id,u.id):0;a+=f;const m=a+u.xadvance+r,v=a+u.width;if(v>=s||m>=s)break;a=m,l=v,h=u}c++}return h&&(l+=h.xoffset),{start:t,end:t+c,width:l}}_setupSpaceGlyphs(e){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,!e.chars||e.chars.length===0)return;const t=Bc(e,Oi)||RC(e)||e.chars[0],i=this._options.tabSize*t.xadvance;this._fallbackSpaceGlyph=t;const s=Object.assign({},t);this._fallbackTabGlyph=Object.assign(s,{x:0,y:0,xadvance:i,id:Fc,xoffset:0,yoffset:0,width:0,height:0})}}function VC(n){return new MC(n)}function Bc(n,e){if(!n.chars||n.chars.length===0)return null;const t=vr(n.chars,e);return t>=0?n.chars[t]:null}function LC(n){for(let e=0;e<Nc.length;e++){const t=Nc[e].charCodeAt(0),i=vr(n.chars,t);if(i>=0)return n.chars[i].height}return 0}function RC(n){for(let e=0;e<Ic.length;e++){const t=Ic[e].charCodeAt(0),i=vr(n.chars,t);if(i>=0)return n.chars[i]}return 0}function OC(n){for(let e=0;e<$c.length;e++){const t=$c[e].charCodeAt(0),i=vr(n.chars,t);if(i>=0)return n.chars[i].height}return 0}function jc(n,e,t){if(!n.kernings||n.kernings.length===0)return 0;const i=n.kernings;for(let s=0;s<i.length;s++){const r=i[s];if(r.first===e&&r.second===t)return r.amount}return 0}function DC(n){return n==="center"?fp:n==="right"?vp:SC}function vr(n,e,t){t=t||0;for(let i=t;i<n.length;i++)if(n[i].id===e)return i;return-1}function Uc(n,e){return typeof n=="number"?n:typeof e=="number"?e:0}const NC=["",""],IC=function(e,t,i,s){var r=new Float32Array(e.length*4*2),o=0;return e.forEach(function(a){var l=a.data,c=l.x+l.width,u=l.y+l.height,h=l.x/t,d=l.y/i,p=c/t,f=u/i;s&&(d=(i-l.y)/i,f=(i-u)/i),r[o++]=h,r[o++]=d,r[o++]=h,r[o++]=f,r[o++]=p,r[o++]=f,r[o++]=p,r[o++]=d}),r},$C=function(e){var t=new Float32Array(e.length*4*2),i=0;return e.forEach(function(){var s=0,r=1,o=1,a=0;t[i++]=o,t[i++]=a,t[i++]=o,t[i++]=r,t[i++]=s,t[i++]=r,t[i++]=s,t[i++]=a}),t},FC=function(e){var t=new Float32Array(e.length*4*3),i=0;return e.forEach(function(s){var r=s.data,o=s.position[0]+r.xoffset,a=s.position[1],l=r.width,c=r.height;t[i++]=o,t[i++]=a+c,t[i++]=0,t[i++]=o,t[i++]=a,t[i++]=0,t[i++]=o+l,t[i++]=a,t[i++]=0,t[i++]=o+l,t[i++]=a+c,t[i++]=0}),t},BC=function(e){var t=new Float32Array(e.length*4),i=0,s=0;return e.forEach(function(r){t[i++]=s,t[i++]=s,t[i++]=s,t[i++]=s,s+=jC(r.data.char)+1}),t},jC=function(e){return NC.indexOf(e)>-1?1:0};var Wr=2,re={min:[0,0],max:[0,0]};function _p(n){var e=n.length/Wr;re.min[0]=n[0],re.min[1]=n[1],re.max[0]=n[0],re.max[1]=n[1];for(var t=0;t<e;t++){var i=n[t*Wr+0],s=n[t*Wr+1];re.min[0]=Math.min(i,re.min[0]),re.min[1]=Math.min(s,re.min[1]),re.max[0]=Math.max(i,re.max[0]),re.max[1]=Math.max(s,re.max[1])}}const UC=function(n,e){_p(n),e.min.set(re.min[0],re.min[1],0),e.max.set(re.max[0],re.max[1],0)},zC=function(n,e){_p(n);var t=re.min[0],i=re.min[1],s=re.max[0],r=re.max[1],o=s-t,a=r-i,l=Math.sqrt(o*o+a*a);e.center.set(t+o/2,i+a/2,0),e.radius=l/2};class HC extends tu{constructor(e){super(e),this._opt=Object.assign({},e),e&&this.update(e)}update(e){if(typeof e=="string"&&(e={text:e}),e=Object.assign({},this._opt,e),!e.font)throw new TypeError("must specify a { font } in options");this.layout=VC(e);var t=e.flipY!==!1,i=e.font,s=i.common.scaleW,r=i.common.scaleH,o=this.layout.glyphs.filter(function(d){var p=d.data;return p.width*p.height>0});this.visibleGlyphs=o;var a=kC([],{clockwise:!0,type:"uint16",count:o.length}),l=BC(o),c=FC(o),u=$C(o),h=IC(o,s,r,t);this.setIndex(a),this.setAttribute("index",new wn(l,1)),this.setAttribute("position",new wn(c,3)),this.setAttribute("uv",new wn(u,2)),this.setAttribute("guv",new wn(h,2))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ou);var e=this.attributes.position.array,t=this.attributes.position.itemSize;if(!e||!t||e.length<2){this.boundingSphere.radius=0,this.boundingSphere.center.set(0,0,0);return}zC(e,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ru);var e=this.boundingBox,t=this.attributes.position.array,i=this.attributes.position.itemSize;if(!t||!i||t.length<2){e.makeEmpty();return}UC(t,e)}}class KC extends si{constructor(t){super();D(this,"anchor",new rt(0,1));const{text:i,font:s,letterSpacing:r,geometry:o,material:a,width:l,addons:c}=t;this.addons=c,this.geometry=o||new HC({text:i,font:s,letterSpacing:r,width:l}),a&&(this.material=a),this.mesh=new pi(this.geometry,this.material),this.update(),this.add(this.mesh)}center(){this.anchor.set(.5,.5),this.update()}alignLeft(){this.anchor.x=0,this.update()}alignRight(){this.anchor.x=1,this.update()}alignTop(){this.anchor.y=1,this.update()}alignBottom(){this.anchor.y=0,this.update()}update(t={}){const i=["text","letterSpacing","lineHeight","align"],{mesh:s,geometry:r,anchor:o={}}=this,a={};i.forEach(l=>{t[l]&&(a[l]=t[l])}),r.update(a),s.position.x=-s.geometry.layout.width*o.x,s.position.y=s.geometry.layout.height*(1-o.y)}dispose(){const{mesh:t}=this;this.remove(t),t.geometry.dispose(),t.material.dispose()}}class GC extends lu{static get type(){return"GlyphNodeMaterial"}constructor(e){super(),this.isGlyphMaterial=!0,this.transparent=!0,this.map=e.map,this.setValues(e),this.positionNode=ke(()=>(xm("vec2","vUv").assign(ym("guv")),Cm))(),this.colorNode=ke(()=>{const t=Pm(Ae(),"vUv"),i=Ys(0);var s=Em(this.map,t),r=Lm(s);return tt(i,r)})()}}class qC extends pi{constructor({activity:e=()=>{},leave:t=()=>{}}={}){const r=new rt(200,40),o=Ae(200,40),a=new Zs(r.x,r.y,1),l=new Oo({color:16711680,transparent:!0,opacity:1}),c=ot(0),u=Qs;l.colorNode=ke(()=>{const d=Mt(o.x,o.y),p=o.div(d),f=Sm(o,1);let m=qt().mul(f).add(f.oneMinus().mul(.5));m=m.add(-.5).mul(2);const v=vl(.25*Math.PI).mul(Ae(m).add(Ae(xs(p.x),p.y))),_=vl(.25*Math.PI).mul(Ae(m).add(Ae(p.x,xs(p.y)))),g=zc(d.div(2)),w=km(16777215),b=tt(Xt(16).div(d),0,Xt(16).div(d),0),x=Vm(m,p.sub(g),b),P=fl(v,Ae(Xt(20).div(d))),C=fl(_,Ae(Xt(20).div(d)));let E=Mt(xs(P),x);E=Mt(xs(C),E);const y=Tt(0,g,E).oneMinus();return tt(w,gn(y.mul(.628),y.mul(.628).mul(uu(m.mul(u)).mul(.5).add(.75)),c))})(),super(a,l),this.activity=e,this.leave=t;const h=new GC({map:j.atlas});this.glyph=new KC({text:"START",letterSpacing:22,font:j.PPNeueMontrealMedium,material:h}),this.glyph.center(),this.glyph.scale.set(.685,.685),this.glyph.position.y=.5,this.glyph.updateMatrix(),this.add(this.glyph),this.active=c}render(){}dispose(){}resize(){this.position.y=ce.viewport.height*-.5+24+20}}class Vo extends pi{constructor(){const e=new Zs(10,10,1),t=new Oo({color:6223615,transparent:!0,opacity:0});super(e,t);const i=new nt(6223615),s=hu(qt().add(Ae(-.5)),Ae(0));t.colorNode=tt(i,Tt(1/10,2/10,s).oneMinus().mul(.5)),this.animation=new Bn.timeline({paused:!0}),this.animation.to(t,{opacity:1,duration:.5},"a")}enter(){this.animation.reverse()}leave(){this.animation.play()}render(){}dispose(){}resize(){}}class XC extends Kc{constructor(){super();D(this,"activables",new Fi);const{width:t,height:i}=ce.viewport;this.camera=new nu(t/-2,t/2,i/2,i/-2,.1,1e3),this.camera.position.set(0,0,100);const s=154;this.line=new Gt({screenX:-.5,x:s,timeOffset:Math.random()*100}),this.add(this.line),this.line1=new Gt({screenX:-.5,x:s}),this.add(this.line1),this.line2=new Gt({screenX:.5,x:-s}),this.add(this.line2),this.line3=new Gt({screenX:.5,x:-s,timeOffset:Math.random()*100}),this.add(this.line3),this.line4=new Gt({screenX:.5,x:-s,timeOffset:Math.random()*100}),this.add(this.line4),this.button=new qC({leave:()=>{this.activables.remove(this.button),this.traverse(r=>{r instanceof Gt&&r.leave()}),Bn.to(document.body.querySelectorAll(".content a"),{duration:.625,autoAlpha:0,x:-50,ease:"sine.inOut",stagger:{each:.05,ease:"sine.inOut",from:"end"}})},activity:()=>{this.crosshair=new Vo,this.add(this.crosshair),this.crosshair.leave()}}),this.add(this.activables),this.activables.add(this.button)}handleRaycast(t){S.raycaster.setFromCamera(xn.coords,this.camera),S.raycaster.intersectObjects(this.activables.children,!1).length>0?(document.body.style.cursor="pointer",S.active!=this.button&&(S.active=this.button,this.button.active.value=1,t.components.character&&(t.components.character.controls.input._keys.space=!0))):(document.body.style.cursor="unset",S.active===this.button&&(this.button.active.value=0,S.active=null,t.components.character&&(t.components.character.controls.input._keys.space=!1)))}render(){}dispose(){}resize(){const{width:t,height:i}=ce.viewport;this.camera.left=t/-2,this.camera.right=t/2,this.camera.top=i/2,this.camera.bottom=i/-2,this.camera.updateProjectionMatrix(),this.line.resize(),this.line1.resize(),this.line2.resize(),this.line3.resize(),this.line4.resize(),this.button.resize()}}class WC{constructor(){D(this,"components",{});this.init()}init(){j.manager.onLoad=()=>{this.setComponents(),S.debug&&this.setDebug()},j.manager.onStart=()=>{},j.manager.onProgress=(e,t,i)=>{console.log("Assets:onProgress",e,t,i)},j.init(),this.components.UI=new XC,this.postProcessing=new Y1({camera:S.camera,scene:S.scene,renderer:S.renderer,UI:this.components.UI}),this.entityManager=new si,this.entityManager.name="EntityManager",S.scene.add(this.entityManager),this.setupAnimation(),xn.menuCallback=()=>{this.toggleMenu()}}setComponents(){this.components.ground=new Z1,S.scene.add(this.components.ground),this.components.character=new pC,this.entityManager.add(this.components.character),this.components.lights=new Q1({target:this.components.character.model}),S.scene.add(this.components.lights)}setupAnimation(){this.menuTl=new Bn.timeline({paused:!0,onUpdate:()=>{var e;(e=S.debug)==null||e.refresh()}}),this.menuTl.add(this.postProcessing.enter.play(),"a"),this.menuTl.to(S.PARAMS,{fov:70,onUpdate:()=>{S.updateCamera()}},"a"),this.menuTl.to(document.body.querySelectorAll(".content a"),{duration:.625,autoAlpha:1,x:0,stagger:{each:.05,ease:"sine.inOut"}},"a")}toggleMenu(){this.menuTl.reversed()||this.menuTl.paused()?(this.components.character.controls.disabled=!0,this.menuTl.play(),this.components.UI.traverse(e=>{(e instanceof Gt||e instanceof Vo)&&e.enter()})):(this.components.character.controls.disabled=!1,this.menuTl.reverse(),this.components.UI.traverse(e=>{(e instanceof Gt||e instanceof Vo)&&e.leave()}))}render(e,t){Object.keys(this.components).forEach(i=>{this.components[i].render(e,t),"traverse"in this.components[i]&&this.components[i].traverse(s=>{"handleRaycast"in s&&s.handleRaycast(this)})}),this.postProcessing?this.postProcessing.render():S.render()}disposeComponent(e){this.components[e].dispose(),delete this.components[e]}dispose(){Object.keys(this.components).forEach(e=>{this.disposeComponent(e)}),S.scene.remove(this.entityManager)}resize(){Object.keys(this.components).forEach(e=>{this.components[e].resize()})}setDebug(){S.setDebug(),this.postProcessing.setDebug(S.debug),Object.keys(this.components).forEach(e=>{"setDebug"in this.components[e]&&this.components[e].setDebug(S.debug)}),S.debug.addButton({title:"Haze"}).on("click",()=>{this.toggleMenu()})}}Math.TAU=Math.PI*2;class YC{constructor(){xn.init(),S.init(),this.output=new WC,this.init()}init(){this.resize(),this.x=this.resize.bind(this),window.addEventListener("resize",this.x,!1),this.boundRender=this.render.bind(this),S.renderer.setAnimationLoop(this.boundRender)}render(e,t){xn.render(e,t),this.output.render(e,t)}resize(){xn.resize(),S.resize(),this.output.resize()}dispose(){window.removeEventListener("resize",this.x),xn.dispose(),S.dispose(),this.output.dispose()}}new YC;
